---
name: 行选择
---

import { Playground, Props } from "docz";
import Table, { flatten } from "tablex";
import { Input,Checkbox } from "antd";
import 'antd/dist/antd.css';

# 用法示例

```javascript
import Table, { flatten, unflatten } from "tablex";
```

## 无选择

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {
      return columns.reduce(
        (rowData, column, columnIndex) => {
          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150,
        align: "center"
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
        data={data}
        rowSelection={{
          type:"none"
        }}
        orderNumber={false}
      />
    );

}
}

}

</Playground>

## 单选模式（默认）

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {
      return columns.reduce(
        (rowData, column, columnIndex) => {
          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150,
        align: "center"
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
        data={data}
       rowSelection={{
          type:"radio",
          showCheckbox:false
        }}
        orderNumber={false}
      />
    );

}
}

}

</Playground>

## 多选模式

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {
      return columns.reduce(
        (rowData, column, columnIndex) => {
          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150,
        align: "center"
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
    
        data={data}
          
        orderNumber={false}
        rowSelection={{
          type:"checkbox"
        }}

/>
);

}
}

}

</Playground>



## 复选框多选模式&行单选

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {
      return columns.reduce(
        (rowData, column, columnIndex) => {
          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150,
        align: "center"
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
    
        data={data}
          
        orderNumber={false}
        rowSelection={{
          type:"checkbox",
          checkOnSelect:true,
          selectOnCheck:true,
          selectType:"single"
        }}

/>
);

}
}

}

</Playground>

## 禁止部分行选中

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {
      return columns.reduce(
        (rowData, column, columnIndex) => {
          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + "" + rowIndex + "-Col" + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150,
        align: "center"
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns,50);

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data, current, pageSize, total } = this.state;
    return (
      <Table
        rowKey="id"
        columns={columns}
        data={data}
            rowSelection={{
          type:"checkbox",
          selectType:"none",
          disabledCheckedKeys:["Row0-Col0","Row1-Col0","Row2-Col0","Row3-Col0","Row4-Col0"],
          getCheckboxProps:function(row){
              let attr={};
              let  disabledCheckedKeys=["Row0-Col0","Row1-Col0","Row2-Col0","Row3-Col0","Row4-Col0"];
              if(disabledCheckedKeys.indexOf(row.id)>-1){
                attr.disabled=true;
              }
              return attr;
          }
        }}
      />
    );
}
}

}

</Playground>

## 树形数据多选，级联控制半选、选中状态

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {

      return columns.reduce(
        (rowData, column, columnIndex) => {

          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    data[0].children=this.generateData(columns,5,"Row-0-children-");
    data[0].children[0].children=this.generateData(columns, 5,"Row-0-children-0-");

    
    data[3].children=this.generateData(columns,5,"Row-3-children-");
    data[3].children[0].children=this.generateData(columns, 5,"Row-3-children-0-");

    this.state = {
      data: data,
      columns: columns
    };

}

onSelectChange(a,b,c,d){
console.log("onSelectChange:",a,b,c,d)
}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
        data={data}
       onSelectChange={this.onSelectChange.bind(this)}
          rowSelection={{
            type:"checkbox",
            checkStrictly:true
          }}
  

/>
);

}
}

}

</Playground>


## 自定义多选框列


<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {

      return columns.reduce(
        (rowData, column, columnIndex) => {

          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
        data={data}
        orderNumber={false}

        rowSelection={{
          fixed:true,
          columnWidth:100,
          getCheckboxProps:function(){return {children:<span>check</span>}},
          columnTitle:function({onChange}){return <Checkbox onChange={(e)=>{onChange(!e.target.checked)}}>check</Checkbox>}
        }}
     

/>
);

}
}

}

</Playground>




## 快捷选中数据，shift&拖拽

> 支持shift多选数据，点击checkbox后，下一次点击checkbox的同时按下shift键，将选中两次点击之间的所有数据；
> 支持拖拽选中数据，鼠标在checkbox所在列进行拖拽操作，将选中拖拽区域中的所有数据；

<Playground style={{ height: 400 }}>
 {
  class Demo extends React.Component {
  generateData(columns, count = 20, prefix = "Row") {
    return new Array(count).fill(0).map((row, rowIndex) => {

      return columns.reduce(
        (rowData, column, columnIndex) => {

          if (column.dataIndex !== "id") {
            rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1);
          } else {
            rowData[column.dataIndex] =
              prefix + " " + rowIndex + " - Col " + columnIndex;
          }

          return rowData;
        },
        {
          id: prefix + rowIndex,
          parentId: null
        }
      );
    });

}

constructor(props) {
super(props);

    const columns = [
      {
        dataIndex: "id",
        title: "id",
        key: "id",
        width: 150
      },
      {
        dataIndex: "column-1",
        key: "column-1",
        title: "column-1",
        width: 100
      },

      {
        dataIndex: "column-2",
        key: "column-2",
        title: "column-2",
        width: 150,
        align: "center"
      },

      {
        dataIndex: "column-3",
        key: "column-3",
        title: "column-3",
        align: "right"
      },
      {
        dataIndex: "column-4",
        key: "column-4",
        title: "column-4",
        width: 100,
        align: "center"
      }
    ];

    let data = this.generateData(columns, 20);

    data[0].children=this.generateData(columns,5,"Row-0-children-");
    data[0].children[0].children=this.generateData(columns, 5,"Row-0-children-0-");

    
    data[3].children=this.generateData(columns,5,"Row-3-children-");
    data[3].children[0].children=this.generateData(columns, 5,"Row-3-children-0-");

    this.state = {
      data: data,
      columns: columns
    };

}

render() {
let { columns, data } = this.state;

    return (
      <Table
        rowKey="id"
        columns={columns}
        data={data}

          rowSelection={{
            areaSelectEnabled:true,
            type:"checkbox",
            checkStrictly:true
          }}
  

/>
);

}
}

}

</Playground>