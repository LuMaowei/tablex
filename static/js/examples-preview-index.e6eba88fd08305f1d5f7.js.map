{"version":3,"sources":["e:/WebRoot/tablex/packages/siteCN/examples/Preview/preview.js","e:/WebRoot/tablex/packages/siteCN/examples/Preview/index.mdx"],"names":["columns","count","prefix","props","Array","fill","map","column","columnIndex","key","dataIndex","title","width","generateColumns","fixedColumns","row","rowIndex","reduce","rowData","id","parentId","generateData","fixed","resizable","createData","level","parentKey","maxLevel","index","l","data","i","k","d","age","address","children","push","createTreeData","childrens","titleRender","align","halign","minWidth","validator","value","valid","message","editor","onchange","ref","el","defaultValue","onChange","e","target","obj","colSpan","render","maxWidth","Demo","tableRef","React","createRef","state","loading","expandedRowKeys","expandedRowRender","record","extra","frozen","Date","getTime","onExpandedRowsChange","arr","setState","tableInner","innerRef","ins","scrollToItem","getData","setTimeout","edit","current","api","editRows","add","insertData","editing","prepend","startIndex","onSelectChange","a","b","c","orderNumber","orders","join","selectionColumn","attrs","disabled","checked","onEditSave","changedRows","newRows","console","log","this","style","height","editTools","tableId","editable","isAppend","allowSaveEmpty","alwaysValidate","rowKey","checkStrictly","selectMode","selectOnRowClick","defaultExpandedRowKeys","onExpand","r","rowClassName","summary","border","text","type","frozenRender","rowHeight","bottom","cellRender","onRow2","position","top","zIndex","footerExtra","padding","rowHeight2","expandRowHeight","headerRowHeight","Component","layoutProps","MDXLayout","MDXContent","components","mdxType","__position","__code","__scope","Playground","Props","Preview","isMDXComponent"],"mappings":"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","file":"static/js/examples-preview-index.9b06bf95.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Table } from \"tablex\";\nimport { Checkbox, Input, Button } from \"antd\";\n\nconst generateColumns = (count = 10, prefix = \"column-\", props) =>\n  new Array(count).fill(0).map((column, columnIndex) => ({\n    ...props,\n    key: `${prefix}${columnIndex}`,\n    dataIndex: `${prefix}${columnIndex}`,\n    title: `Column ${columnIndex}`,\n    width: 150\n  }));\n\nconst generateData = (columns, count = 20, prefix = \"row-\") =>\n  new Array(count).fill(0).map((row, rowIndex) => {\n    return columns.reduce(\n      (rowData, column, columnIndex) => {\n        rowData[column.dataIndex] = `Row ${rowIndex} - Col ${columnIndex}`;\n\n        if (rowIndex === 0) {\n          //rowData.children = [];\n        }\n\n        return rowData;\n      },\n      {\n        id: `${prefix}${rowIndex}`,\n        parentId: null\n      }\n    );\n  });\n\nconst columns = generateColumns(10);\nconst data = generateData(columns, 100);\n\nlet fixedColumns = columns.map((column, columnIndex) => {\n  let fixed;\n  if (columnIndex < 2) fixed = \"left\";\n  if (columnIndex > 8) fixed = \"right\";\n\n  return { ...column, resizable: true, fixed };\n});\n\nfixedColumns = [\n  {\n    dataIndex: \"column-1\",\n    key: \"column-1\",\n    title: <span>标签title</span>,\n    titleRender: () => {\n      return <span>titleRender</span>;\n    },\n    align: \"left\",\n    halign: \"center\",\n    minWidth: 300,\n    validator: function(value, row) {\n      if (!value) {\n        return { valid: false, message: \"请输入\" };\n      }\n\n      return { valid: true, message: \"false\" };\n    },\n    editor: function(value, row, index, onchange, ref) {\n      let el = (\n        <Input\n          defaultValue={value}\n          ref={ref}\n          onChange={e => onchange({ \"column-1\": e.target.value })}\n        />\n      );\n\n      const obj = {\n        children: el,\n        props: {}\n      };\n\n      if (index === 1) {\n        obj.props.colSpan = 2;\n        obj.children = el;\n      }\n\n      return obj;\n    },\n    render: (value, row, index) => {\n      const obj = {\n        children: value,\n        props: {}\n      };\n\n      if (index === 1) {\n        obj.props.colSpan = 2;\n        obj.children = <div>{value}</div>;\n      }\n\n      return obj;\n    }\n  },\n  {\n    title: \"appellation\",\n    width: 150,\n    halign: \"left\",\n    children: [\n      {\n        dataIndex: \"address\",\n        title: \"name\"\n      },\n      {\n        title: \"nick name\",\n        width: 150,\n        children: [\n          {\n            dataIndex: \"id\",\n            title: \"nick-1\",\n            maxWidth: 300,\n            width: 150\n          },\n          {\n            dataIndex: \"level\",\n            title: \"level\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    dataIndex: \"id\",\n    key: \"column-4\",\n    title: \"id\"\n  }\n];\n\nfunction createData(level, parentKey, maxLevel, index) {\n  if (level > maxLevel) {\n    return;\n  }\n\n  let l = level;\n  let data = [];\n  for (let i = 0; i < 3; i++) {\n    let k = parentKey + \"-\" + level + \"-\" + i;\n    let d = {\n      id: k,\n      \"column-1\": \"Edward King \" + k,\n      age: 32,\n      level: level,\n      address: \"London, Park Lane no. \" + i\n    };\n\n    if (i === 2) {\n      d.children = createData(l + 1, k, maxLevel, i);\n    }\n\n    data.push(d);\n  }\n  return data;\n}\n\nfunction createTreeData() {\n  let data = [];\n  for (let i = 0; i < 10; i++) {\n    let childrens = createData(0, i, 2);\n    let d = {\n      id: \"\" + i,\n      level: 0,\n      \"column-1\": \"Edward King \" + i,\n      age: i,\n      address: \"London, Park Lane no. \" + i\n    };\n\n    if (i % 3 === 0) {\n      d.children = childrens;\n    }\n\n    data.push(d);\n  }\n\n  return data;\n}\n\nclass Demo extends Component {\n  tableRef = React.createRef();\n  state = {\n    data: [],\n    loading: false,\n    expandedRowKeys: []\n  };\n\n  componentDidMount() {\n    this.setState({\n      data: createTreeData()\n    });\n  }\n\n  expandedRowRender = (record, index, extra) => {\n    if (extra.frozen === \"none\") {\n      return <div>expandedRowRender{new Date().getTime()}</div>;\n    }\n    return null;\n  };\n\n  onExpandedRowsChange = arr => {\n    this.setState({ expandedRowKeys: arr });\n  };\n\n  tableInner = null;\n  innerRef = ins => {\n    this.tableInner = ins;\n  };\n\n  scrollToItem = () => {\n    if (this.tableInner) {\n      this.tableInner.scrollToItem(13);\n    }\n  };\n\n  getData = () => {\n    this.setState({ loading: true });\n    setTimeout(() => {\n      this.setState({ loading: false, data: createTreeData() });\n    }, 1000);\n  };\n\n  edit = () => {\n    if (this.tableRef.current) {\n      this.tableRef.current.api.editRows([\"2\"]);\n    }\n  };\n\n  add = () => {\n    if (this.tableRef.current) {\n      this.tableRef.current.api.insertData({\n        data: [{ id: \"inserted_row_\" + new Date().getTime() }],\n        parentKey: \"3\",\n        editing: true,\n        prepend: false,\n        startIndex: 2\n      });\n    }\n  };\n\n  delete = () => {\n    if (this.tableRef.current) {\n      this.tableRef.current.api.delete();\n    }\n  };\n\n  onSelectChange = (a, b, c) => {\n    //console.log(\"onSelectChange:\", b);\n  };\n\n  orderNumber = {\n    title: \"排序\",\n    width: 50,\n    align: \"left\",\n    resizable: true,\n    fixed: \"left\",\n    render: (value, row, index, extra) => {\n      let { orders = [] } = extra;\n      return orders.join(\"-\");\n    }\n  };\n\n  selectionColumn = {\n    fixed: \"left\",\n    title: attrs => {\n      return (\n        <Checkbox\n          {...attrs}\n          disabled={true}\n          onChange={e => {\n            attrs.onChange(e.target.checked);\n          }}\n        />\n      );\n    },\n    render: (row, index, extra) => {\n      return (\n        <Checkbox\n          {...extra}\n          onChange={e => {\n            extra.onChange(e.target.checked);\n          }}\n        />\n      );\n    }\n  };\n\n  onEditSave = (changedRows, newRows) => {\n    console.log(\"onEditSave changedRows:\", changedRows);\n    console.log(\"onEditSave newRows:\", newRows);\n\n    this.setState({ data: newRows });\n  };\n\n  render() {\n    return (\n      <>\n        <div style={{ height: \"100%\" }}>\n          <Table\n            loading={this.state.loading}\n            editTools={[\"edit\", \"add\", \"delete\"]}\n            tableId=\"preview_table\"\n            editable={true}\n            isAppend={true}\n            allowSaveEmpty={true}\n            alwaysValidate={true}\n            ref={this.tableRef}\n            rowKey=\"id\"\n            onEditSave={this.onEditSave}\n            innerRef={this.innerRef}\n            columns={fixedColumns}\n            checkStrictly={true}\n            selectMode=\"multiple\"\n            selectOnRowClick={false}\n            defaultExpandedRowKeys={[\"0\"]}\n            data={this.state.data}\n            onExpand={(b, r) => {\n              //  console.log(\"onExpand:\", r);\n            }}\n            onExpandedRowsChange={this.onExpandedRowsChange}\n            onSelectChange={this.onSelectChange}\n            rowClassName={() => {\n              // console.log(\"rowClassName\");\n            }}\n            orderNumber={this.orderNumber}\n            selectionColumn={this.selectionColumn}\n            summary={{\n              style: { border: \"none\" },\n              title: { text: \"合计:\", column: \"__checkbox_column\" },\n              data: [\n                {\n                  age: \"sum\",\n                  level: \"min\"\n                }\n              ],\n              render: (value, dataIndex, type, index) => {\n                return type + \":\" + value;\n              }\n            }}\n            frozenRender={{\n              rowHeight: 40,\n              rowKey: \"id\",\n              bottom: [this.state.data[0]],\n              cellRender: (value, row, index, extra) => {\n                console.log(\"cellRender:\", extra);\n                return value;\n              }\n            }}\n            onRow2={(row, index, extra) => {\n              if (index === 4) {\n                return {\n                  style: { position: \"sticky\", top: 0, zIndex: 2 }\n                };\n              } else {\n                if (index < 4) {\n                  return {\n                    style: { top: extra.style.top + 50 }\n                  };\n                }\n              }\n            }}\n            footerExtra={() => {\n              return <div style={{ padding: \"14px 10px\" }}>底部信息展示</div>;\n            }}\n            rowHeight2={(d, i) => {\n              if (i % 2 === 0) {\n                return 50;\n              } else {\n                return 30;\n              }\n            }}\n            expandRowHeight={200}\n            headerRowHeight={[30, 40, 60]}\n          />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Demo;\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport { Playground, Props } from \"docz\";\nimport Preview from \"./preview\";\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"features-preview\"\n    }}>{`Features Preview`}</h1>\n    <h2 {...{\n      \"id\": \"示例\"\n    }}>{`示例`}</h2>\n    <Playground __position={0} __code={'<Preview />'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      Props,\n      Preview\n    }} style={{\n      height: 600\n    }} mdxType=\"Playground\">\n  <Preview mdxType=\"Preview\" />\n    </Playground>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"],"sourceRoot":""}