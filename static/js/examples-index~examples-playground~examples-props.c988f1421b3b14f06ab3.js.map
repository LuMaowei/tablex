{"version":3,"sources":["E:/WebRoot/tablex/src/base/GroupHeader.js","E:/WebRoot/tablex/src/base/ExpandIcon.js","E:/WebRoot/tablex/src/base/Checkbox.js","E:/WebRoot/tablex/src/base/BaseTable.js","E:/WebRoot/tablex/src/base/index.js","E:/WebRoot/tablex/src/base/utils.js","E:/WebRoot/tablex/src/featured/ColumnDropMenu.js","E:/WebRoot/tablex/src/featured/Table.js","E:/WebRoot/tablex/src/featured/Editable.js","E:/WebRoot/tablex/src/featured/index.js","E:/WebRoot/tablex/src/featured/pagination/index.js","E:/WebRoot/tablex/src/featured/setting/utils.js","E:/WebRoot/tablex/src/featured/setting/modal.js","E:/WebRoot/tablex/src/featured/setting/index.js"],"names":["Column","_ref","cell","depth","columnDepth","headerHeight","h","dataIndex","react_default","a","createElement","className","style","height","ColumnGroup","_ref2","title","children","display","alignItems","justifyContent","borderRight","borderTop","renderChildren","_ref3","parent","cells","columnList","frozen","columns","filter","c","type","arguments","length","undefined","column","getTreeLeafs","findIndex","d","isForzen","GroupHeader_ColumnGroup","key","__depth","map","i","cellIndex","GroupHeader_Column","Object","assign","__placeholder__","__parents","renderColumns","_ref4","arr","GroupHeader","props","Fragment","MemoHeader","_ref5","_ref5$cells","_ref5$headerHeight","useMemo","ExpandLoading","viewBox","data-icon","width","fill","aria-hidden","focusable","ExpandIcon","loading","expandable","expanded","onExpand","isLeaf","cls","marginLeft","onClick","e","stopPropagation","Checkbox","indeterminate","onChange","value","checked","disabled","Table","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getScrollbarSize","components","expandIconProps","rowData","rowKey","Array","state","loadingKeys","indexOf","isLoadingChildren","setLoadingChildren","bl","callback","nextKeys","toConsumableArray","push","splice","setState","data","cloneDeep","loadChildrenData","row","fn","res","constructor","name","then","childrens","onRowExpand","rowIndex","headerRenderer","headerIndex","base_GroupHeader","rowHeight","onScroll","scrollLeft","horizontalScrollDirection","getRowsByKeys","keys","rows","_this$state","flatData","forEach","k","find","r","isSingleSelect","selectMode","isMultipleSelect","isDisabledSelect","disabledSelectKeys","isExtraColumn","onSelectChange","selectedRowKeys","concat","rowEventHandlers","event","o","isSelected","isDisabledCheck","onCheckChange","checkStrictly","addChecked","removeChecked","onCheckAllChange","addAllChecked","removeAllChecked","_this$state2","nextSelected","halfCheckedKeys","parentKeys","p","checkboxCellRender","_ref6","_this$state3","attr","base_Checkbox","checkboxHeadRender","_ref7","_this$state4","isCheckedAll","orderNumberCellRender","_ref8","rowClassName","_ref9","_this$state5","rowSelectClassName","tempCls","record","index","join","tableApi","getSelectedKeys","prevProps","orderNumber","striped","showHeader","bordered","expandColumnKey","initRef","assertThisInitialized","_this$state6","_addCheckedKeyWithDis","addCheckedKeyWithDisabled","nextHalflCheckedKeys","_this$state7","_removeCheckedKey","removeCheckedKey","dataKey","_this$state8","checkboxColumn","__type","orderNumberColumn","cellRenderer","attrs","fixed","classPrefix","overscanRowCount","flexShrink","flexGrow","es","nextProps","prevState","resizable","nextState","_nextState","extraColumns","unshift","align","columnsArr","_treeToList","treeToList","leafs","maxDepth","list","hasFrozenLeft","hasOwnProperty","render","_ref10","cellData","columnIndex","React","isValidElement","defineProperty","Component","AutoResizeTable","_ref11","BaseTable_Table","BaseTable","defaultProps","dataSource","idField","treeList","roots","getChildren","item","parents","tempArr","__parent","sortedArr","sort","b","treeToFlatten","listToTree","pidField","tree","id","y","_loop","nextId","len","getDataListWithExpanded","expandedKeys","setChildren","cArr","treeFilter","node","nextChildrens","getScrollbarWidth","navigator","userAgent","scrollbarWidth","oP","document","styles","overflowY","body","appendChild","offsetWidth","clientWidth","remove","addCheckedKey","nextHalfCheckedKeys","halfIndex","parentHalfCheckedKeys","childrenSelectedKeys","ck","_loop2","pNode","childrensAllChecked","cKey","j","newHalflCheckedKeys","childrenKeys","_loop3","m","_loop4","childrensAllUnChecked","_ref3$disabledSelectK","isEnabled","itemKey","parentEnableSelect","pArr","isEnableSelect","_loop5","__webpack_require__","__webpack_exports__","SubMenu","Menu","HeadDropMenu","columnKey","config","onFilterColumnChange","hidden","columnsFilter","_this$props","columnsConfig","columnsOptions","defaultChecked","isHide","react__WEBPACK_IMPORTED_MODULE_5___default","antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_7___default","target","handleClick","domEvent","keyPath","1","2","3","6","grouped","7","lineHeight","padding","_this$props$options","options","pinable","filterable","groupable","antd_lib_menu__WEBPACK_IMPORTED_MODULE_6___default","forceSubMenuRender","mode","onTitleClick","Item","FeaturedTable","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","dropdown_button_ref","createRef","onPageChange","pageIndex","pageSize","pagination","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","current","columnSettingMenuShow","click","columnMenu","dataset","columnkey","trigger","visible","offsetX","clientX","offsetY","clientY","columnSettingMenuHide","onColumnResize","onColumnChange","configs","prevConfig","nextConfig","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","newConfigs","setConfigs","tableId","groupedColumnKey","formatColumns","order","react__WEBPACK_IMPORTED_MODULE_7___default","data-columnkey","orderBy","saveConfig","resetConfig","renderHeader","header","headerExtra","renderFooter","footer","pageAttr","settable","footerExtra","dataTotal","total","hasPager","hasPagination","pager","settingButton","marginRight","_setting__WEBPACK_IMPORTED_MODULE_13__","onSave","onReset","rawColumns","_pagination__WEBPACK_IMPORTED_MODULE_9__","overlayRenderer","antd_lib_spin__WEBPACK_IMPORTED_MODULE_10___default","spinning","tip","position","margin","left","right","top","bottom","emptyRenderer","getConfigs","_this$state$paginatio","Math","floor","getMaxCurrent","_","getCurrentPageData","newProps","columnMenuState","_base_index__WEBPACK_IMPORTED_MODULE_8__","antd_lib_popover__WEBPACK_IMPORTED_MODULE_15___default","onVisibleChange","content","_ColumnDropMenu__WEBPACK_IMPORTED_MODULE_11__","arrowPointAtCenter","placement","ref","newPagination","EditableTable","rowsAttributes","tableRef","inst","isEditing","updateComponent","dataList","addedData","delayTimer","delayUpdate","delay","validateDelay","clearTimeout","setTimeout","isMouseFocus","changedRows","addToChanged","newRow","validateTrigger","validateRow","editChange","newValues","setRowAttr","fRow","__attribute","merge","newAttr","getRowAttr","getValidate","validatorAsync","validation","validator","v","Promise","resolve","reject","valid","msg","message","validateAsync","all","datas","validate","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","sent","abrupt","stop","validateAll","_callee2","editKeys","isEditAll","allData","_context2","editorInstance","setEditorIns","ins","ed","getEditorIns","editingVisible","cols","editor","renderFn","renderProps","newRenderProps","colSpan","values","verticalAlign","onKeyDown","tooltip_default","editAll","endEdit","callBack","editSaveLoading","isAdding","isAddingRange","sourceData","editType","cancelEdit","onCancel","reset","editRows","getChangedRows","getRows","addRow","editting","addRows","newEditKeys","newAddedData","rowKeys","rowTemplate","Date","getTime","setRows","focusInput","input","select","focus","el","ReactDom","findDOMNode","inputEl","getElementsByTagName","getNextEditor","keyCode","nextEditor","currIndex","nextRow","currColumnIndex","nextColumn","currEditor","getRealOpenState","completeEdit","_callee3","allowSaveEmpty","alwaysValidate","newRows","addedRows","onEditSave","_context3","__isAddedRow","error","_x","apply","edit","onBeforeEdit","onEdit","selectedKeys","onBeforeDelete","warn","newData","deletedRows","deleteLoading","onDelete","addRange","rowCount","_this$props2","defaultAddCount","isAppend","onBeforeAdd","addCount","onAdd","editTools","tools","editToolsConfig","buttons","itemStyle","okText","okIcon","icon_default","cancelText","cancelIcon","addText","addIcon","editText","editIcon","deleteText","deleteIcon","button_default","objectSpread","menu","menu_default","dropdown_default","overlay","tool","popconfirm_default","onConfirm","toolIcon","icon","toolAttr","handler","text","getProps","createToolBar","editable","backgroundColor","getDataRows","_this$state9","_this$props3","updateRows","api","delete","getData","_this$props$editTools","_this$props$editTools2","toolBar","propsOriginal","dataControled","forwardRef","Editable","propTypes","PropTypes","bool","array","object","number","func","oneOf","Pager","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","onShowSizeChange","onRefresh","onPageIndexChange","pagerAttr","E_WebRoot_tablex_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","showSizeChanger","refreshButton","react__WEBPACK_IMPORTED_MODULE_6___default","antd_lib_button__WEBPACK_IMPORTED_MODULE_8___default","start","end","totalCount","totalInfo","antd_lib_pagination__WEBPACK_IMPORTED_MODULE_7___default","pageSizeOptions","cd","getFullYear","getMonth","getDate","getHours","mi","getMinutes","s","getSeconds","serverSaveFunctionName","LocalConfig","get","allConfigs","JSON","parse","window","localStorage","getItem","settings","set","time","setItem","stringify","saveConfigs","settedConfigs","serverSaveFn","removeConfigs","treeForEach","RadioGroup","Radio","Group","RadioButton","Button","SortableItem","onChangeWidth","onChangeFixed","onToggleVisible","itemStyles","borderBottom","marginBottom","paddingBottom","fontWeight","textAlign","input_number_default","size","switch_default","checkedChildren","unCheckedChildren","SortableList","_this2","items","onDragEnd","bind","result","destination","startIndex","endIndex","from","_result$splice","removed","slicedToArray","reorder","source","onSort","_this3","react_beautiful_dnd_esm","droppableId","provided","snapshot","innerRef","isDraggingOver","draggableId","draggableProps","dragHandleProps","isDragging","draggableStyle","userSelect","background","modal_SortableItem","placeholder","SettingModal","_this4","saveSettings","_this4$props","_this4$props2","resetLoading","toggle","onOk","columnsOriginal","rawConfigs","setConfig","columnsLeafs","bodyStyle","minHeight","maxHeight","overflow","maskClosable","modal_default","modal_SortableList","Setting","modalRef","useRef","createPortal","setting_modal"],"mappings":"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","file":"static/js/examples-index~examples-playground~examples-props.d43f2a6e.js","sourcesContent":["import React, { useMemo } from \"react\";\r\nimport { getTreeLeafs } from \"./utils\";\r\n\r\nconst Column = ({ cell, depth, columnDepth, headerHeight, dataIndex }) => {\r\n  let h = (columnDepth - depth + 1) * headerHeight;\r\n\r\n  return (\r\n    <div className=\"tablex-head-column\" style={{ height: h }} >\r\n      {cell}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ColumnGroup = ({ title, children, headerHeight }) => {\r\n  return (\r\n    <div className=\"tablex-head-group\" style={{ display: \"block\" }}>\r\n      <div\r\n        style={{\r\n          height: headerHeight,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          borderRight: \"1px solid #eeeeee\"\r\n        }}\r\n      >\r\n        {title}\r\n      </div>\r\n      <div\r\n        style={{\r\n          height: headerHeight,\r\n          display: \"flex\",\r\n          borderTop: \"1px solid #eeeeee\"\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst isForzen = (type = \"\", column) => {\r\n  let bl = false;\r\n\r\n  let leafs = getTreeLeafs([column]);\r\n\r\n  bl = leafs.findIndex(d => d.frozen === type) > -1;\r\n\r\n  return bl;\r\n};\r\n\r\nconst renderChildren = ({\r\n  parent,\r\n  headerHeight,\r\n  columnDepth,\r\n  cells,\r\n  columnList,\r\n  frozen\r\n}) => {\r\n  let columns = parent.children || [];\r\n\r\n  if (frozen === \"right\" || frozen === \"left\") {\r\n    columns = columns.filter(c => isForzen(frozen, c));\r\n  } \r\n\r\n  if (columns.length > 0) {\r\n    return (\r\n      <ColumnGroup\r\n        key={parent.key}\r\n        title={parent.title}\r\n        depth={parent.__depth}\r\n        columnDepth={columnDepth}\r\n        headerHeight={headerHeight}\r\n      >\r\n        {columns.map((d, i) => {\r\n          let childrens = d.children || [];\r\n\r\n          if (childrens.length > 0) {\r\n            return renderChildren({\r\n              parent: d,\r\n              headerHeight,\r\n              columnDepth,\r\n              cells,\r\n              columnList,\r\n              frozen\r\n            });\r\n          } else {\r\n            let cellIndex = columnList.findIndex(c => c.key === d.key);\r\n            let column = columnList[cellIndex] || {};\r\n            if (frozen !== \"left\" && frozen !== \"right\") {\r\n              if (d.frozen === \"left\" || d.frozen === \"right\") {\r\n                if (column.__placeholder__ !== true) {\r\n                }\r\n\r\n                if (d.__parents && d.__parents.length > 0) {\r\n                }\r\n                return null;\r\n              }\r\n            }\r\n\r\n            return (\r\n              <Column\r\n                key={d.dataIndex || i}\r\n                {...d}\r\n                cell={cells[cellIndex]}\r\n                depth={d.__depth}\r\n                columnDepth={columnDepth}\r\n                headerHeight={headerHeight}\r\n              />\r\n            );\r\n          }\r\n        })}\r\n      </ColumnGroup>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst renderColumns = ({\r\n  columns,\r\n  cells,\r\n  columnList,\r\n  columnDepth,\r\n  headerHeight\r\n}) => {\r\n  let frozen = \"\";\r\n  let arr = columnList.filter(d => !d.__placeholder__);\r\n  if (arr[0]) {\r\n    frozen = arr[0].frozen || \"middle\";\r\n  }\r\n\r\n  if (frozen === \"middle\") {\r\n    //console.log(\"renderColumns:\", cells);\r\n  }\r\n\r\n  return columns.map((d, i) => {\r\n    let cellIndex = columnList.findIndex(c => c.key === d.key);\r\n\r\n    let children = d.children || [];\r\n\r\n    if (children.length > 0) {\r\n      return renderChildren({\r\n        parent: d,\r\n        headerHeight,\r\n        columnDepth,\r\n        cells,\r\n        columnList,\r\n        frozen\r\n      });\r\n    } else {\r\n      if (frozen === \"middle\") {\r\n      }\r\n\r\n      if (\r\n        columnList[cellIndex] &&\r\n        columnList[cellIndex].__placeholder__ === true\r\n      ) {\r\n        if (columnList[cellIndex].frozen === \"right\") {\r\n          return null;\r\n        }\r\n\r\n        return cells[cellIndex];\r\n      }\r\n\r\n      return (\r\n        <Column\r\n          key={d.dataIndex || i}\r\n          {...d}\r\n          cell={cells[cellIndex]}\r\n          depth={d.__depth}\r\n          columnDepth={columnDepth}\r\n          headerHeight={headerHeight}\r\n        />\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\nfunction GroupHeader(props) {\r\n  return <React.Fragment>{renderColumns(props)}</React.Fragment>;\r\n}\r\n\r\nconst MemoHeader = ({\r\n  cells = [],\r\n  columns,\r\n  columnList,\r\n  columnDepth,\r\n  headerHeight = 40\r\n}) => {\r\n  const memoizedValue = useMemo(() => {\r\n    return (\r\n      <GroupHeader\r\n        cells={cells}\r\n        columns={columns}\r\n        columnList={columnList}\r\n        columnDepth={columnDepth}\r\n        headerHeight={headerHeight}\r\n      />\r\n    );\r\n  }, [cells]);\r\n\r\n  return memoizedValue;\r\n};\r\n\r\nexport default MemoHeader;\r\n","import React from \"react\";\r\n\r\nfunction ExpandLoading() {\r\n  return (\r\n    <svg\r\n      viewBox=\"0 0 1024 1024\"\r\n      className=\"tablex-loading-icon\"\r\n      data-icon=\"loading\"\r\n      width=\"1em\"\r\n      height=\"1em\"\r\n      fill=\"currentColor\"\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n    >\r\n      <path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nconst ExpandIcon = props => {\r\n  let { loading, expandable, expanded, onExpand, isLeaf, depth } = props;\r\n\r\n  let cls = \"tablex__expandicon\";\r\n\r\n  if (loading === true) {\r\n    return <ExpandLoading style={{ marginLeft: depth * 20 }} />;\r\n  }\r\n\r\n  if (expandable === undefined) {\r\n    return null;\r\n  }\r\n\r\n  if (isLeaf === false) {\r\n    if (expanded === true) {\r\n      cls += \" expanded\";\r\n    } else {\r\n      cls += \" collapsed\";\r\n    }\r\n  } else {\r\n    cls = \"tablex__expandicon--placeholder\";\r\n  }\r\n\r\n  return (\r\n    <span\r\n      className={cls}\r\n      style={{ marginLeft: depth * 20 }}\r\n      onClick={e => {\r\n        e.stopPropagation();\r\n        onExpand(!expanded);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ExpandIcon;\r\n","import React from \"react\";\r\n\r\nconst Checkbox = props => {\r\n    let { indeterminate, onChange, value, checked, disabled } = props;\r\n\r\n    let cls = \"\";\r\n\r\n    if (indeterminate === true) {\r\n        cls = \"tablex__checkbox--indeterminate\";\r\n    }\r\n\r\n    if (checked === true) {\r\n        cls = \"tablex__checkbox--checked\";\r\n    }\r\n\r\n    if (disabled === true) {\r\n        cls = \"tablex__checkbox--disabled\";\r\n    }\r\n\r\n    return (\r\n        <span\r\n            className={\"tablex__checkbox \" + cls}\r\n            onClick={e => {\r\n                e.stopPropagation();\r\n                if (typeof onChange === \"function\" && disabled != true) {\r\n                    onChange(!checked, props.value);\r\n                }\r\n            }}\r\n        >\r\n            <input\r\n                type=\"checkbox\"\r\n                value={value}\r\n                disabled={disabled}\r\n                className=\"tablex__checkbox__input\"\r\n            />\r\n            <span className=\"tablex__checkbox__inner\" />\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default Checkbox;\r\n","import React from \"react\";\r\nimport BaseTable, { AutoResizer, unflatten } from \"react-base-table\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport {\r\n  treeToList,\r\n  removeCheckedKey,\r\n  addCheckedKeyWithDisabled\r\n} from \"./utils\";\r\nimport TableHeader from \"./GroupHeader\";\r\nimport ExpandIcon from \"./ExpandIcon\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport \"./styles.css\";\r\n\r\nclass Table extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      columns: [],\r\n      columnList: [],\r\n      columnDepth: 0,\r\n      data: [],\r\n      flatData: [],\r\n      loadingKeys: [],\r\n      prevProps: null,\r\n      rowHeight: 40,\r\n      selectedRowKeys: [],\r\n      disabledSelectKeys: [],\r\n      halfCheckedKeys: [],\r\n      selectMode: \"\",\r\n      rowKey: \"\",\r\n      orderNumber: false,\r\n      checkStrictly: false,\r\n      striped: true,\r\n      showHeader: true,\r\n      bordered: true,\r\n      rowSelectClassName: \"\",\r\n      expandColumnKey: \"\"\r\n    };\r\n\r\n    if (typeof props.initRef === \"function\") {\r\n      props.initRef(this);\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let {\r\n      rowKey,\r\n      columns,\r\n      loading,\r\n      selectMode,\r\n      disabledSelectKeys,\r\n      orderNumber,\r\n      checkStrictly,\r\n      resizable,\r\n      striped,\r\n      showHeader,\r\n      bordered,\r\n      rowHeight,\r\n      rowSelectClassName,\r\n      expandColumnKey\r\n    } = nextProps;\r\n\r\n    let data = nextProps.data || [];\r\n\r\n    let nextState = null;\r\n\r\n    if (prevState.prevProps !== nextProps) {\r\n      let extraColumns = [];\r\n\r\n      //\r\n      if (selectMode === \"multiple\") {\r\n        extraColumns.unshift({\r\n          key: \"__checkbox_column\",\r\n          dataKey: \"__checkbox_column\",\r\n          __type: \"__checkbox_column\",\r\n          width: 50,\r\n          align: \"center\"\r\n        });\r\n      }\r\n\r\n      if (orderNumber === true) {\r\n        extraColumns.unshift({\r\n          key: \"__ordernumber_column\",\r\n          dataIndex: \"__ordernumber_column\",\r\n          __type: \"__ordernumber_column\",\r\n          width: 50,\r\n          title: \"序号\",\r\n          align: \"center\"\r\n        });\r\n      }\r\n      //\r\n\r\n      let columnsArr = [].concat(extraColumns).concat(columns);\r\n\r\n      let { leafs: columnList, maxDepth: columnDepth, list } = treeToList(\r\n        columnsArr,\r\n        \"key\"\r\n      );\r\n\r\n      let hasFrozenLeft = false;\r\n\r\n      //兼容antd table column的属性\r\n      list.forEach(d => {\r\n        d.frozen = d.fixed;\r\n        d.key = d.key || d.dataIndex;\r\n        d.dataKey = d.dataIndex;\r\n\r\n        if (d.fixed === \"left\") {\r\n          hasFrozenLeft = true;\r\n        }\r\n\r\n        if (!d.hasOwnProperty(\"resizable\")) {\r\n          d.resizable = resizable;\r\n        }\r\n\r\n        if (typeof d.render === \"function\") {\r\n          d.cellRenderer = ({\r\n            cellData,\r\n            columns,\r\n            column,\r\n            columnIndex,\r\n            rowData,\r\n            rowIndex\r\n          }) => {\r\n            let r = d.render(cellData, rowData, rowIndex);\r\n\r\n            if (React.isValidElement(r)) {\r\n              return r;\r\n            }\r\n\r\n            if (r && r.children) {\r\n              if (React.isValidElement(r.children)) {\r\n                return r.children;\r\n              }\r\n            }\r\n            return r;\r\n          };\r\n        }\r\n      });\r\n\r\n      if (hasFrozenLeft === true) {\r\n        extraColumns.forEach(d => {\r\n          d.fixed = \"left\";\r\n          d.frozen = \"left\";\r\n        });\r\n      }\r\n\r\n      //\r\n\r\n      let { list: dataArr } = treeToList(data, rowKey);\r\n\r\n      nextState = {\r\n        rowKey,\r\n        columns: columnsArr,\r\n        columnList: columnList,\r\n        columnDepth: columnDepth,\r\n        data: data,\r\n        flatData: dataArr,\r\n        loading: !!loading,\r\n        selectMode,\r\n        disabledSelectKeys,\r\n        rowKey,\r\n        orderNumber,\r\n        checkStrictly,\r\n        striped,\r\n        showHeader,\r\n        bordered,\r\n        rowHeight,\r\n        rowSelectClassName,\r\n        expandColumnKey\r\n      };\r\n\r\n      if (\"selectedRowKeys\" in nextProps) {\r\n        nextState.selectedRowKeys = nextProps.selectedRowKeys || [];\r\n      }\r\n\r\n      nextState.prevProps = nextProps;\r\n    }\r\n\r\n    return nextState;\r\n  }\r\n\r\n  getScrollbarSize = () => {\r\n    return 6;\r\n  };\r\n\r\n  components = {\r\n    ExpandIcon: ExpandIcon\r\n  };\r\n\r\n  expandIconProps = ({ rowData }) => {\r\n    let rowKey = this.props.rowKey;\r\n    let key = rowData[rowKey];\r\n\r\n    return {\r\n      rowKey: key,\r\n      rowData,\r\n      isLeaf: rowData.children instanceof Array ? false : true,\r\n      loading: this.state.loadingKeys.indexOf(key) > -1\r\n    };\r\n  };\r\n\r\n  /**\r\n   * 行是否正在加载子级\r\n   */\r\n  isLoadingChildren = key => {\r\n    let { loadingKeys } = this.state;\r\n\r\n    return loadingKeys.indexOf(key) > -1;\r\n  };\r\n\r\n  /**\r\n   * 设置行的子级加载状态\r\n   */\r\n  setLoadingChildren = (key, bl, callback) => {\r\n    let { loadingKeys } = this.state;\r\n\r\n    let i = loadingKeys.indexOf(key);\r\n\r\n    let nextKeys = [...loadingKeys];\r\n\r\n    if (bl === true) {\r\n      if (i === -1) {\r\n        nextKeys.push(key);\r\n      }\r\n    } else {\r\n      if (i > -1) {\r\n        nextKeys.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      loadingKeys: nextKeys,\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 异步加载子级数据\r\n   */\r\n  loadChildrenData = (key, row) => {\r\n    let fn = this.props.loadChildrenData;\r\n\r\n    if (typeof fn === \"function\") {\r\n      let res = fn(row);\r\n\r\n      if (res && res.constructor.name === \"Promise\") {\r\n        this.setLoadingChildren(key, true);\r\n\r\n        res.then(childrens => {\r\n          this.setLoadingChildren(key, false);\r\n        });\r\n\r\n        res.catch(e => {\r\n          this.setLoadingChildren(key, false);\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  onRowExpand = ({ expanded, rowData, rowIndex, rowKey }) => {\r\n    if (\r\n      rowData &&\r\n      rowData.children instanceof Array &&\r\n      rowData.children.length > 0\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (expanded === true) {\r\n      this.loadChildrenData(rowKey, rowData);\r\n    }\r\n  };\r\n\r\n  headerRenderer = ({ cells, columns, headerIndex }) => {\r\n    return (\r\n      <TableHeader\r\n        cells={cells}\r\n        columns={this.state.columns}\r\n        columnList={columns}\r\n        columnDepth={this.state.columnDepth}\r\n        headerIndex={headerIndex}\r\n        headerHeight={this.state.rowHeight}\r\n      />\r\n    );\r\n  };\r\n\r\n  onScroll = ({ scrollLeft, horizontalScrollDirection }) => {};\r\n\r\n  /** 通过rowKey获取数据行 */\r\n  getRowsByKeys = (keys = []) => {\r\n    let rows = [];\r\n    let { rowKey, flatData: arr } = this.state;\r\n\r\n    keys.forEach(k => {\r\n      let row = arr.find(r => r[rowKey] === k);\r\n      if (row != null) {\r\n        rows.push(Object.assign({}, row));\r\n      }\r\n    });\r\n\r\n    return rows;\r\n  };\r\n\r\n  /** 是否为单选 */\r\n  isSingleSelect = () => {\r\n    return this.state.selectMode === \"single\";\r\n  };\r\n\r\n  /** 是否为多选 */\r\n  isMultipleSelect = () => {\r\n    return this.state.selectMode === \"multiple\";\r\n  };\r\n\r\n  /** 当前行是否被禁用选择 */\r\n  isDisabledSelect = key => {\r\n    let bl = this.state.disabledSelectKeys.findIndex(d => d === key) > -1;\r\n    return bl;\r\n  };\r\n\r\n  /** 是否为自动添加的扩展列 */\r\n  isExtraColumn = (type = \"\") => {\r\n    return [\"__checkbox_column\", \"__ordernumber_column\"].indexOf(type) > -1;\r\n  };\r\n\r\n  onSelectChange = rowKey => {\r\n    let { selectedRowKeys } = this.state;\r\n    let i = selectedRowKeys.indexOf(rowKey);\r\n    let nextKeys = [].concat(selectedRowKeys);\r\n\r\n    if (this.isDisabledSelect(rowKey)) {\r\n      return;\r\n    }\r\n\r\n    if (this.isSingleSelect()) {\r\n      if (i > -1) {\r\n        nextKeys = [];\r\n      } else {\r\n        nextKeys = [rowKey];\r\n      }\r\n    } else if (this.isMultipleSelect()) {\r\n      if (i > -1) {\r\n        nextKeys.splice(i, 1);\r\n      } else {\r\n        nextKeys.push(rowKey);\r\n      }\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextKeys, this.getRowsByKeys(nextKeys), rowKey);\r\n    }\r\n\r\n    this.setState({ selectedRowKeys: nextKeys });\r\n  };\r\n\r\n  rowEventHandlers = {\r\n    onClick: ({ rowData, rowIndex, rowKey, event }) => {\r\n      let o = this.props.rowEventHandlers || {};\r\n\r\n      if (this.isSingleSelect()) {\r\n        this.onSelectChange(rowKey);\r\n      }\r\n\r\n      if (this.isMultipleSelect()) {\r\n        let { selectedRowKeys } = this.state;\r\n        let isSelected = selectedRowKeys.indexOf(rowKey) > -1;\r\n        let isEnabled = !this.isDisabledCheck(rowKey, rowData);\r\n        isEnabled && this.onCheckChange(!isSelected, rowKey);\r\n      }\r\n\r\n      if (typeof o.onClick === \"function\") {\r\n        o.onClick({ rowData, rowIndex, rowKey, event });\r\n      }\r\n    }\r\n  };\r\n\r\n  onCheckChange = (bl, value) => {\r\n    if (this.state.checkStrictly === false) {\r\n      this.onSelectChange(value);\r\n    } else {\r\n      if (bl === true) {\r\n        this.addChecked(value);\r\n      } else {\r\n        this.removeChecked(value);\r\n      }\r\n    }\r\n  };\r\n\r\n  /** 添加复选行 */\r\n  addChecked(key) {\r\n    let {\r\n      selectedRowKeys,\r\n      rowKey,\r\n      flatData,\r\n      halfCheckedKeys,\r\n      disabledSelectKeys\r\n    } = this.state;\r\n\r\n    let {\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys\r\n    } = addCheckedKeyWithDisabled({\r\n      key,\r\n      selectedRowKeys,\r\n      rowKey,\r\n      flatData,\r\n      halfCheckedKeys,\r\n      disabledSelectKeys\r\n    });\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextKeys, this.getRowsByKeys(nextKeys), rowKey);\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys,\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  }\r\n\r\n  /** 移除复选行 */\r\n  removeChecked(key) {\r\n    let { selectedRowKeys, rowKey, flatData, halfCheckedKeys } = this.state;\r\n\r\n    let {\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys\r\n    } = removeCheckedKey({\r\n      key,\r\n      selectedRowKeys,\r\n      rowKey,\r\n      flatData,\r\n      halfCheckedKeys\r\n    });\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextKeys, this.getRowsByKeys(nextKeys), rowKey);\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys,\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  }\r\n\r\n  onCheckAllChange = bl => {\r\n    if (bl === true) {\r\n      this.addAllChecked();\r\n    } else {\r\n      this.removeAllChecked();\r\n    }\r\n  };\r\n\r\n  addAllChecked = () => {\r\n    let { rowKey, flatData } = this.state;\r\n    let nextSelected = [];\r\n    let arr = [];\r\n\r\n    flatData.forEach(d => {\r\n      let k = d[rowKey];\r\n\r\n      let bl = !this.isDisabledCheck(k, d);\r\n\r\n      if (bl) {\r\n        nextSelected.push(k);\r\n        arr.push(d);\r\n      }\r\n    });\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextSelected, arr, \"\");\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: nextSelected,\r\n      halfCheckedKeys: [],\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  };\r\n\r\n  removeAllChecked = () => {\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange([], [], \"\");\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: [],\r\n      halfCheckedKeys: [],\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  };\r\n\r\n  /** 判断行/行父级是否被禁用选中 */\r\n  isDisabledCheck = (key, rowData) => {\r\n    let arr = this.state.disabledSelectKeys;\r\n    let bl = arr.indexOf(key) > -1;\r\n\r\n    if (bl === false) {\r\n      let parentKeys = rowData.__parents || [];\r\n\r\n      for (let i = 0; i < parentKeys.length; i++) {\r\n        const p = parentKeys[i];\r\n        if (arr.indexOf(p) > -1) {\r\n          bl = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return bl;\r\n  };\r\n\r\n  checkboxCellRender = ({ rowData }) => {\r\n    let { rowKey, selectedRowKeys, halfCheckedKeys } = this.state;\r\n    let key = rowData[rowKey];\r\n\r\n    let attr = {};\r\n\r\n    if (selectedRowKeys.indexOf(key) > -1) {\r\n      attr.checked = true;\r\n    }\r\n\r\n    if (halfCheckedKeys.indexOf(key) > -1) {\r\n      attr.indeterminate = true;\r\n    }\r\n\r\n    if (this.isDisabledCheck(key, rowData)) {\r\n      attr.disabled = true;\r\n    }\r\n\r\n    return (\r\n      <Checkbox\r\n        rowData={rowData}\r\n        value={key}\r\n        onChange={this.onCheckChange}\r\n        {...attr}\r\n      />\r\n    );\r\n  };\r\n\r\n  checkboxHeadRender = ({ rowData }) => {\r\n    let { selectedRowKeys, halfCheckedKeys, flatData, rowKey } = this.state;\r\n\r\n    let isCheckedAll = true;\r\n\r\n    for (let i = 0; i < flatData.length; i++) {\r\n      const key = flatData[i][rowKey];\r\n\r\n      if (this.isDisabledCheck(key, flatData[i])) {\r\n        continue;\r\n      }\r\n\r\n      if (selectedRowKeys.indexOf(key) === -1) {\r\n        isCheckedAll = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    let attr = {};\r\n\r\n    if (isCheckedAll === true) {\r\n      attr.checked = true;\r\n    } else {\r\n      if (selectedRowKeys.length > 0 || halfCheckedKeys.length > 0) {\r\n        attr.indeterminate = true;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Checkbox rowData={rowData} {...attr} onChange={this.onCheckAllChange} />\r\n    );\r\n  };\r\n\r\n  orderNumberCellRender = ({ rowIndex }) => {\r\n    return <span>{rowIndex + 1}</span>;\r\n  };\r\n\r\n  rowClassName = ({ rowData, rowIndex }) => {\r\n    let { rowKey, selectedRowKeys, rowSelectClassName } = this.state;\r\n    let key = rowData[rowKey];\r\n    let isSelected = false;\r\n\r\n    if (selectedRowKeys.indexOf(key) > -1) {\r\n      isSelected = true;\r\n    }\r\n\r\n    let cls = [];\r\n\r\n    if (rowIndex % 2 === 0) {\r\n      cls.push(\"tablex__row--even\");\r\n    } else {\r\n      cls.push(\"tablex__row--odd\");\r\n    }\r\n\r\n    if (isSelected) {\r\n      cls.push(rowSelectClassName);\r\n    }\r\n\r\n    let tempCls = \"\";\r\n    if (typeof this.props.rowClassName === \"function\") {\r\n      tempCls = this.props.rowClassName(record, index);\r\n    }\r\n\r\n    tempCls && cls.push(tempCls);\r\n\r\n    return cls.join(\" \");\r\n  };\r\n\r\n  tableApi = {\r\n    getSelectedKeys: () => {\r\n      return this.state.selectedRowKeys;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let props = this.props;\r\n\r\n    let expandColumnKey = this.props.expandColumnKey;\r\n\r\n    if (!expandColumnKey && this.props.columns.length > 0) {\r\n      expandColumnKey = this.props.columns[0].dataKey;\r\n    }\r\n\r\n    let {\r\n      columnDepth,\r\n      columnList,\r\n      data,\r\n      rowHeight,\r\n      striped,\r\n      showHeader,\r\n      bordered\r\n    } = this.state;\r\n\r\n    let checkboxColumn = columnList.find(d => d.__type === \"__checkbox_column\");\r\n    let orderNumberColumn = columnList.find(\r\n      d => d.__type === \"__ordernumber_column\"\r\n    );\r\n\r\n    if (checkboxColumn) {\r\n      checkboxColumn.cellRenderer = this.checkboxCellRender;\r\n      checkboxColumn.headerRenderer = this.checkboxHeadRender;\r\n    }\r\n\r\n    if (orderNumberColumn) {\r\n      orderNumberColumn.cellRenderer = this.orderNumberCellRender;\r\n    }\r\n\r\n    let cls = [];\r\n\r\n    if (striped === true) {\r\n      cls.push(\"tablex__striped\");\r\n    }\r\n\r\n    if (bordered === true) {\r\n      cls.push(\"tablex__bordered\");\r\n    }\r\n\r\n    let headerHeight = (columnDepth + 1) * rowHeight;\r\n\r\n    let attrs = {\r\n      fixed: true,\r\n      data: data,\r\n      columns: columnList,\r\n      expandColumnKey: expandColumnKey,\r\n      className: cls.join(\" \"),\r\n      classPrefix: \"tablex\",\r\n      getScrollbarSize: this.getScrollbarSize,\r\n      expandIconProps: this.expandIconProps,\r\n      components: this.components,\r\n      onRowExpand: this.onRowExpand,\r\n      rowHeight: rowHeight,\r\n      headerHeight: [headerHeight],\r\n      headerRenderer: this.headerRenderer,\r\n      onScroll: this.onScroll,\r\n      rowEventHandlers: this.rowEventHandlers,\r\n      rowClassName: this.rowClassName,\r\n      overscanRowCount: 2\r\n    };\r\n\r\n    if (!showHeader) {\r\n      attrs.headerHeight = [0];\r\n      attrs.headerRenderer = null;\r\n    }\r\n\r\n    if (columnList.length === 1) {\r\n      columnList[0].flexShrink = 1;\r\n      columnList[0].flexGrow = 1;\r\n\r\n      attrs.fixed = false;\r\n    }\r\n\r\n    return <BaseTable {...props} {...attrs} />;\r\n  }\r\n}\r\n\r\nconst AutoResizeTable = props => {\r\n  return (\r\n    <AutoResizer>\r\n      {({ width, height }) => (\r\n        <Table {...props} width={width} height={height} />\r\n      )}\r\n    </AutoResizer>\r\n  );\r\n};\r\n\r\nexport default AutoResizeTable;\r\n","import React from \"react\";\r\nimport BaseTable from \"./BaseTable\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * 表格组件\r\n */\r\nconst Table = props => {\r\n  return <BaseTable {...props} />;\r\n};\r\n\r\nTable.defaultProps = {\r\n  rowKey: \"key\",\r\n  columns: [],\r\n  dataSource: [],\r\n  selectMode: \"single\",\r\n  disabledSelectKeys: [],\r\n  orderNumber: false,\r\n  checkStrictly: true,\r\n  resizable: true,\r\n  showHeader: true,\r\n  striped: true,\r\n  bordered: true,\r\n  rowHeight: 40,\r\n  rowSelectClassName: \"tablex__row--selected\",\r\n  expandColumnKey: \"\"\r\n};\r\n\r\nTable.propTypes = {\r\n  /** 数据行主键字段 */\r\n  rowKey: PropTypes.string.isRequired,\r\n  /** 列 */\r\n  columns: PropTypes.array.isRequired,\r\n  /** 行数据源 */\r\n  dataSource: PropTypes.array,\r\n\r\n  /** table实例回调\r\n   * (ins:React.Element) => void\r\n   */\r\n  initRef: PropTypes.func,\r\n\r\n  /** 是否显示边框 */\r\n  bordered: PropTypes.bool,\r\n\r\n  /** 奇偶行颜色间隔 */\r\n  striped: PropTypes.bool,\r\n  /** 是否显示表头 */\r\n  showHeader: PropTypes.bool,\r\n\r\n  /** 行高 */\r\n  rowHeight: PropTypes.number,\r\n\r\n  /** 行选中时的样式类名 */\r\n  rowSelectClassName: PropTypes.string,\r\n\r\n  /**\r\n   * 行事件对象\r\n   *  {onClick:({ rowData, rowIndex, rowKey, event })=>{},...}\r\n   * */\r\n  rowEventHandlers: PropTypes.object,\r\n\r\n  /** 选择模式：多选 单选 不可选择 */\r\n  selectMode: PropTypes.oneOf([\"multiple\", \"single\", \"none\"]),\r\n  /** 选中的行键值 */\r\n  selectedRowKeys: PropTypes.array,\r\n  /** 将被禁用选中的行key */\r\n  disabledSelectKeys: PropTypes.array,\r\n  /**\r\n   * 行选择事件\r\n   *  (selectedKeys,selectedRows,triggerKey) => void\r\n   * */\r\n  onSelectChange: PropTypes.func,\r\n  /** 是否显示序号列 */\r\n  orderNumber: PropTypes.bool,\r\n  /** 列是否可设置宽度，优先级小于column.resizable */\r\n  resizable: PropTypes.bool,\r\n  /** 多选模式是否级联控制checkbox选中状态 */\r\n  checkStrictly: PropTypes.bool,\r\n\r\n  /** 展开按钮所在的列 */\r\n  expandColumnKey: PropTypes.string,\r\n\r\n  /** 展开的行键值 */\r\n  expandedRowKeys: PropTypes.array,\r\n  /**\r\n   * 行展开事件\r\n   * (expandedRowKeys:Array) => void\r\n   * */\r\n  onExpandedRowsChange: PropTypes.func,\r\n\r\n  /**\r\n   * 展开时加载children的方法\r\n   * (row:object) => Promise\r\n   * */\r\n  loadChildrenData: PropTypes.func\r\n};\r\n\r\nexport default Table;\r\n","export function treeToList(arr, idField = \"id\") {\r\n  let treeList = arr || [];\r\n\r\n  //末级节点\r\n  let leafs = [];\r\n\r\n  //根\r\n  let roots = [];\r\n\r\n  //所有节点\r\n  let list = [];\r\n\r\n  let maxDepth = 0;\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n\r\n    const childrens = d.children || [];\r\n\r\n    d.__depth = 0;\r\n\r\n    list.push(d);\r\n    roots.push(d);\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d, 0, []);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(item, depth, parents) {\r\n    const tempArr = item.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      d.__depth = depth + 1;\r\n      d.__parent = {\r\n        title: item.title,\r\n        key: item[idField],\r\n        width: item.width\r\n      };\r\n\r\n      d.__parents = [].concat(parents).concat([item[idField]]);\r\n\r\n      list.push(d);\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d, d.__depth, [].concat(d.__parents));\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (leafs.length > 0) {\r\n    let sortedArr = [].concat(leafs);\r\n    sortedArr.sort((a, b) => b.__depth - a.__depth);\r\n    maxDepth = sortedArr[0].__depth;\r\n  }\r\n\r\n  return { list, leafs, roots, maxDepth };\r\n}\r\n\r\nexport function treeToFlatten(arr) {\r\n  let treeList = arr || [];\r\n\r\n  //末级节点\r\n  let leafs = [];\r\n  //根\r\n  let roots = [];\r\n\r\n  //所有节点\r\n  let list = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n    const childrens = d.children || [];\r\n\r\n    list.push(d);\r\n    roots.push(d);\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d, 0);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(item, depth) {\r\n    const tempArr = item.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      list.push(d);\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d, depth + 1);\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return { list, leafs, roots };\r\n}\r\n\r\n\r\nexport function listToTree(arr = [], idField, pidField) {\r\n\r\n  let tree = [];\r\n\r\n  function getChildren(item) {\r\n\r\n      let id = item[idField];\r\n\r\n      let childrens = arr.filter(y => y[pidField] === id);\r\n\r\n      for (let i = 0; i < childrens.length; i++) {\r\n\r\n          let d = childrens[i];\r\n          const nextId = d[idField];\r\n\r\n          const nextChildrens = arr.filter(y => y[pidField] === nextId);\r\n\r\n          if (nextChildrens.length > 0) {\r\n              d.children = getChildren(d);\r\n          }\r\n\r\n      }\r\n\r\n      return childrens;\r\n\r\n  }\r\n\r\n  let roots = arr.filter(d => !d[pidField]);\r\n\r\n\r\n  for (let i = 0, len = roots.length; i < len; i++) {\r\n\r\n      let d = Object.assign({}, roots[i]);\r\n\r\n      d.children = getChildren(d);\r\n\r\n      tree.push(d)\r\n  }\r\n\r\n  return tree;\r\n}\r\n\r\n\r\n\r\nexport function getTreeLeafs(arr) {\r\n  let treeList = arr || [];\r\n  //末级节点\r\n  let leafs = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n\r\n    const childrens = d.children || [];\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d, 0);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(item, depth) {\r\n    const tempArr = item.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d, depth + 1);\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return leafs;\r\n}\r\n\r\nexport function getDataListWithExpanded(list, expandedKeys = [], rowKey) {\r\n  let arr = [];\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let d = list[i];\r\n\r\n    d.__depth = 0;\r\n\r\n    arr.push(d);\r\n\r\n    if (expandedKeys.indexOf(d[rowKey]) > -1) {\r\n      if (d.children) {\r\n        setChildren(d, 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  function setChildren(c, depth) {\r\n    let cArr = c.children;\r\n    for (let i = 0; i < cArr.length; i++) {\r\n      let d = cArr[i];\r\n      d.__depth = depth + 1;\r\n      arr.push(d);\r\n\r\n      if (expandedKeys.indexOf(d[rowKey]) > -1) {\r\n        if (d.children) {\r\n          setChildren(d, depth + 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return arr;\r\n}\r\n\r\nexport function treeFilter(arr, fn) {\r\n  let treeList = arr || [];\r\n\r\n  //根\r\n  let roots = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    let bl = fn(d, i);\r\n\r\n    if (bl === true) {\r\n      if (d.children && d.children.length > 0) {\r\n        d.children = getChildren(d);\r\n      }\r\n\r\n      roots.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(node) {\r\n    const tempArr = node.children || [];\r\n\r\n    const nextChildrens = [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n\r\n      let bl = fn(d, i);\r\n\r\n      if (bl === true) {\r\n        if (d.children && d.children.length > 0) {\r\n          d.children = getChildren(d);\r\n        }\r\n\r\n        nextChildrens.push(d);\r\n      }\r\n    }\r\n\r\n    return nextChildrens;\r\n  }\r\n\r\n  return roots;\r\n}\r\n\r\nexport function getScrollbarWidth() {\r\n  var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\r\n\r\n  if (userAgent.indexOf(\"Chrome\") > -1) {\r\n    return 6;\r\n  }\r\n\r\n  var oP = document.createElement(\"p\"),\r\n    styles = {\r\n      width: \"100px\",\r\n      height: \"100px\",\r\n      overflowY: \"scroll\"\r\n    },\r\n    i,\r\n    scrollbarWidth;\r\n\r\n  for (i in styles) {\r\n    oP.style[i] = styles[i];\r\n  }\r\n  document.body.appendChild(oP);\r\n  scrollbarWidth = oP.offsetWidth - oP.clientWidth;\r\n  oP.remove();\r\n\r\n  return scrollbarWidth;\r\n}\r\n\r\n/**\r\n * 添加选中行\r\n * @key {Array} 行key\r\n * @selectedRowKeys {Array} 当前选中的行key\r\n * @rowKey {string} 数据行主键key字段名\r\n * @flatData {Array} 展平的表格数据\r\n * @halfCheckedKeys {Array} 当前半选状态的行key\r\n */\r\nexport function addCheckedKey({\r\n  key,\r\n  selectedRowKeys,\r\n  rowKey,\r\n  flatData,\r\n  halfCheckedKeys\r\n}) {\r\n  let nextKeys = [].concat(selectedRowKeys);\r\n  let nextHalfCheckedKeys = [].concat(halfCheckedKeys);\r\n  let row = flatData.find(d => d[rowKey] === key);\r\n  let parentKeys = [].concat(row.__parents || []);\r\n\r\n  if (selectedRowKeys.indexOf(key) === -1) {\r\n    let halfIndex = nextHalfCheckedKeys.indexOf(key);\r\n    if (halfIndex > -1) {\r\n      nextHalfCheckedKeys.splice(halfIndex, 1);\r\n    }\r\n    nextKeys.push(key);\r\n  }\r\n\r\n  //父级半选的key\r\n  let parentHalfCheckedKeys = [];\r\n\r\n  //子级key\r\n  let childrenSelectedKeys = [];\r\n\r\n  flatData.filter(d => {\r\n    let pArr = d.__parents || [];\r\n    let bl = pArr.indexOf(key) > -1;\r\n    let ck = d[rowKey];\r\n    if (bl) {\r\n      if (selectedRowKeys.indexOf(ck) === -1) {\r\n        childrenSelectedKeys.push(ck);\r\n      }\r\n    }\r\n    return bl;\r\n  });\r\n\r\n  nextKeys = nextKeys.concat(childrenSelectedKeys);\r\n\r\n  for (let i = parentKeys.length - 1; i >= 0; i--) {\r\n    let p = parentKeys[i];\r\n\r\n    let pNode = flatData.find(d => {\r\n      return d[rowKey] === p;\r\n    });\r\n\r\n    let childrens = [];\r\n    if (pNode) {\r\n      childrens = pNode.children || [];\r\n    }\r\n\r\n    //子级是否全被选中\r\n    let childrensAllChecked = true;\r\n\r\n    for (let i = 0; i < childrens.length; i++) {\r\n      const cKey = childrens[i][rowKey];\r\n      if (nextKeys.indexOf(cKey) === -1) {\r\n        childrensAllChecked = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    //子级全被选中，则勾选其父节点\r\n    if (childrensAllChecked === true) {\r\n      if (nextKeys.indexOf(p) === -1) {\r\n        nextKeys.push(p);\r\n      }\r\n\r\n      //取消半选中父级\r\n      let k = nextHalfCheckedKeys.findIndex(d => d === p);\r\n      if (k > -1) {\r\n        nextHalfCheckedKeys.splice(k, 1);\r\n      }\r\n    } else {\r\n      //未全选，则半选父节点\r\n      if (halfCheckedKeys.indexOf(p) === -1) {\r\n        parentHalfCheckedKeys.push(p);\r\n\r\n        //取消选中父级\r\n        let j = nextKeys.findIndex(d => d === p);\r\n        if (j > -1) {\r\n          nextKeys.splice(j, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let newHalflCheckedKeys = nextHalfCheckedKeys.concat(parentHalfCheckedKeys);\r\n\r\n  return {\r\n    selectedRowKeys: nextKeys,\r\n    halfCheckedKeys: newHalflCheckedKeys\r\n  };\r\n}\r\n\r\nexport function removeCheckedKey({\r\n  key,\r\n  selectedRowKeys,\r\n  rowKey,\r\n  flatData,\r\n  halfCheckedKeys\r\n}) {\r\n  let nextKeys = [].concat(selectedRowKeys);\r\n  let nextHalfCheckedKeys = [].concat(halfCheckedKeys);\r\n\r\n  let row = flatData.find(d => d[rowKey] === key);\r\n\r\n  let parentKeys = [].concat(row.__parents || []);\r\n\r\n  //父级半选的key\r\n  let parentHalfCheckedKeys = [];\r\n\r\n  //子级key\r\n  let childrenKeys = [];\r\n\r\n  flatData.filter(d => {\r\n    let pArr = d.__parents || [];\r\n    let bl = pArr.indexOf(key) > -1;\r\n    if (bl) {\r\n      childrenKeys.push(d[rowKey]);\r\n    }\r\n    return bl;\r\n  });\r\n\r\n  //移除子级\r\n  if (childrenKeys.length > 0) {\r\n    for (let i = 0; i < childrenKeys.length; i++) {\r\n      const k = childrenKeys[i];\r\n\r\n      //移除选中\r\n      let j = nextKeys.findIndex(d => d === k);\r\n      if (j > -1) {\r\n        nextKeys.splice(j, 1);\r\n      }\r\n\r\n      //移除半选\r\n      let m = nextHalfCheckedKeys.findIndex(d => d === k);\r\n      if (m > -1) {\r\n        nextHalfCheckedKeys.splice(m, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  //移除本级选中\r\n  let i = nextKeys.findIndex(d => d === key);\r\n  if (i > -1) {\r\n    nextKeys.splice(i, 1);\r\n  }\r\n\r\n  //移除本级半选\r\n  let j = nextHalfCheckedKeys.findIndex(d => d === key);\r\n  if (j > -1) {\r\n    nextHalfCheckedKeys.splice(j, 1);\r\n  }\r\n\r\n  for (let i = parentKeys.length - 1; i >= 0; i--) {\r\n    let p = parentKeys[i];\r\n    let childrens = flatData.filter(d => {\r\n      return (d.__parents || []).indexOf(p) > -1;\r\n    });\r\n\r\n    //子级是否全未选中\r\n    let childrensAllUnChecked = true;\r\n\r\n    for (let i = 0; i < childrens.length; i++) {\r\n      const cKey = childrens[i][rowKey];\r\n      if (nextKeys.indexOf(cKey) > -1) {\r\n        childrensAllUnChecked = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    //子级全未选中，则取消勾选其父节点\r\n    if (childrensAllUnChecked === true) {\r\n      //取消选中父级\r\n      let j = nextKeys.findIndex(d => d === p);\r\n      if (j > -1) {\r\n        nextKeys.splice(j, 1);\r\n      }\r\n\r\n      //取消半选父级\r\n      let k = nextHalfCheckedKeys.findIndex(d => d === p);\r\n      if (k > -1) {\r\n        nextHalfCheckedKeys.splice(k, 1);\r\n      }\r\n    } else {\r\n      //否则半选父节点\r\n      if (halfCheckedKeys.indexOf(p) === -1) {\r\n        parentHalfCheckedKeys.push(p);\r\n\r\n        //取消选中父级\r\n        let j = nextKeys.findIndex(d => d === p);\r\n        if (j > -1) {\r\n          nextKeys.splice(j, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let newHalflCheckedKeys = nextHalfCheckedKeys.concat(parentHalfCheckedKeys);\r\n\r\n  return {\r\n    selectedRowKeys: nextKeys,\r\n    halfCheckedKeys: newHalflCheckedKeys\r\n  };\r\n}\r\n\r\n/**\r\n * 添加选中行\r\n * @key {Array} 行key\r\n * @selectedRowKeys {Array} 当前选中的行key\r\n * @rowKey {string} 数据行主键key字段名\r\n * @flatData {Array} 展平的表格数据\r\n * @halfCheckedKeys {Array} 当前半选状态的行key\r\n * @disabledSelectKeys {Array} 禁用选择的数据行key\r\n */\r\nexport function addCheckedKeyWithDisabled({\r\n  key,\r\n  selectedRowKeys,\r\n  rowKey,\r\n  flatData,\r\n  halfCheckedKeys,\r\n  disabledSelectKeys = []\r\n}) {\r\n  let nextKeys = [].concat(selectedRowKeys);\r\n  let nextHalfCheckedKeys = [].concat(halfCheckedKeys);\r\n  let row = flatData.find(d => d[rowKey] === key);\r\n  let parentKeys = [].concat(row.__parents || []);\r\n\r\n  /** 是否允许被选择 */\r\n  function isEnabled(itemKey) {\r\n    return disabledSelectKeys.indexOf(itemKey) === -1;\r\n  }\r\n\r\n  //本级是否允许选择\r\n  if (isEnabled(key) === false) {\r\n    return {\r\n      selectedRowKeys,\r\n      halfCheckedKeys\r\n    };\r\n  }\r\n\r\n  //父级是否允许选择\r\n  let parentEnableSelect = true;\r\n  for (let i = 0; i < parentKeys.length; i++) {\r\n    const pk = parentKeys[i];\r\n    if (isEnabled(pk) === false) {\r\n      parentEnableSelect = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (parentEnableSelect === false) {\r\n    return {\r\n      selectedRowKeys,\r\n      halfCheckedKeys\r\n    };\r\n  }\r\n\r\n  if (selectedRowKeys.indexOf(key) === -1) {\r\n    let halfIndex = nextHalfCheckedKeys.indexOf(key);\r\n    if (halfIndex > -1) {\r\n      nextHalfCheckedKeys.splice(halfIndex, 1);\r\n    }\r\n\r\n    nextKeys.push(key);\r\n  }\r\n\r\n  //父级半选的key\r\n  let parentHalfCheckedKeys = [];\r\n\r\n  //子级key\r\n  let childrenSelectedKeys = [];\r\n\r\n  flatData.filter(d => {\r\n    let pArr = d.__parents || [];\r\n    let bl = pArr.indexOf(key) > -1;\r\n    let ck = d[rowKey];\r\n    if (bl) {\r\n      if (selectedRowKeys.indexOf(ck) === -1) {\r\n        //子级是否允许被选择\r\n        let isEnableSelect = isEnabled(ck);\r\n\r\n        for (let i = 0; i < pArr.length; i++) {\r\n          const cpk = pArr[i];\r\n          if (isEnabled(cpk) === false) {\r\n            isEnableSelect = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        isEnableSelect && childrenSelectedKeys.push(ck);\r\n      }\r\n    }\r\n    return bl;\r\n  });\r\n\r\n  nextKeys = nextKeys.concat(childrenSelectedKeys);\r\n\r\n  for (let i = parentKeys.length - 1; i >= 0; i--) {\r\n    let p = parentKeys[i];\r\n\r\n    let pNode = flatData.find(d => {\r\n      return d[rowKey] === p;\r\n    });\r\n\r\n    let childrens = [];\r\n    if (pNode) {\r\n      childrens = pNode.children || [];\r\n    }\r\n\r\n    //子级是否全被选中\r\n    let childrensAllChecked = true;\r\n\r\n    for (let i = 0; i < childrens.length; i++) {\r\n      const cKey = childrens[i][rowKey];\r\n      if (isEnabled(cKey) && nextKeys.indexOf(cKey) === -1) {\r\n        childrensAllChecked = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    //子级全被选中，则勾选其父节点\r\n    if (childrensAllChecked === true) {\r\n      if (nextKeys.indexOf(p) === -1) {\r\n        isEnabled(p) && nextKeys.push(p);\r\n      }\r\n\r\n      //取消半选中父级\r\n      let k = nextHalfCheckedKeys.findIndex(d => d === p);\r\n      if (k > -1) {\r\n        nextHalfCheckedKeys.splice(k, 1);\r\n      }\r\n    } else {\r\n      //未全选，则半选父节点\r\n      if (halfCheckedKeys.indexOf(p) === -1) {\r\n        isEnabled(p) && parentHalfCheckedKeys.push(p);\r\n\r\n        //取消选中父级\r\n        let j = nextKeys.findIndex(d => d === p);\r\n        if (j > -1) {\r\n          nextKeys.splice(j, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let newHalflCheckedKeys = nextHalfCheckedKeys.concat(parentHalfCheckedKeys);\r\n\r\n  return {\r\n    selectedRowKeys: nextKeys,\r\n    halfCheckedKeys: newHalflCheckedKeys\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport Menu from \"antd/lib/menu\";\r\nimport Checkbox from \"antd/lib/checkbox\";\r\n\r\nconst SubMenu = Menu.SubMenu;\r\n\r\nclass HeadDropMenu extends React.Component {\r\n  onChange = (columnKey, config) => {\r\n    if (typeof this.props.onChange === \"function\") {\r\n      this.props.onChange(columnKey, config);\r\n    } else {\r\n    }\r\n  };\r\n\r\n  onFilterColumnChange = (checked, key) => {\r\n    this.onChange(key, {\r\n      hidden: !checked\r\n    });\r\n  };\r\n\r\n  columnsFilter = () => {\r\n    let { columns: arr, columnsConfig } = this.props;\r\n    \r\n    let columns = arr; //.filter(d => !!d.title)\r\n\r\n    const columnsOptions = [];\r\n    let defaultChecked = [];\r\n\r\n    columns.forEach((c, i) => {\r\n      let columnKey = c.key || c.dataIndex;\r\n\r\n      let isHide = false;\r\n\r\n      let config = (columnsConfig || {})[columnKey] || {};\r\n\r\n\r\n      isHide = !!config.hidden;\r\n\r\n      if (isHide === false) {\r\n        defaultChecked.push(columnKey);\r\n      }\r\n\r\n      columnsOptions.push(\r\n        <div key={i} style={{ display: \"block\" }}>\r\n          <Checkbox\r\n            checked={!isHide}\r\n            value={columnKey}\r\n            onChange={e => {\r\n              this.onFilterColumnChange(e.target.checked, columnKey);\r\n            }}\r\n          >\r\n            {c.title}\r\n          </Checkbox>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    const columnsFilterItems = (\r\n      <div style={{ marginLeft: 10 }}>{columnsOptions}</div>\r\n    );\r\n\r\n    return columnsFilterItems;\r\n  };\r\n\r\n  handleClick = ({ item, key, keyPath, domEvent }) => {\r\n    let { columnKey } = this.props;\r\n\r\n    let config = {\r\n      1: {\r\n        fixed: \"left\"\r\n      },\r\n      2: {\r\n        fixed: \"right\"\r\n      },\r\n      3: {\r\n        fixed: false\r\n      },\r\n      6: {\r\n        grouped: true\r\n      },\r\n      7: {\r\n        grouped: false\r\n      }\r\n    }[key];\r\n\r\n    config && this.onChange(columnKey, config);\r\n\r\n    domEvent.stopPropagation();\r\n  };\r\n\r\n  onTitleClick({ key, domEvent }) {\r\n    domEvent.stopPropagation();\r\n  }\r\n\r\n  render() {\r\n    let styles = { height: \"auto\", lineHeight: \"normal\", padding: \"0px 10px\" };\r\n\r\n    let { pinable, filterable, groupable } = this.props.options;\r\n\r\n    return (\r\n      <div className=\"tablex__column__dropMenu\">\r\n        <Menu\r\n          forceSubMenuRender={false}\r\n          onClick={this.handleClick}\r\n          style={{ width: 160 }}\r\n          mode=\"vertical\"\r\n        >\r\n          {pinable && (\r\n            <SubMenu key=\"sub1\" title=\"列冻结\" onTitleClick={this.onTitleClick}>\r\n              <Menu.Item key=\"1\" style={styles}>\r\n                左侧\r\n              </Menu.Item>\r\n              <Menu.Item key=\"2\" style={styles}>\r\n                右侧\r\n              </Menu.Item>\r\n              <Menu.Item key=\"3\" style={styles}>\r\n                取消冻结\r\n              </Menu.Item>\r\n            </SubMenu>\r\n          )}\r\n          {filterable && (\r\n            <SubMenu\r\n              key=\"sub2\"\r\n              title=\"显示/隐藏\"\r\n              onTitleClick={this.onTitleClick}\r\n            >\r\n              <Menu.Item key=\"4\" style={styles}>\r\n                {this.columnsFilter()}\r\n              </Menu.Item>\r\n            </SubMenu>\r\n          )}\r\n          {groupable && (\r\n            <SubMenu key=\"sub3\" title=\"列分组\" onTitleClick={this.onTitleClick}>\r\n              <Menu.Item key=\"6\" style={styles}>\r\n                按此列分组\r\n              </Menu.Item>\r\n              <Menu.Item key=\"7\" style={styles}>\r\n                取消分组\r\n              </Menu.Item>\r\n            </SubMenu>\r\n          )}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HeadDropMenu;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Table from \"../base/index\";\r\nimport Pagination from \"./pagination\";\r\nimport Spin from \"antd/lib/spin\";\r\nimport ColumnDropMenu from \"./ColumnDropMenu\";\r\nimport { treeToFlatten as treeToList, treeFilter } from \"../base/utils\";\r\nimport Setting, { getConfigs, setConfigs } from \"./setting\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport Popover from \"antd/lib/popover\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\n\r\n/**\r\n * 表格\r\n */\r\nclass FeaturedTable extends React.Component {\r\n  dropdown_button_ref = React.createRef();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let configs = {};\r\n\r\n    if (props.tableId) {\r\n      configs = getConfigs(props.tableId) || {};\r\n    }\r\n\r\n    this.state = {\r\n      pagination: false,\r\n      data: [],\r\n      columns: [],\r\n      columnsConfig: configs.columnsConfig || null,\r\n      columnMenu: null\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n\r\n    let columns = cloneDeep(nextProps.columns || []);\r\n\r\n    nextState.columns = columns;\r\n    nextState.data = nextProps.data || [];\r\n    nextState.rawColumns = nextProps.columns || [];\r\n\r\n    if (\"pagination\" in nextProps) {\r\n      nextState.pagination = nextProps.pagination;\r\n\r\n      const newPagination = {\r\n        ...prevState.pagination,\r\n        ...nextProps.pagination\r\n      };\r\n      newPagination.current = newPagination.current || 1;\r\n      newPagination.pageSize = newPagination.pageSize || 10;\r\n\r\n      if (nextProps.pagination !== false) {\r\n        nextState.pagination = newPagination;\r\n      } else {\r\n        nextState.pagination = {};\r\n      }\r\n\r\n      return nextState;\r\n    }\r\n\r\n    if (Object.keys(nextState).length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return nextState;\r\n  }\r\n\r\n  hasPagination() {\r\n    return this.props.pagination !== false;\r\n  }\r\n\r\n  onPageChange = (pageIndex, pageSize) => {\r\n    let { pagination } = this.state;\r\n    let fn = this.state.pagination.onPageChange;\r\n\r\n    if (typeof fn === \"function\") {\r\n      fn(pageIndex, pageSize);\r\n    } else {\r\n      this.setState({\r\n        pagination: {\r\n          ...pagination,\r\n          current: pageIndex,\r\n          pageSize\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  getMaxCurrent(total) {\r\n    const {\r\n      pagination: { current, pageSize }\r\n    } = this.state;\r\n    if ((current - 1) * pageSize >= total) {\r\n      return Math.floor((total - 1) / pageSize) + 1;\r\n    }\r\n    return current;\r\n  }\r\n\r\n  getCurrentPageData(data) {\r\n    let current;\r\n    let pageSize;\r\n    const state = this.state;\r\n    // 如果没有分页的话，默认全部展示\r\n    if (!this.hasPagination()) {\r\n      pageSize = data.length;\r\n      current = 1;\r\n    } else {\r\n      pageSize = state.pagination.pageSize;\r\n      current = this.getMaxCurrent(state.pagination.total || data.length);\r\n    }\r\n\r\n    // 分页\r\n    // ---\r\n    // 当数据量少于等于每页数量时，直接设置数据\r\n    // 否则进行读取分页数据\r\n    if (data.length > pageSize) {\r\n      data = data.filter((_, i) => {\r\n        return i >= (current - 1) * pageSize && i < current * pageSize;\r\n      });\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  columnSettingMenuShow = e => {\r\n    e.target.className = \"tablex__column__inner__dropdown opened\";\r\n\r\n    if (this.dropdown_button_ref && this.dropdown_button_ref.current) {\r\n      this.dropdown_button_ref.current.click();\r\n    }\r\n\r\n    this.setState({\r\n      columnMenu: {\r\n        columnKey: e.target.dataset.columnkey,\r\n        trigger: e.target,\r\n        visible: true,\r\n        offsetX: e.clientX,\r\n        offsetY: e.clientY\r\n      }\r\n    });\r\n  };\r\n\r\n  columnSettingMenuHide = () => {\r\n    let columnMenu = this.state.columnMenu || {};\r\n    if (columnMenu.trigger) {\r\n      columnMenu.trigger.className = \"tablex__column__inner__dropdown\";\r\n    }\r\n    this.setState({\r\n      columnMenu: Object.assign(columnMenu, { visible: false, trigger: null })\r\n    });\r\n  };\r\n\r\n  onColumnResize = ({ column, width }) => {\r\n    let columnKey = column.key || column.dataIndex;\r\n    this.onColumnChange(columnKey, { width });\r\n  };\r\n\r\n  onColumnChange = (key, config) => {\r\n    let columnKey = key;\r\n\r\n    let { columnsConfig, columnMenu } = this.state;\r\n\r\n    let configs = columnsConfig || {};\r\n\r\n    if (!columnKey && columnMenu) {\r\n      columnKey = columnMenu.columnKey;\r\n    }\r\n\r\n    let prevConfig = configs[columnKey] || {};\r\n    let nextConfig = {\r\n      [columnKey]: Object.assign({}, prevConfig, config)\r\n    };\r\n\r\n    let newConfigs = { ...configs, ...nextConfig };\r\n\r\n    setConfigs(this.props.tableId, {\r\n      columnsConfig: newConfigs,\r\n      groupedColumnKey: null\r\n    });\r\n\r\n    this.setState({\r\n      columnsConfig: newConfigs\r\n    });\r\n  };\r\n\r\n  formatColumns = () => {\r\n    let { columns, columnsConfig } = this.state;\r\n\r\n    let configs = columnsConfig || {};\r\n\r\n    let arr = columns;\r\n\r\n    arr = treeFilter(columns, d => {\r\n      let columnKey = d.key || d.dataIndex;\r\n      let bl = true;\r\n\r\n      let config = configs[columnKey] || {};\r\n      bl = !config.hidden;\r\n\r\n      return bl;\r\n    });\r\n\r\n    let cols = treeToList(arr).leafs;\r\n\r\n    cols.forEach((d, i) => {\r\n      let columnKey = d.key || d.dataIndex;\r\n      let config = configs[columnKey] || configs[columnKey] || {};\r\n\r\n      if (\"fixed\" in config) {\r\n        d.fixed = config.fixed;\r\n      }\r\n\r\n      if (\"width\" in config) {\r\n        d.width = config.width;\r\n      }\r\n\r\n      if (\"order\" in config) {\r\n        d.order = config.order;\r\n      } else {\r\n        d.order = i;\r\n      }\r\n\r\n      d.headerRenderer = ({ column }) => {\r\n        return (\r\n          <div className=\"tablex__column__inner\">\r\n            <span className=\"tablex__column__inner__title\">{column.title}</span>\r\n            <span\r\n              className=\"tablex__column__inner__dropdown\"\r\n              data-columnkey={columnKey}\r\n              onClick={this.columnSettingMenuShow}\r\n            />\r\n          </div>\r\n        );\r\n      };\r\n    });\r\n\r\n    arr = orderBy(arr, [\"order\"], [\"asc\"]);\r\n\r\n    return cloneDeep(arr);\r\n  };\r\n\r\n  saveConfig = configs => {\r\n    this.setState({ columnsConfig: configs });\r\n  };\r\n\r\n  resetConfig = () => {\r\n    this.setState({ columnsConfig: {} });\r\n  };\r\n\r\n  renderHeader = () => {\r\n    let header = null;\r\n\r\n    let headerExtra = null;\r\n\r\n    if (typeof this.props.headerExtra === \"function\") {\r\n      headerExtra = this.props.headerExtra();\r\n    }\r\n\r\n    if (headerExtra) {\r\n      header = <div className=\"tablex__container__header\">{headerExtra}</div>;\r\n    }\r\n\r\n    return header;\r\n  };\r\n\r\n  renderFooter = () => {\r\n    let footer = null;\r\n\r\n    let { pagination: pageAttr, data } = this.state;\r\n\r\n    let { settable, tableId } = this.props;\r\n\r\n    let footerExtra = null;\r\n\r\n    if (typeof this.props.footerExtra === \"function\") {\r\n      footerExtra = this.props.footerExtra();\r\n    }\r\n\r\n    const dataTotal = pageAttr.total || data.length;\r\n\r\n    let hasPager = this.hasPagination();\r\n\r\n    let pager = null;\r\n    let settingButton = null;\r\n\r\n    if (settable === true && tableId) {\r\n      settingButton = (\r\n        <div key=\"_settingButton\" style={{ marginRight: \"5px\" }}>\r\n          <Setting\r\n            tableId={tableId}\r\n            onSave={this.saveConfig}\r\n            onReset={this.resetConfig}\r\n            configs={this.state.columnsConfig}\r\n            columns={this.state.rawColumns}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (hasPager) {\r\n      pager = (\r\n        <Pagination\r\n          {...pageAttr}\r\n          total={dataTotal}\r\n          onPageChange={this.onPageChange}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (pager !== null || settingButton !== null || footerExtra !== null) {\r\n      footer = (\r\n        <div className=\"tablex__container__footer\">\r\n          {settingButton}\r\n          {footerExtra}\r\n          {pager}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return footer;\r\n  };\r\n\r\n  overlayRenderer = () => {\r\n    return (\r\n      <Spin\r\n        spinning={true}\r\n        tip=\"数据加载中，请稍候...\"\r\n        style={{\r\n          position: \"absolute\",\r\n          margin: \"auto\",\r\n          left: 0,\r\n          right: 0,\r\n          width: 300,\r\n          height: 50,\r\n          top: 0,\r\n          bottom: 0\r\n        }}\r\n      />\r\n    );\r\n  };\r\n  emptyRenderer = () => {\r\n    return <div className=\"tablex__emptydata\">暂无数据</div>;\r\n  };\r\n\r\n  render() {\r\n    let props = this.props;\r\n\r\n    let { columnMenu } = this.state;\r\n\r\n    let columns = this.formatColumns();\r\n\r\n    let arr = props.data;\r\n    if (this.hasPagination()) {\r\n      arr = this.getCurrentPageData(props.data);\r\n    }\r\n\r\n    let newProps = {\r\n      data: arr,\r\n      columns,\r\n      onColumnResize: this.onColumnResize,\r\n      emptyRenderer: this.emptyRenderer\r\n    };\r\n\r\n    if (this.props.loading === true) {\r\n      newProps.overlayRenderer = this.overlayRenderer;\r\n    }\r\n\r\n    let columnMenuState = columnMenu || {};\r\n\r\n    return (\r\n      <div className=\"tablex__container\">\r\n        {this.renderHeader()}\r\n        <div className=\"tablex__container__body\">\r\n          <Table {...props} {...newProps} />\r\n        </div>\r\n        {this.renderFooter()}\r\n\r\n        <Popover\r\n          trigger=\"click\"\r\n          onVisibleChange={this.columnSettingMenuHide}\r\n          content={\r\n            <ColumnDropMenu\r\n              options={{ pinable: true, filterable: true, groupable: false }}\r\n              columns={this.state.columns}\r\n              columnsConfig={this.state.columnsConfig}\r\n              onChange={this.onColumnChange}\r\n            />\r\n          }\r\n          arrowPointAtCenter={true}\r\n          placement=\"bottomRight\"\r\n        >\r\n          <span\r\n            style={{\r\n              width: 1,\r\n              height: 1,\r\n              position: \"fixed\",\r\n              left: columnMenuState.offsetX,\r\n              top: columnMenuState.offsetY,\r\n              display: columnMenuState.visible ? \"block\" : \"none\"\r\n            }}\r\n            ref={this.dropdown_button_ref}\r\n          />\r\n        </Popover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nFeaturedTable.defaultProps = {\r\n  settable: true,\r\n  pagination: false,\r\n  loading: false\r\n};\r\n\r\nFeaturedTable.propTypes = {\r\n \r\n  /** 数据是否加载中 */\r\n  loading: PropTypes.bool,\r\n\r\n  /** 分页 */\r\n  pagination: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\r\n \r\n  /** 是否可进行属性设置 */\r\n  settable: PropTypes.bool,\r\n\r\n  /** 表格全局id，通过此id记忆表格配置，由于采用localStorage存储配置，需保证id唯一 */\r\n  tableId: function(props, propName, componentName) {\r\n    let count = 0;\r\n    let v = props[propName];\r\n\r\n    if (typeof v !== \"undefined\" && v !== \"\") {\r\n      let tbs = document.getElementsByClassName(\"table-extend\");\r\n\r\n      for (let i = 0, len = tbs.length; i < len; i++) {\r\n        const tb = tbs[i];\r\n        if (tb) {\r\n          const t = tb.getAttribute(\"data-tableid\");\r\n          if (t === v) {\r\n            count = count + 1;\r\n\r\n            if (count > 1) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (count > 1) {\r\n      return new Error(\r\n        ` Encountered two table with the same tableId, '${v}'.The tableId must be unique in the whole application.\r\n                  We Recommended set the tableId based on file path.\r\n                  eg: platform/user/index.js =>  platform-user-xxx `\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport default FeaturedTable;\r\n","import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport merge from \"lodash/merge\";\r\nimport Table from \"./Table\";\r\nimport { treeToFlatten as treeToList, treeFilter } from \"../base/utils\";\r\nimport Tooltip from \"antd/lib/tooltip\";\r\nimport Button from \"antd/lib/button\";\r\nimport message from \"antd/lib/message\";\r\nimport Popconfirm from \"antd/lib/popconfirm\";\r\nimport Menu from \"antd/lib/menu\";\r\nimport Dropdown from \"antd/lib/dropdown\";\r\nimport Icon from \"antd/lib/icon\";\r\nimport Popover from \"antd/lib/popover\";\r\nimport Pagination from \"./pagination\";\r\nimport ColumnDropMenu from \"./ColumnDropMenu\";\r\nimport \"antd/dist/antd.css\";\r\nimport Setting, { getConfigs, setConfigs } from \"./setting\";\r\nimport orderBy from \"lodash/orderBy\";\r\n\r\n/**\r\n * 表格\r\n */\r\nclass EditableTable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      rowKey: props.rowKey,\r\n      propsOriginal: {},\r\n      rawColumns: [],\r\n      columns: [],\r\n      data: [],\r\n      dataList: [],\r\n      sourceData: [],\r\n      changedRows: [],\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: false,\r\n      addedData: [],\r\n      isEditing: false,\r\n      editKeys: [],\r\n      editSaveLoading: false,\r\n      deleteLoading: false,\r\n      dataControled: false\r\n    };\r\n  }\r\n\r\n  rowsAttributes = [];\r\n  tableRef = null;\r\n  initRef = inst => {\r\n    if (typeof this.props.initRef === \"function\") {\r\n      this.props.initRef(inst);\r\n    }\r\n    this.tableRef = inst;\r\n  };\r\n\r\n  isEditing = () => {\r\n    return this.state.isEditing;\r\n  };\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n\r\n    //是否让数据受控\r\n    nextState.dataControled = nextProps.dataControled || false;\r\n    //\r\n    let columns = cloneDeep(nextProps.columns || []);\r\n    let columnList = treeToList(columns).list;\r\n    nextState.columns = columns;\r\n    nextState.columnList = columnList;\r\n    nextState.rawColumns = nextProps.columns || [];\r\n\r\n    let data = nextProps.data || nextProps.dataSource;\r\n\r\n    if (prevState.propsOriginal !== nextProps) {\r\n      nextState.propsOriginal = nextProps;\r\n\r\n      nextState.changedRows = [];\r\n\r\n      if (prevState.dataControled === true) {\r\n        let newData = data || [];\r\n        let dataList = treeToList(newData).list;\r\n        nextState.dataList = dataList;\r\n        nextState.data = newData;\r\n        nextState.sourceData = cloneDeep(newData);\r\n      } else {\r\n        if (prevState.sourceData !== data) {\r\n          let newData = data || [];\r\n          let dataList = treeToList(newData).list;\r\n          nextState.dataList = dataList;\r\n          nextState.data = newData;\r\n          nextState.sourceData = cloneDeep(newData);\r\n        }\r\n      }\r\n    }\r\n    return nextState;\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  updateComponent = () => {\r\n    let { data, dataList, addedData } = this.state;\r\n\r\n    this.setState({\r\n      data: cloneDeep(data),\r\n      dataList: cloneDeep(dataList),\r\n      addedData: cloneDeep(addedData)\r\n    });\r\n  };\r\n\r\n  delayTimer = null;\r\n  delayUpdate = fn => {\r\n    let delay = 300;\r\n\r\n    if (typeof this.props.validateDelay === \"number\") {\r\n      delay = this.props.validateDelay;\r\n    }\r\n\r\n    if (this.delayTimer) {\r\n      clearTimeout(this.delayTimer);\r\n    }\r\n\r\n    if (typeof fn === \"function\") {\r\n      this.delayTimer = setTimeout(() => {\r\n        fn();\r\n        this.updateComponent();\r\n      }, delay);\r\n    } else {\r\n      this.delayTimer = setTimeout(this.updateComponent, delay);\r\n    }\r\n  };\r\n\r\n  isMouseFocus = false;\r\n\r\n  changedRows = [];\r\n  addToChanged = newRow => {\r\n    let rowKey = this.props.rowKey;\r\n    let changedRows = this.changedRows;\r\n    let validateTrigger = this.props.validateTrigger;\r\n\r\n    let i = changedRows.findIndex(d => d[rowKey] === newRow[rowKey]);\r\n\r\n    if (i >= 0) {\r\n      changedRows[i] = newRow;\r\n    } else {\r\n      changedRows.push(newRow);\r\n    }\r\n\r\n    this.changedRows = changedRows;\r\n\r\n    // 当change时立即验证行\r\n    if (validateTrigger === \"onChange\") {\r\n      this.validateRow(newRow);\r\n      this.updateComponent();\r\n    }\r\n  };\r\n\r\n  editChange = (newValues = {}, row, index) => {\r\n    let { data, addedData } = this.state;\r\n\r\n    let rowKey = this.props.rowKey;\r\n\r\n    // let dataList = data.concat(addedData);\r\n\r\n    let arr = treeToList(data).list;\r\n\r\n    let k = row[rowKey];\r\n    let i = arr.findIndex(d => d[rowKey] === k);\r\n\r\n    if (i > -1) {\r\n      let changedRow = {};\r\n\r\n      Object.keys(newValues).forEach(k => {\r\n        arr[i][k] = newValues[k];\r\n        changedRow = Object.assign({}, arr[i]);\r\n        changedRow[k] = newValues[k];\r\n        //row[k] = newValues[k];\r\n      });\r\n\r\n      //this.setState({});\r\n\r\n      this.addToChanged(arr[i]);\r\n    }\r\n\r\n    let j = addedData.findIndex(d => d[rowKey] === k);\r\n\r\n    if (j > -1) {\r\n      Object.keys(newValues).forEach(k => {\r\n        addedData[j][k] = newValues[k];\r\n      });\r\n\r\n      this.addToChanged(addedData[j]);\r\n    }\r\n  };\r\n\r\n  setRowAttr = (row, attr = {}) => {\r\n    let rowKey = this.props.rowKey;\r\n    let key = row[rowKey];\r\n\r\n    let attrs = this.rowsAttributes || [];\r\n\r\n    let i = attrs.findIndex(d => d[rowKey] === key);\r\n\r\n    if (i > -1) {\r\n      let fRow = attrs[i];\r\n\r\n      if (typeof fRow.__attribute === \"undefined\") {\r\n        fRow.__attribute = attr;\r\n      } else {\r\n        fRow.__attribute = merge({}, fRow.__attribute, attr);\r\n      }\r\n    } else {\r\n      let newAttr = Object.assign({}, row);\r\n      newAttr.__attribute = attr;\r\n      attrs.push(newAttr);\r\n    }\r\n\r\n    this.rowsAttributes = attrs;\r\n  };\r\n\r\n  getRowAttr = row => {\r\n    let rowKey = this.props.rowKey;\r\n    let key = row[rowKey];\r\n\r\n    let attrs = this.rowsAttributes || [];\r\n    let attr = {};\r\n\r\n    let i = attrs.findIndex(d => d[rowKey] === key);\r\n    if (i > -1) {\r\n      attr = attrs[i] || {};\r\n    }\r\n\r\n    return Object.assign({}, attr.__attribute || {});\r\n  };\r\n\r\n  getValidate = (row, key) => {\r\n    let attr = this.getRowAttr(row);\r\n    let r = (attr[\"validation\"] || {})[key] || {};\r\n\r\n    return r;\r\n  };\r\n\r\n  //进行异步验证的promise\r\n  validatorAsync = [];\r\n\r\n  validateRow = row => {\r\n    let { columnList: columns } = this.state;\r\n\r\n    let bl = true;\r\n\r\n    let validation = {};\r\n\r\n    for (let i = 0; i < columns.length; i++) {\r\n      const c = columns[i];\r\n      const ck = c.dataIndex;\r\n\r\n      if (typeof c.validator === \"function\") {\r\n        var v = c.validator(row[ck], row);\r\n\r\n        if (v.constructor.name === \"Promise\") {\r\n          this.validatorAsync.push(\r\n            new Promise((resolve, reject) => {\r\n              v.then(d => {\r\n                resolve({ validation: d, row, columnKey: ck });\r\n              });\r\n\r\n              v.catch(e => {\r\n                reject(e);\r\n              });\r\n            })\r\n          );\r\n        } else {\r\n          validation[ck] = {\r\n            valid: v.valid,\r\n            msg: v.valid ? \"\" : v.message || \"输入不正确\"\r\n          };\r\n\r\n          if (!v.valid) bl = false;\r\n\r\n          this.setRowAttr(row, {\r\n            validation\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return bl;\r\n  };\r\n\r\n  //异步验证数据行\r\n  validateAsync = rows => {\r\n    let arr = rows || [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n      let bl = true;\r\n\r\n      for (let i = 0; i < arr.length; i++) {\r\n        const r = arr[i];\r\n        let temp = this.validateRow(r);\r\n        if (temp === false) {\r\n          bl = false;\r\n        }\r\n      }\r\n\r\n      if (this.validatorAsync.length > 0) {\r\n        Promise.all(this.validatorAsync).then(datas => {\r\n          datas.forEach(d => {\r\n            let v = d.validation;\r\n\r\n            if (v.valid === false) {\r\n              bl = false;\r\n            }\r\n\r\n            let validation = {};\r\n\r\n            validation[d.columnKey] = {\r\n              valid: v.valid,\r\n              msg: v.valid ? \"\" : v.message\r\n            };\r\n\r\n            this.setRowAttr(d.row, {\r\n              validation\r\n            });\r\n          });\r\n\r\n          this.validatorAsync = [];\r\n          this.updateComponent();\r\n\r\n          resolve(bl);\r\n        });\r\n      } else {\r\n        if (arr.length > 0) {\r\n          this.updateComponent();\r\n        }\r\n\r\n        resolve(bl);\r\n      }\r\n    });\r\n  };\r\n\r\n  //验证改变的数据行\r\n  validate = async () => {\r\n    let bl = true;\r\n    let arr = this.changedRows;\r\n\r\n    // let { data, addedData } = this.state;\r\n\r\n    // let arr = data.concat(addedData);\r\n\r\n    bl = await this.validateAsync(arr);\r\n\r\n    return bl;\r\n  };\r\n\r\n  //验证当前所有数据行\r\n  validateAll = async () => {\r\n    let bl = true;\r\n    let { data, addedData, editKeys, isEditAll } = this.state;\r\n    let rowKey = this.props.rowKey;\r\n\r\n    let allData = data.concat(addedData);\r\n\r\n    let arr = [];\r\n\r\n    if (isEditAll === true) {\r\n      arr = allData;\r\n    } else {\r\n      arr = allData.filter(d => {\r\n        return editKeys.indexOf(d[rowKey]) > -1;\r\n      });\r\n    }\r\n\r\n    bl = await this.validateAsync(arr);\r\n    // this.forceUpdate();\r\n    return bl;\r\n  };\r\n\r\n  editorInstance = [];\r\n  setEditorIns = (row, column, ins) => {\r\n    if (ins === null) {\r\n      return;\r\n    }\r\n\r\n    let rowKey = row[this.props.rowKey];\r\n    let columnKey = column.dataIndex;\r\n\r\n    let editorInstance = [].concat(this.editorInstance);\r\n\r\n    let ed = this.editorInstance.find(\r\n      d => d.rowKey === rowKey && d.columnKey === columnKey\r\n    );\r\n\r\n    if (ed) {\r\n      ed.editorInstance = ins;\r\n    } else {\r\n      editorInstance.push({\r\n        columnKey: columnKey,\r\n        rowKey: rowKey,\r\n        editorInstance: ins\r\n      });\r\n    }\r\n\r\n    this.editorInstance = editorInstance;\r\n  };\r\n\r\n  getEditorIns = (rowKey, columnKey) => {\r\n    let ed = this.editorInstance.find(\r\n      d => d.rowKey === rowKey && d.columnKey === columnKey\r\n    );\r\n\r\n    if (ed) {\r\n      return ed.editorInstance;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  formatColumns = () => {\r\n    let { columns, editKeys, isEditAll, isEditing } = this.state;\r\n\r\n    let rowKey = this.props.rowKey;\r\n\r\n    let arr = columns;\r\n\r\n    arr = treeFilter(columns, d => {\r\n      let bl = true;\r\n\r\n      if (isEditing === true) {\r\n        bl = d.editingVisible !== false;\r\n      }\r\n\r\n      return bl;\r\n    });\r\n\r\n    let cols = treeToList(arr).leafs;\r\n\r\n    if (isEditAll === true) {\r\n      cols.forEach(d => {\r\n        let editor = d.editor;\r\n\r\n        if (typeof editor === \"function\") {\r\n          let renderFn = d.render;\r\n\r\n          d.render = (value, row, index) => {\r\n            let renderProps = null;\r\n            let newRenderProps = {};\r\n\r\n            if (typeof renderFn === \"function\") {\r\n              renderProps = renderFn(value, row, index);\r\n            }\r\n\r\n            if (\r\n              renderProps &&\r\n              renderProps.props &&\r\n              renderProps.props.colSpan === 0\r\n            ) {\r\n              return renderProps;\r\n            }\r\n\r\n            let { valid, msg } = this.getValidate(row, d.dataIndex) || {};\r\n\r\n            let ed = editor(\r\n              value,\r\n              row,\r\n              index,\r\n              values => {\r\n                this.editChange(values, row, index);\r\n              },\r\n              ins => {\r\n                this.setEditorIns(row, d, ins);\r\n              },\r\n              this.validate\r\n            );\r\n\r\n            let c = (\r\n              <span\r\n                style={{ verticalAlign: \"middle\" }}\r\n                className={valid === false ? \"has-error\" : \"\"}\r\n                onClick={e => this.onClick(e, row, d)}\r\n                onKeyDown={e => this.onKeyDown(e, row, d)}\r\n              >\r\n                <Tooltip placement=\"topLeft\" title={msg}>\r\n                  {ed}\r\n                </Tooltip>\r\n              </span>\r\n            );\r\n\r\n            newRenderProps.children = c;\r\n\r\n            if (renderProps && renderProps.props) {\r\n              newRenderProps.props = renderProps.props;\r\n            }\r\n\r\n            return newRenderProps;\r\n          };\r\n        }\r\n      });\r\n    } else if (editKeys.length > 0) {\r\n      cols.forEach(d => {\r\n        if (typeof d.editingVisible === \"boolean\") {\r\n          d.hidden = !d.editingVisible;\r\n        }\r\n\r\n        let editor = d.editor;\r\n\r\n        if (typeof editor === \"function\") {\r\n          let renderFn = d.render;\r\n\r\n          d.render = (value, row, index) => {\r\n            let renderProps = null;\r\n            let newRenderProps = {};\r\n\r\n            if (typeof renderFn === \"function\") {\r\n              renderProps = renderFn(value, row, index);\r\n            }\r\n\r\n            if (\r\n              renderProps &&\r\n              renderProps.props &&\r\n              renderProps.props.colSpan === 0\r\n            ) {\r\n              return renderProps;\r\n            }\r\n\r\n            let bl = editKeys.findIndex(k => k === row[rowKey]) > -1;\r\n\r\n            if (bl) {\r\n              let { valid, msg } = this.getValidate(row, d.dataIndex) || {};\r\n\r\n              let ed = editor(\r\n                value,\r\n                row,\r\n                index,\r\n                values => {\r\n                  this.editChange(values, row, index);\r\n                },\r\n                ins => {\r\n                  this.setEditorIns(row, d, ins);\r\n                }\r\n              );\r\n\r\n              let c = (\r\n                <span\r\n                  style={{ verticalAlign: \"middle\" }}\r\n                  className={valid === false ? \"has-error\" : \"\"}\r\n                  onClick={e => this.onClick(e, row, d)}\r\n                  onKeyDown={e => this.onKeyDown(e, row, d)}\r\n                >\r\n                  <Tooltip placement=\"topLeft\" title={msg}>\r\n                    {ed}\r\n                  </Tooltip>\r\n                </span>\r\n              );\r\n\r\n              newRenderProps.children = c;\r\n\r\n              if (renderProps && renderProps.props) {\r\n                newRenderProps.props = renderProps.props;\r\n              }\r\n\r\n              return newRenderProps;\r\n            } else {\r\n              if (typeof renderFn === \"function\") {\r\n                return renderFn(value, row, index);\r\n              }\r\n              return value;\r\n            }\r\n          };\r\n        }\r\n      });\r\n    }\r\n\r\n    arr = orderBy(arr, [\"order\"], [\"asc\"]);\r\n\r\n    return cloneDeep(arr);\r\n  };\r\n\r\n  editAll = () => {\r\n    this.setState({ isEditAll: true, isEditing: true, editKeys: [] });\r\n  };\r\n\r\n  endEdit = callBack => {\r\n    let arr = [].concat(this.changedRows);\r\n\r\n    this.changedRows = [];\r\n\r\n    let nextState = {\r\n      editSaveLoading: false,\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: false,\r\n      isEditing: false,\r\n      editKeys: [],\r\n      changedRows: [],\r\n      addedData: [],\r\n      sourceData: cloneDeep(this.state.data)\r\n    };\r\n\r\n    if (typeof callBack === \"function\") {\r\n      this.setState(nextState, () => {\r\n        callBack(arr, this.state.data, this.editType);\r\n      });\r\n    } else {\r\n      this.setState(nextState);\r\n    }\r\n  };\r\n\r\n  //取消编辑\r\n  cancelEdit = () => {\r\n    if (typeof this.props.onCancel === \"function\") {\r\n      this.props.onCancel();\r\n    }\r\n\r\n    this.reset();\r\n  };\r\n\r\n  editRows = keys => {\r\n    this.setState({ isEditAll: false, editKeys: keys, isEditing: true });\r\n  };\r\n\r\n  getChangedRows = () => {\r\n    return this.changedRows;\r\n  };\r\n\r\n  getRows = () => {\r\n    return this.state.data;\r\n  };\r\n\r\n  addRow = (r = {}, editting = true) => {\r\n    this.addRows([r], editting);\r\n  };\r\n\r\n  addRows = (arr = [], editting = true) => {\r\n    let rowKey = this.props.rowKey;\r\n    let { addedData, editKeys } = this.state;\r\n\r\n    let rowKeys = [];\r\n    let newEditKeys = [];\r\n    let newAddedData = [];\r\n\r\n    this.editType = \"add\";\r\n\r\n    let rows = [];\r\n\r\n    let rowTemplate = {};\r\n\r\n    arr.forEach((d, i) => {\r\n      let k = d[rowKey];\r\n\r\n      if (!k) {\r\n        k = d[rowKey] = \"__id_\" + i + \"_\" + new Date().getTime();\r\n      }\r\n\r\n      rows.push(Object.assign({}, rowTemplate, d));\r\n      rowKeys.push(k);\r\n    });\r\n\r\n    newEditKeys = editKeys.concat(rowKeys);\r\n    newAddedData = [].concat(rows);\r\n\r\n    if (editting === false) {\r\n      this.setState({\r\n        isAddingRange: true,\r\n        addedData: newAddedData\r\n      });\r\n    } else {\r\n      this.setState({\r\n        isAddingRange: true,\r\n        isEditing: true,\r\n        addedData: newAddedData,\r\n        editKeys: newEditKeys\r\n      });\r\n    }\r\n  };\r\n\r\n  setRows = (arr = []) => {\r\n    this.changedRows = [];\r\n    this.setState({\r\n      data: arr,\r\n      editKeys: [],\r\n      isEditAll: false,\r\n      changedRows: []\r\n    });\r\n  };\r\n\r\n  reset = () => {\r\n    let data = cloneDeep(this.state.sourceData);\r\n\r\n    let nextState = {\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: false,\r\n      isEditing: false,\r\n      editKeys: [],\r\n      data: data,\r\n      changedRows: [],\r\n      addedData: []\r\n    };\r\n\r\n    this.changedRows = [];\r\n    this.setState(nextState);\r\n  };\r\n\r\n  focusInput = editor => {\r\n    if (!editor) {\r\n      return;\r\n    }\r\n\r\n    if (editor.input && typeof editor.input.select === \"function\") {\r\n      setTimeout(() => {\r\n        editor.input.select();\r\n      }, 1);\r\n    } else if (typeof editor.focus === \"function\") {\r\n      editor.focus();\r\n    } else {\r\n      let el = ReactDom.findDOMNode(editor);\r\n\r\n      if (el) {\r\n        let inputEl = el.getElementsByTagName(\"input\")[0];\r\n        inputEl && inputEl.focus();\r\n        el.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  getNextEditor = (keyCode, row, column) => {\r\n    let nextEditor = null;\r\n\r\n    let key = this.props.rowKey;\r\n\r\n    let rowKey = row[key];\r\n\r\n    let columnKey = column.dataIndex;\r\n\r\n    let { data, addedData, columns } = this.state;\r\n\r\n    let rows = [].concat(data).concat(addedData);\r\n\r\n    let arr = treeToList(columns).leafs;\r\n\r\n    if (keyCode === 38) {\r\n      //top\r\n\r\n      let currIndex = rows.findIndex(d => d[key] === rowKey);\r\n      let nextRow = rows[currIndex - 1];\r\n\r\n      if (nextRow) {\r\n        nextEditor = this.getEditorIns(nextRow[key], columnKey);\r\n      }\r\n    }\r\n\r\n    if (keyCode === 40) {\r\n      //bottom\r\n\r\n      let currIndex = rows.findIndex(d => d[key] === rowKey);\r\n      let nextRow = rows[currIndex + 1];\r\n\r\n      if (nextRow) {\r\n        nextEditor = this.getEditorIns(nextRow[key], columnKey);\r\n      }\r\n    }\r\n\r\n    if (keyCode === 37) {\r\n      //left\r\n\r\n      let currColumnIndex = arr.findIndex(d => d[\"dataIndex\"] === columnKey);\r\n      let nextColumn = arr[currColumnIndex - 1];\r\n\r\n      if (nextColumn) {\r\n        nextEditor = this.getEditorIns(rowKey, nextColumn[\"dataIndex\"]);\r\n      }\r\n    }\r\n\r\n    if (keyCode === 39 || keyCode === 13) {\r\n      //right\r\n\r\n      let currColumnIndex = arr.findIndex(d => d[\"dataIndex\"] === columnKey);\r\n      let nextColumn = arr[currColumnIndex + 1];\r\n\r\n      if (nextColumn) {\r\n        nextEditor = this.getEditorIns(rowKey, nextColumn[\"dataIndex\"]);\r\n      }\r\n    }\r\n\r\n    return nextEditor;\r\n  };\r\n\r\n  onKeyDown = (e, row, column) => {\r\n    // e.preventDefault();\r\n    //e.stopPropagation();\r\n\r\n    let key = this.props.rowKey;\r\n\r\n    let rowKey = row[key];\r\n    let columnKey = column.dataIndex;\r\n\r\n    let nextEditor = this.getNextEditor(e.keyCode, row, column);\r\n\r\n    let currEditor = this.getEditorIns(rowKey, columnKey);\r\n\r\n    if (currEditor) {\r\n      //ly 2018年11月6日 11点12分\r\n      //当当前编辑器为下拉类型时，如 datePicker comobobox 。获取展开状态，展开时禁用表格列的快捷键切换\r\n      if (typeof currEditor.getRealOpenState === \"function\") {\r\n        let bl = currEditor.getRealOpenState();\r\n\r\n        if (e.keyCode === 13) {\r\n          this.focusInput(nextEditor);\r\n          return false;\r\n        }\r\n\r\n        if (bl === true) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.focusInput(nextEditor);\r\n  };\r\n\r\n  onClick = (e, row, column) => {\r\n    this.isMouseFocus = true;\r\n  };\r\n\r\n  completeEdit = async callBack => {\r\n    let changedRows = this.getChangedRows();\r\n\r\n    let editType = this.editType;\r\n    let { data, addedData } = this.state;\r\n    let { allowSaveEmpty, alwaysValidate } = this.props;\r\n\r\n    let newRows = [].concat(data);\r\n    if (editType === \"add\") {\r\n      if (allowSaveEmpty === true) {\r\n        let addedRows = addedData.map(d => {\r\n          let r = Object.assign({}, d);\r\n          delete r.__isAddedRow;\r\n          return r;\r\n        });\r\n        newRows = data.concat(addedRows);\r\n      } else {\r\n        newRows = data.concat(changedRows);\r\n      }\r\n    } else if (editType === \"edit\") {\r\n      newRows = data;\r\n    } else if (editType === \"delete\") {\r\n      newRows = data;\r\n    }\r\n\r\n    let bl = true;\r\n\r\n    if (alwaysValidate === true) {\r\n      bl = await this.validateAll();\r\n    } else {\r\n      bl = await this.validate();\r\n    }\r\n\r\n    if (bl === false) {\r\n      message.error(\"信息录入不正确，请检查\");\r\n      return;\r\n    }\r\n\r\n    if (allowSaveEmpty !== true) {\r\n      if (changedRows.length <= 0) {\r\n        this.cancelEdit();\r\n        return;\r\n      }\r\n    }\r\n\r\n    let onEditSave = this.props.onEditSave;\r\n\r\n    if (typeof onEditSave === \"function\") {\r\n      this.setState({ editSaveLoading: true });\r\n\r\n      let fn = onEditSave(changedRows, newRows, this.editType);\r\n\r\n      if (fn) {\r\n        //如果返回的是一个promise对象，则只有当调用resolve时，才触发编辑完成事件\r\n        if (typeof fn.then === \"function\" && typeof fn.catch === \"function\") {\r\n          fn.then(() => {\r\n            this.endEdit(callBack);\r\n          });\r\n\r\n          fn.catch(() => {\r\n            this.setState({ editSaveLoading: false });\r\n          });\r\n        } else {\r\n          this.setState({ editSaveLoading: false });\r\n        }\r\n      } else {\r\n        this.endEdit(callBack);\r\n      }\r\n    } else {\r\n      this.endEdit(callBack);\r\n    }\r\n  };\r\n\r\n  //\"edit\"：编辑 ； \"add\"：新增 \"delete\"： 删除\r\n  editType = \"\";\r\n  edit = () => {\r\n    let arr = this.state.data || [];\r\n\r\n    if (arr.length === 0) {\r\n      message.error(\"没有可编辑的数据\");\r\n      return false;\r\n    }\r\n\r\n    let bl = true;\r\n\r\n    if (typeof this.props.onBeforeEdit === \"function\") {\r\n      bl = this.props.onBeforeEdit();\r\n    }\r\n\r\n    if (bl === false) {\r\n      return false;\r\n    }\r\n\r\n    this.editType = \"edit\";\r\n\r\n    this.editAll();\r\n\r\n    if (typeof this.props.onEdit === \"function\") {\r\n      this.props.onEdit();\r\n    }\r\n  };\r\n\r\n  delete = () => {\r\n    let bl = true;\r\n\r\n    let selectedKeys = this.tableRef.tableApi.getSelectedKeys();\r\n\r\n    if (typeof this.props.onBeforeDelete === \"function\") {\r\n      bl = this.props.onBeforeDelete(selectedKeys);\r\n    }\r\n\r\n    if (bl === false) {\r\n      return false;\r\n    }\r\n\r\n    if (selectedKeys.length <= 0) {\r\n      message.warn(\"请选择要删除的数据\");\r\n    } else {\r\n      this.editType = \"delete\";\r\n\r\n      let { data, rowKey } = this.state;\r\n\r\n      let newData = [].concat(data);\r\n      let deletedRows = [];\r\n\r\n      for (let i = 0; i < selectedKeys.length; i++) {\r\n        let index = newData.findIndex(d => d[rowKey] === selectedKeys[i]);\r\n\r\n        deletedRows.push(Object.assign({}, newData[index]));\r\n\r\n        if (index > -1) {\r\n          newData.splice(index, 1);\r\n        }\r\n      }\r\n\r\n      let onEditSave = this.props.onEditSave;\r\n\r\n      if (typeof onEditSave === \"function\") {\r\n        this.setState({ deleteLoading: true });\r\n\r\n        let fn = onEditSave(deletedRows, newData, this.editType);\r\n\r\n        if (fn && typeof fn.then === \"function\") {\r\n          fn.then(() => {\r\n            this.setState({ deleteLoading: false });\r\n          });\r\n        } else {\r\n          this.setState({ deleteLoading: false });\r\n        }\r\n      } else {\r\n        this.setState({ data: newData, deletedRows });\r\n      }\r\n\r\n      if (typeof this.props.onDelete === \"function\") {\r\n        this.props.onDelete();\r\n      }\r\n    }\r\n  };\r\n\r\n  addRange = rowCount => {\r\n    let { rowTemplate, rowKey, isAppend, defaultAddCount } = this.props;\r\n\r\n    let bl = true;\r\n\r\n    if (typeof this.props.onBeforeAdd === \"function\") {\r\n      bl = this.props.onBeforeAdd();\r\n    }\r\n\r\n    if (bl === false) {\r\n      return false;\r\n    }\r\n\r\n    this.editType = \"add\";\r\n\r\n    let addCount = rowCount || defaultAddCount;\r\n\r\n    let data = this.state.data || [];\r\n\r\n    let newData = [];\r\n\r\n    let addedData = [];\r\n    let keys = [];\r\n\r\n    for (let i = 0; i < addCount; i++) {\r\n      let row = {};\r\n\r\n      if (typeof rowTemplate === \"function\") {\r\n        row = rowTemplate(i);\r\n        if (!row[rowKey]) {\r\n          row[rowKey] = \"__id_\" + i + \"_\" + new Date().getTime();\r\n        }\r\n      } else {\r\n        row[rowKey] = \"__id_\" + i + \"_\" + new Date().getTime();\r\n      }\r\n\r\n      keys.push(row[rowKey]);\r\n      addedData.push(row);\r\n    }\r\n\r\n    // if (isAppend === true) {\r\n    //     newData = data.concat(addedData)\r\n    // } else {\r\n    //     newData = addedData;\r\n    // }\r\n\r\n    this.changedRows = [];\r\n\r\n    this.setState({\r\n      addedData,\r\n      data: data,\r\n      editKeys: keys,\r\n      isEditing: true,\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: true,\r\n      changedRows: []\r\n    });\r\n\r\n    if (typeof this.props.onAdd === \"function\") {\r\n      this.props.onAdd(addedData, newData, \"add\");\r\n    }\r\n  };\r\n\r\n  editTools = () => {\r\n    let w = 0;\r\n\r\n    let tools = this.props.editTools || [];\r\n    let config = this.props.editToolsConfig || {};\r\n    let isTop = config.position === \"top\";\r\n\r\n    if (tools.length <= 0) {\r\n      return null;\r\n    }\r\n\r\n    let buttons = [];\r\n\r\n    let { isEditing } = this.state;\r\n\r\n    let itemStyle = config.itemStyle || { marginRight: 5 };\r\n\r\n    let okText = config.okText || \"确定\";\r\n    let okIcon = config.okIcon || \"\";\r\n    okIcon = okIcon ? <Icon type={okIcon} /> : null;\r\n\r\n    let cancelText = config.cancelText || \"取消\";\r\n    let cancelIcon = config.cancelIcon || \"\";\r\n    cancelIcon = cancelIcon ? <Icon type={cancelIcon} /> : null;\r\n\r\n    let addText = config.addText || \"新增\";\r\n    let addIcon = config.addIcon || \"\";\r\n    addIcon = addIcon ? <Icon type={addIcon} /> : null;\r\n\r\n    let editText = config.editText || \"编辑\";\r\n    let editIcon = config.editIcon || \"\";\r\n    editIcon = editIcon ? <Icon type={editIcon} /> : null;\r\n\r\n    let deleteText = config.deleteText || \"删除\";\r\n    let deleteIcon = config.deleteIcon || \"\";\r\n    deleteIcon = deleteIcon ? <Icon type={deleteIcon} /> : null;\r\n\r\n    if (isEditing) {\r\n      w = 160;\r\n      buttons.push(\r\n        <Button\r\n          key={\"_btnOk\"}\r\n          loading={this.state.editSaveLoading}\r\n          onClick={this.completeEdit}\r\n          style={{ ...itemStyle }}\r\n        >\r\n          {okIcon}\r\n          {okText}\r\n        </Button>\r\n      );\r\n      buttons.push(\r\n        <Button key={\"_btnCancel\"} onClick={this.cancelEdit} style={itemStyle}>\r\n          {cancelIcon}\r\n          {cancelText}\r\n        </Button>\r\n      );\r\n    } else {\r\n      tools.forEach((d, i) => {\r\n        w += 80;\r\n\r\n        let styles = { ...itemStyle };\r\n\r\n        const menu = (\r\n          <Menu onClick={e => this.addRange(e.item.props.value)}>\r\n            <Menu.Item key=\"1\" value={5}>\r\n              5 行\r\n            </Menu.Item>\r\n            <Menu.Item key=\"2\" value={10}>\r\n              10 行\r\n            </Menu.Item>\r\n          </Menu>\r\n        );\r\n\r\n        if (d === \"addSingle\") {\r\n          buttons.push(\r\n            <Button\r\n              key={d + \"_1\"}\r\n              onClick={() => this.addRange(1)}\r\n              style={styles}\r\n            >\r\n              {addIcon}\r\n              {addText}\r\n            </Button>\r\n          );\r\n        }\r\n\r\n        if (d === \"add\") {\r\n          buttons.push(\r\n            <Dropdown key={d + \"_1\"} overlay={menu}>\r\n              <Button tool=\"add\" style={styles} onClick={() => this.addRange()}>\r\n                {addIcon} {addText}\r\n                <Icon type=\"down\" />\r\n              </Button>\r\n            </Dropdown>\r\n          );\r\n        }\r\n\r\n        if (d === \"edit\") {\r\n          buttons.push(\r\n            <Button key={d + \"_1\"} onClick={this.edit} style={styles}>\r\n              {editIcon}\r\n              {editText}\r\n            </Button>\r\n          );\r\n        }\r\n\r\n        if (d === \"delete\") {\r\n          buttons.push(\r\n            <Popconfirm\r\n              key={d}\r\n              title=\"确定删除选中的数据吗？\"\r\n              okText=\"确定\"\r\n              cancelText=\"取消\"\r\n              onConfirm={this.delete}\r\n            >\r\n              <Button\r\n                style={styles}\r\n                loading={this.state.deleteLoading}\r\n                onClick={e => {\r\n                  e.stopPropagation();\r\n                }}\r\n              >\r\n                {deleteIcon}\r\n                {deleteText}\r\n              </Button>\r\n            </Popconfirm>\r\n          );\r\n        }\r\n\r\n        if (typeof d === \"function\") {\r\n          buttons.push(\r\n            <span style={styles} key={\"_fnTools_\" + i}>\r\n              {d()}\r\n            </span>\r\n          );\r\n        }\r\n\r\n        if (typeof d === \"object\" && d !== null) {\r\n          let toolIcon = d.icon;\r\n          toolIcon = toolIcon ? <Icon type={toolIcon} /> : null;\r\n          let toolAttr = d.props || {};\r\n          buttons.push(\r\n            <Button\r\n              key={\"_objTools_\" + i}\r\n              onClick={d.handler}\r\n              style={styles}\r\n              {...toolAttr}\r\n            >\r\n              {toolIcon}\r\n              {d.text}\r\n            </Button>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    if (buttons.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return <div>{buttons}</div>;\r\n  };\r\n\r\n  getProps = () => {\r\n    let props = this.props || {};\r\n    let newProps = Object.assign({}, props);\r\n\r\n    return newProps;\r\n  };\r\n\r\n  createToolBar = () => {\r\n    if (this.props.editable === true) {\r\n      let tools = this.editTools();\r\n\r\n      if (tools !== null) {\r\n        return (\r\n          <div\r\n            style={{\r\n              backgroundColor: \"#ffffff\"\r\n            }}\r\n          >\r\n            {tools}\r\n          </div>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  getDataRows = () => {\r\n    let { data, addedData, isAdding, isAddingRange, dataList } = this.state;\r\n\r\n    let arr = data;\r\n\r\n    let { isAppend, rowKey } = this.props;\r\n\r\n    let addedRows = [];\r\n\r\n    addedData.forEach(d => {\r\n      if (dataList.findIndex(c => c[rowKey] === d[rowKey]) <= -1) {\r\n        let r = d;\r\n        r.__isAddedRow = true;\r\n        addedRows.push(r);\r\n      }\r\n    });\r\n\r\n    if (isAdding === true || isAddingRange === true) {\r\n      if (isAppend === true) {\r\n        arr = [].concat(data).concat(addedRows);\r\n      } else {\r\n        arr = addedRows;\r\n      }\r\n    }\r\n\r\n    return arr;\r\n  };\r\n\r\n  updateRows = callback => {\r\n    let arr = [];\r\n\r\n    if (typeof callback === \"function\") {\r\n      let currData = this.getDataRows();\r\n\r\n      arr = callback(currData);\r\n\r\n      if (arr.length > 0) {\r\n        this.setState({\r\n          data: this.state.data\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  api = {\r\n    editAll: this.editAll,\r\n    addRange: this.addRange,\r\n    delete: this.delete,\r\n    reset: this.reset,\r\n    completeEdit: this.completeEdit,\r\n    cancelEdit: this.cancelEdit,\r\n    isEditing: this.isEditing,\r\n    getData: () => this.state.data\r\n  };\r\n\r\n  headerExtra = () => {\r\n    let header = null;\r\n\r\n    let { editToolsConfig = {} } = this.props;\r\n    let toolBarPosition = editToolsConfig.position;\r\n\r\n    if (toolBarPosition === \"top\") {\r\n      header = this.createToolBar();\r\n    }\r\n\r\n    return header;\r\n  };\r\n\r\n  footerExtra = () => {\r\n    let { editToolsConfig = {} } = this.props;\r\n    let toolBarPosition = editToolsConfig.position;\r\n\r\n    let toolBar = null;\r\n\r\n    if (toolBarPosition === \"bottom\") {\r\n      toolBar = this.createToolBar();\r\n    }\r\n\r\n    return toolBar;\r\n  };\r\n\r\n  render() {\r\n    let columns = this.formatColumns();\r\n\r\n    let arr = this.getDataRows();\r\n\r\n    let props = this.props;\r\n\r\n    let newProps = {\r\n      editable: true,\r\n      data: arr,\r\n      columns,\r\n      initRef: this.initRef,\r\n      headerExtra: this.headerExtra,\r\n      footerExtra: this.footerExtra\r\n    };\r\n\r\n    return <Table {...props} {...newProps} />;\r\n  }\r\n}\r\n\r\nexport default EditableTable;\r\n","import React from \"react\";\r\nimport FeaturedTable from \"./Editable\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./styles.css\";\r\n\r\nconst Table = React.forwardRef((props, ref) => (\r\n  <FeaturedTable {...props} ref={ref} />\r\n));\r\n\r\nTable.defaultProps = {\r\n  editable: false,\r\n  editTools: [\"edit\", \"add\"],\r\n  editToolsConfig: {\r\n    position: \"bottom\",\r\n    itemStyle: { marginLeft: \"5px\" },\r\n    editText: \"\",\r\n    editIcon: \"\",\r\n    addText: \"\",\r\n    addIcon: \"\",\r\n    deleteText: \"\",\r\n    deleteIcon: \"\",\r\n    okText: \"\",\r\n    okIcon: \"\",\r\n    cancelText: \"\",\r\n    cancelIcon: \"\"\r\n  },\r\n  defaultAddCount: 1,\r\n  isAppend: false,\r\n  validateTrigger: \"onSave\",\r\n  validateDelay: 300,\r\n  allowSaveEmpty: false,\r\n  dataControled: false,\r\n  alwaysValidate: false\r\n};\r\n\r\nTable.propTypes = {\r\n  /** 是否允许编辑 */\r\n  editable: PropTypes.bool,\r\n  /** 工具栏，工具按钮 ['edit', 'add','delete',{icon:\"\",text:\"\",props:{},handler:Function},Function] addSingle:单行新增 */\r\n  editTools: PropTypes.array,\r\n  /** 工具栏，工具按钮属性配置{ position: \"bottom\", itemStyle: { marginLeft: \"5px\" }, editText: \"\", editIcon: \"\", addText: \"\", addIcon: \"\", deleteText: \"\", deleteIcon: \"\", okText: \"\", okIcon: \"\", cancelText: \"\", cancelIcon: \"\" } */\r\n  editToolsConfig: PropTypes.object,\r\n  /** 新增行时，是追加，还是清空当前页数据 */\r\n  isAppend: PropTypes.bool,\r\n  /** 新增行时的默认条数 */\r\n  defaultAddCount: PropTypes.number,\r\n\r\n  /** 编辑确定事件 (changedRows,newRows,editType)=>void\r\n   * @param {Array} changedRows-改变的数据行\r\n   * @param {Array} newRows-改变后最新的数据\r\n   * @param {string} editType-编辑类型;\"edit\":编辑;\"add\":新增;\"delete\":删除\r\n   */\r\n  onEditSave: PropTypes.func,\r\n  /** 当没有改变行数据时，是否仍然执行onEditSave */\r\n  allowSaveEmpty: PropTypes.bool,\r\n  /** 验证时机 */\r\n  validateTrigger: PropTypes.oneOf([\"onChange\", \"onBlur\", \"onSave\"]),\r\n\r\n  /** 新增按钮前置事件，返回false不进入新增状态 ()=>bool */\r\n  onBeforeAdd: PropTypes.func,\r\n\r\n  /** 新增按钮事件 (addedData, newData)=>void\r\n   * @param {Array} addedData-添加的数据行\r\n   * @param {Array} newRows-添加后最新的数据\r\n   */\r\n  onAdd: PropTypes.func,\r\n\r\n  /** 新增时的行数据模板，可通过此项设置默认行数据 (rowIndex)=>object\r\n   * @param {numer} rowIndex\r\n   * @returns {object} 行对象\r\n   */\r\n  rowTemplate: PropTypes.func,\r\n\r\n  /** 编辑取消事件 */\r\n  onCancel: PropTypes.func,\r\n  /** 编辑按钮前置事件，返回false不进入编辑状态 */\r\n  onBeforeEdit: PropTypes.func,\r\n\r\n  /** 编辑按钮事件 */\r\n  onEdit: PropTypes.func,\r\n  /**\r\n   * 删除按钮前置事件,返回false 不可删除\r\n   */\r\n  onBeforeDelete: PropTypes.func,\r\n  /** 删除按钮事件 */\r\n  onDelete: PropTypes.func,\r\n  /** 无论是否存在输入变化，是否始终验证 */\r\n  alwaysValidate: PropTypes.bool,\r\n  /** 数据是否完全受控，如若受控，请在onEditSave、onCancel中自行更新数据源 */\r\n  dataControled: PropTypes.bool\r\n};\r\n\r\nexport default Table;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Pagination from \"antd/lib/pagination\";\r\nimport Button from \"antd/lib/button\";\r\nimport \"antd/dist/antd.css\";\r\nimport \"./styles.css\";\r\n\r\nclass Pager extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      current: props.current || 1,\r\n      pageSize: props.pageSize,\r\n      total: props.total\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n\r\n    if (\"current\" in nextProps) {\r\n      nextState.current = nextProps.current;\r\n    }\r\n\r\n    if (\"pageSize\" in nextProps) {\r\n      nextState.pageSize = nextProps.pageSize;\r\n    }\r\n\r\n    if (\"total\" in nextProps) {\r\n      nextState.total = nextProps.total;\r\n    }\r\n\r\n    if (Object.keys(nextState).length > 0) {\r\n      return nextState;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  onShowSizeChange = (pageIndex, pageSize) => {\r\n    if (typeof this.props.onPageChange === \"function\") {\r\n      this.props.onPageChange(pageIndex, pageSize);\r\n    }\r\n  };\r\n\r\n  onRefresh = () => {\r\n    let { current, pageSize } = this.state;\r\n\r\n    if (typeof this.props.onRefresh === \"function\") {\r\n      this.props.onRefresh(current, pageSize);\r\n    }\r\n  };\r\n\r\n  onPageIndexChange = (pageIndex, pageSize) => {\r\n    if (typeof this.props.onPageChange === \"function\") {\r\n      this.props.onPageChange(pageIndex, pageSize);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let { pageSize, current, total } = this.state;\r\n\r\n    let pagerAttr = {\r\n      ...this.props,\r\n      showSizeChanger: true,\r\n      onShowSizeChange: this.onShowSizeChange,\r\n      onChange: this.onPageIndexChange,\r\n      pageSize,\r\n      current,\r\n      total\r\n    };\r\n\r\n    let refreshButton = (\r\n      <Button\r\n        style={{ verticalAlign: \"middle\" }}\r\n        icon=\"reload\"\r\n        onClick={this.onRefresh}\r\n      />\r\n    );\r\n\r\n    let start = pageSize * (current - 1) + 1;\r\n    let end = pageSize * current;\r\n    end = end > total ? total : end;\r\n\r\n    let totalCount = total;\r\n\r\n    if (total <= 0) {\r\n      start = 0;\r\n      end = 0;\r\n      totalCount = 0;\r\n    }\r\n\r\n    let totalInfo = (\r\n      <div className=\"tablex__pager__count\">\r\n        显示 {start}-{end}，共 {totalCount} 条\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className=\"tablex__pager\">\r\n        <div className=\"tablex__pager__number\">\r\n          <Pagination {...pagerAttr} />\r\n          {refreshButton}\r\n        </div>\r\n        {totalInfo}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPager.defaultProps = {\r\n  current: 1,\r\n  pageSize: 10,\r\n  total: 0,\r\n  pageSizeOptions: [\"10\", \"20\", \"30\", \"40\"],\r\n  onPageChange: () => {}\r\n};\r\n\r\nPager.propTypes = {\r\n  /** 当前页数 */\r\n  current: PropTypes.number.isRequired,\r\n  /** 每页条数 */\r\n  pageSize: PropTypes.number.isRequired,\r\n  /** 数据总数 */\r\n  total: PropTypes.number,\r\n  /** 页码，页大小改变事件 */\r\n  onPageChange: PropTypes.func,\r\n  /** 指定每页可以显示多少条 */\r\n  pageSizeOptions: PropTypes.array\r\n};\r\n\r\nexport default Pager;\r\n","function getTime() {\r\n  let cd = new Date();\r\n\r\n  let y = cd.getFullYear();\r\n  let m = cd.getMonth() + 1;\r\n  m = m < 10 ? \"0\" + m : m;\r\n  let d = cd.getDate();\r\n  d = d < 10 ? \"0\" + d : d;\r\n  let h = cd.getHours();\r\n  h = h < 10 ? \"0\" + h : h;\r\n  let mi = cd.getMinutes();\r\n  mi = mi < 10 ? \"0\" + mi : mi;\r\n  let s = cd.getSeconds();\r\n  s = s < 10 ? \"0\" + s : s;\r\n\r\n  return y + \"/\" + m + \"/\" + d + \" \" + h + \":\" + mi + \":\" + s;\r\n}\r\n\r\nlet storageKey = \"__tablex_configs\";\r\nlet tableKey = \"tableId\";\r\nlet serverSaveFunctionName = \"__tablex_configs_save\";\r\n\r\nlet LocalConfig = {\r\n  get: function(key) {\r\n    let allConfigs = JSON.parse(\r\n      window.localStorage.getItem(storageKey) || \"[]\"\r\n    );\r\n    if (key) {\r\n      let config = allConfigs.find(d => d[tableKey] === key);\r\n      let settings = {};\r\n      if (config) {\r\n        if (typeof config === \"string\") {\r\n          settings = JSON.parse(config);\r\n        } else {\r\n          settings = config;\r\n        }\r\n      }\r\n      return settings;\r\n    }\r\n    return allConfigs;\r\n  },\r\n\r\n  set: function(key, configs) {\r\n    configs = Object.assign(configs, {\r\n      time: getTime(),\r\n      [tableKey]: key\r\n    });\r\n\r\n    let allConfigs = LocalConfig.get();\r\n    let i = allConfigs.findIndex(d => d[tableKey] === key);\r\n\r\n    if (i > -1) {\r\n      allConfigs[i] = Object.assign(allConfigs[i], configs);\r\n    } else {\r\n      allConfigs.push(configs);\r\n    }\r\n    window.localStorage.setItem(storageKey, JSON.stringify(allConfigs));\r\n    return configs;\r\n  },\r\n  remove: function(key) {\r\n    let allConfigs = LocalConfig.get();\r\n    let i = allConfigs.findIndex(d => d[tableKey] === key);\r\n    if (i > -1) {\r\n      allConfigs.splice(i, 1);\r\n      window.localStorage.setItem(storageKey, JSON.stringify(allConfigs));\r\n    }\r\n  }\r\n};\r\n\r\nexport function getConfigs(key) {\r\n  return LocalConfig.get(key);\r\n}\r\n\r\nexport function setConfigs(key, configs) {\r\n  return LocalConfig.set(key, configs);\r\n}\r\n\r\n//配置窗口 保存\r\nexport function saveConfigs(key, configs) {\r\n  let settedConfigs = LocalConfig.set(key, configs);\r\n\r\n  let serverSaveFn = window[serverSaveFunctionName];\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    if (typeof serverSaveFn === \"function\") {\r\n      serverSaveFn(key, settedConfigs).then(d => {\r\n        resolve();\r\n      });\r\n    } else {\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\n//配置窗口 重置\r\nexport function removeConfigs(key) {\r\n  let serverSaveFn = window[serverSaveFunctionName];\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    if (typeof serverSaveFn === \"function\") {\r\n      serverSaveFn(key, \"\").then(d => {\r\n        LocalConfig.remove(key);\r\n        resolve();\r\n      });\r\n    } else {\r\n      LocalConfig.remove(key);\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\nexport function treeToList(arr) {\r\n  let treeList = arr || [];\r\n\r\n  //末级节点\r\n  let leafs = [];\r\n\r\n  //根\r\n  let roots = [];\r\n\r\n  //所有节点\r\n  let list = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n\r\n    const childrens = d.children || [];\r\n\r\n    list.push(d);\r\n    roots.push(d);\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(d) {\r\n    const tempArr = d.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      list.push(d);\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d);\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return { list, leafs, roots };\r\n}\r\n\r\nexport function treeForEach(arr, fn) {\r\n  let treeList = arr || [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    let bl = fn(d, i);\r\n\r\n    if (bl === false) {\r\n      break;\r\n    }\r\n\r\n    if (d.children && d.children.length > 0) {\r\n      getChildren(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(node) {\r\n    const tempArr = node.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n\r\n      let bl = fn(d, i);\r\n\r\n      if (bl === false) {\r\n        break;\r\n      }\r\n\r\n      if (d.children && d.children.length > 0) {\r\n        getChildren(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return treeList;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Modal from \"antd/lib/modal\";\r\nimport Button from \"antd/lib/button\";\r\nimport InputNumber from \"antd/lib/input-number\";\r\nimport Radio from \"antd/lib/radio\";\r\nimport Switch from \"antd/lib/switch\";\r\nimport { saveConfigs, removeConfigs, treeToList } from \"./utils\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport orderBy from \"lodash/orderBy\";\r\n\r\nconst RadioGroup = Radio.Group;\r\nconst RadioButton = Radio.Button;\r\n\r\nconst reorder = (list, startIndex, endIndex) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n  userSelect: \"none\",\r\n  padding: 5,\r\n\r\n  background: isDragging ? \"#fce2c9\" : \"none\",\r\n  width: \"100%\",\r\n  ...draggableStyle\r\n});\r\n\r\nconst getListStyle = () => ({\r\n  width: \"100%\"\r\n});\r\n\r\nclass SortableItem extends Component {\r\n  onChangeWidth = e => {\r\n    let { onChangeWidth, data } = this.props;\r\n    onChangeWidth(e, data);\r\n  };\r\n\r\n  onChangeFixed = e => {\r\n    let { onChangeFixed, data } = this.props;\r\n    onChangeFixed(e, data);\r\n  };\r\n\r\n  onToggleVisible = e => {\r\n    let { onToggleVisible, data } = this.props;\r\n    onToggleVisible(e, data);\r\n  };\r\n\r\n  render() {\r\n    let itemStyles = {\r\n      display: \"inline-block\",\r\n      marginLeft: 10\r\n    };\r\n\r\n    let d = this.props.data;\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          borderBottom: \"1px solid #e8e8e8\",\r\n          width: \"100%\",\r\n          marginBottom: 5,\r\n          paddingBottom: 10\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"inline-block\",\r\n            width: \"30%\",\r\n            fontWeight: \"bold\",\r\n            padding: \"5px 0 0px 0px\"\r\n          }}\r\n        >\r\n          {d.title}\r\n        </div>\r\n        <div\r\n          style={{ display: \"inline-block\", width: \"70%\", textAlign: \"right\" }}\r\n        >\r\n          <div style={itemStyles}>\r\n            宽度：\r\n            <InputNumber\r\n              value={d.width}\r\n              style={{ width: 80 }}\r\n              onChange={this.onChangeWidth}\r\n            />\r\n          </div>\r\n          <div style={itemStyles}>\r\n            冻结：\r\n            <RadioGroup\r\n              size=\"small\"\r\n              value={d.fixed || \"none\"}\r\n              onChange={this.onChangeFixed}\r\n            >\r\n              <RadioButton value=\"left\">左</RadioButton>\r\n              <RadioButton value=\"none\">无</RadioButton>\r\n              <RadioButton value=\"right\">右</RadioButton>\r\n            </RadioGroup>\r\n          </div>\r\n\r\n          <div style={{ ...itemStyles, position: \"relative\", bottom: \"2px\" }}>\r\n            <Switch\r\n              checkedChildren=\"显示\"\r\n              checked={!d.hidden}\r\n              unCheckedChildren=\"隐藏\"\r\n              onChange={this.onToggleVisible}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass SortableList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      items: []\r\n    };\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    return { items: nextProps.items };\r\n  }\r\n\r\n  onDragEnd(result) {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const items = reorder(\r\n      this.state.items,\r\n      result.source.index,\r\n      result.destination.index\r\n    );\r\n\r\n    this.props.onSort(items);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DragDropContext onDragEnd={this.onDragEnd}>\r\n        <Droppable droppableId=\"droppable\">\r\n          {(provided, snapshot) => (\r\n            <div\r\n              ref={provided.innerRef}\r\n              style={getListStyle(snapshot.isDraggingOver)}\r\n            >\r\n              {this.state.items.map((item, index) => (\r\n                <Draggable\r\n                  key={item.key || item.dataIndex}\r\n                  draggableId={item.key || item.dataIndex}\r\n                  index={index}\r\n                >\r\n                  {(provided, snapshot) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                      style={getItemStyle(\r\n                        snapshot.isDragging,\r\n                        provided.draggableProps.style\r\n                      )}\r\n                    >\r\n                      <SortableItem\r\n                        data={item}\r\n                        onChangeWidth={this.props.onChangeWidth}\r\n                        onChangeFixed={this.props.onChangeFixed}\r\n                        onToggleVisible={this.props.onToggleVisible}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </Draggable>\r\n              ))}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    );\r\n  }\r\n}\r\n\r\nclass SettingModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      propsOriginal: {},\r\n      visible: false,\r\n      loading: false,\r\n      resetLoading: false,\r\n      configs: {},\r\n      rawConfigs: {},\r\n      columns: [],\r\n      columnsOriginal: [],\r\n      columnsLeafs: []\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (prevState.propsOriginal !== nextProps) {\r\n      let nextState = {};\r\n\r\n      nextState.propsOriginal = nextProps;\r\n\r\n      let arr = nextProps.columns || [];\r\n\r\n      nextState.columnsOriginal = arr;\r\n\r\n      let columns = cloneDeep(arr);\r\n\r\n      nextState.rawConfigs = nextProps.configs || {};\r\n      let configs = cloneDeep(nextProps.configs || {});\r\n\r\n      let { leafs } = treeToList(columns);\r\n\r\n      leafs.forEach((d, i) => {\r\n        let columnKey = d.key || d.dataIndex;\r\n        let config = configs[columnKey] || {};\r\n        if (\"fixed\" in config) {\r\n          d.fixed = config.fixed;\r\n        }\r\n        if (\"width\" in config) {\r\n          d.width = config.width;\r\n        }\r\n        if (\"hidden\" in config) {\r\n          d.hidden = config.hidden;\r\n        }\r\n\r\n        if (\"order\" in config) {\r\n          d.order = config.order;\r\n        } else {\r\n          d.order = i;\r\n        }\r\n      });\r\n\r\n      let columnsArr = orderBy(columns, [\"order\"], [\"asc\"]);\r\n      nextState.columns = columnsArr;\r\n\r\n      leafs = orderBy(leafs, [\"order\"], [\"asc\"]);\r\n\r\n      nextState.columnsLeafs = leafs;\r\n\r\n      nextState.configs = configs;\r\n\r\n      return nextState;\r\n    } else {\r\n      let nextState = {};\r\n\r\n      let columns = prevState.columns;\r\n      let { leafs } = treeToList(columns);\r\n      let configs = prevState.configs;\r\n\r\n      leafs.forEach((d, i) => {\r\n        let columnKey = d.key || d.dataIndex;\r\n        let config = configs[columnKey] || {};\r\n        if (\"fixed\" in config) {\r\n          d.fixed = config.fixed;\r\n        }\r\n        if (\"width\" in config) {\r\n          d.width = config.width;\r\n        }\r\n        if (\"hidden\" in config) {\r\n          d.hidden = config.hidden;\r\n        }\r\n\r\n        if (\"order\" in config) {\r\n          d.order = config.order;\r\n        } else {\r\n          d.order = i;\r\n        }\r\n      });\r\n\r\n      leafs = orderBy(leafs, [\"order\"], [\"asc\"]);\r\n      nextState.columnsLeafs = leafs;\r\n\r\n      return nextState;\r\n    }\r\n  }\r\n\r\n  saveSettings = () => {\r\n    var { tableId, onSave, groupedColumnKey } = this.props;\r\n\r\n    if (!tableId) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ loading: true });\r\n\r\n    let { configs } = this.state;\r\n\r\n    saveConfigs(tableId, {\r\n      columnsConfig: configs\r\n    }).then(d => {\r\n      if (typeof onSave === \"function\") {\r\n        onSave(configs);\r\n      }\r\n      this.setState({ loading: false, visible: false });\r\n    });\r\n  };\r\n\r\n  reset = () => {\r\n    var { tableId, onReset } = this.props;\r\n\r\n    if (!tableId) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ resetLoading: true });\r\n\r\n    removeConfigs(tableId).then(d => {\r\n      if (typeof onReset === \"function\") {\r\n        onReset();\r\n      }\r\n      this.setState({ resetLoading: false });\r\n    });\r\n  };\r\n\r\n  toggle = () => {\r\n    let v = !this.state.visible;\r\n    this.setState({ visible: v });\r\n  };\r\n\r\n  onOk = () => {\r\n    this.saveSettings();\r\n  };\r\n\r\n  onCancel = () => {\r\n    this.setState({\r\n      visible: false,\r\n      columns: cloneDeep(this.state.columnsOriginal),\r\n      configs: cloneDeep(this.state.rawConfigs)\r\n    });\r\n  };\r\n\r\n  setConfig = (column, config) => {\r\n    let configs = this.state.configs || {};\r\n\r\n    let columnKey = column.key || column.dataIndex;\r\n\r\n    let prevConfig = configs[columnKey] || {};\r\n    let nextConfig = {\r\n      [columnKey]: Object.assign({}, prevConfig, config)\r\n    };\r\n\r\n    this.setState({\r\n      configs: { ...configs, ...nextConfig }\r\n    });\r\n  };\r\n\r\n  onChangeWidth = (value, column) => {\r\n    this.setConfig(column, { width: value });\r\n  };\r\n\r\n  onChangeFixed = (e, column) => {\r\n    this.setConfig(column, { fixed: e.target.value });\r\n  };\r\n\r\n  onToggleVisible = (bl, column) => {\r\n    this.setConfig(column, { hidden: !bl });\r\n  };\r\n\r\n  onSort = items => {\r\n    let configs = this.state.configs || {};\r\n\r\n    items.forEach((d, index) => {\r\n      // d.order = index;\r\n\r\n      let columnKey = d.key || d.dataIndex;\r\n      let config = configs[columnKey];\r\n      if (config) {\r\n        config.order = index;\r\n      } else {\r\n        configs[columnKey] = { order: index };\r\n      }\r\n    });\r\n\r\n    this.setState({ configs });\r\n  };\r\n\r\n  render() {\r\n    let { visible, columnsLeafs } = this.state;\r\n\r\n    let leafs = columnsLeafs.filter(d => d.settable !== false);\r\n\r\n    let attrs = {\r\n      visible: visible,\r\n      title: \"表格配置\",\r\n      onOk: this.onOk,\r\n      onCancel: this.onCancel,\r\n      width: \"720px\",\r\n      bodyStyle: {\r\n        minHeight: \"300px\",\r\n        maxHeight: \"500px\",\r\n        overflow: \"auto\"\r\n      },\r\n      maskClosable: false,\r\n      footer: (\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Button\r\n            type=\"primary\"\r\n            loading={this.state.resetLoading}\r\n            onClick={this.reset}\r\n          >\r\n            重置\r\n          </Button>\r\n          <Button\r\n            loading={this.state.loading}\r\n            type=\"primary\"\r\n            onClick={this.onOk}\r\n            style={{ marginLeft: 20 }}\r\n          >\r\n            确定\r\n          </Button>\r\n          <Button style={{ marginLeft: 20 }} onClick={this.onCancel}>\r\n            取消\r\n          </Button>\r\n        </div>\r\n      )\r\n    };\r\n\r\n    return (\r\n      <Modal {...attrs}>\r\n        <SortableList\r\n          items={leafs}\r\n          onSort={this.onSort}\r\n          onChangeWidth={this.onChangeWidth}\r\n          onChangeFixed={this.onChangeFixed}\r\n          onToggleVisible={this.onToggleVisible}\r\n        />\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SettingModal;\r\n","import React, { useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Button from \"antd/lib/button\";\r\nimport Modal from \"./modal\";\r\nimport { getConfigs, setConfigs } from \"./utils\";\r\n\r\nconst Setting = props => {\r\n  const modalRef = useRef();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Button\r\n        icon=\"setting\"\r\n        onClick={() => {\r\n          modalRef.current.toggle();\r\n        }}\r\n      />\r\n      {createPortal(<Modal {...props} ref={modalRef} />, document.body)}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Setting;\r\nexport { getConfigs };\r\nexport { setConfigs };\r\n"],"sourceRoot":""}