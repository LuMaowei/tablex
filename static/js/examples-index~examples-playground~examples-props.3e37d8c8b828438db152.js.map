{"version":3,"sources":["E:/WebRoot/tablex/src/base/GroupHeader.js","E:/WebRoot/tablex/src/base/ExpandIcon.js","E:/WebRoot/tablex/src/base/Checkbox.js","E:/WebRoot/tablex/src/base/BaseTable.js","E:/WebRoot/tablex/src/base/index.js","E:/WebRoot/tablex/src/base/utils.js","E:/WebRoot/tablex/src/featured/pagination/index.js","E:/WebRoot/tablex/src/featured/ColumnDropMenu.js","E:/WebRoot/tablex/src/featured/setting/utils.js","E:/WebRoot/tablex/src/featured/setting/modal.js","E:/WebRoot/tablex/src/featured/setting/index.js","E:/WebRoot/tablex/src/featured/Table.js","E:/WebRoot/tablex/src/featured/Editable.js","E:/WebRoot/tablex/src/featured/index.js"],"names":["Column","_ref","cell","depth","columnDepth","headerHeight","h","dataIndex","react_default","a","createElement","className","style","height","ColumnGroup","_ref2","title","children","display","alignItems","justifyContent","borderRight","borderTop","renderChildren","_ref3","parent","cells","columnList","frozen","columns","filter","c","type","arguments","length","undefined","column","getTreeLeafs","findIndex","d","isForzen","GroupHeader_ColumnGroup","key","__depth","map","i","cellIndex","GroupHeader_Column","Object","assign","__placeholder__","__parents","renderColumns","_ref4","arr","GroupHeader","props","Fragment","MemoHeader","_ref5","_ref5$cells","_ref5$headerHeight","useMemo","ExpandLoading","viewBox","data-icon","width","fill","aria-hidden","focusable","ExpandIcon","loading","expandable","expanded","onExpand","isLeaf","cls","marginLeft","onClick","e","stopPropagation","Checkbox","indeterminate","onChange","value","checked","disabled","Table","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","getScrollbarSize","components","expandIconProps","rowData","rowKey","Array","state","loadingKeys","indexOf","isLoadingChildren","setLoadingChildren","bl","callback","nextKeys","toConsumableArray","push","splice","setState","data","cloneDeep","loadChildrenData","row","fn","res","constructor","name","then","childrens","onRowExpand","rowIndex","headerRenderer","headerIndex","base_GroupHeader","rowHeight","onScroll","scrollLeft","horizontalScrollDirection","getRowsByKeys","keys","rows","_this$state","flatData","forEach","k","find","r","isSingleSelect","selectMode","isMultipleSelect","isDisabledSelect","disabledSelectKeys","isExtraColumn","onSelectChange","selectedRowKeys","concat","rowEventHandlers","event","o","isSelected","isDisabledCheck","onCheckChange","checkStrictly","addChecked","removeChecked","onCheckAllChange","addAllChecked","removeAllChecked","_this$state2","nextSelected","halfCheckedKeys","parentKeys","p","checkboxCellRender","_ref6","_this$state3","attr","base_Checkbox","checkboxHeadRender","_ref7","_this$state4","isCheckedAll","orderNumberCellRender","_ref8","rowClassName","_ref9","_this$state5","rowSelectClassName","tempCls","record","index","join","tableApi","getSelectedKeys","prevProps","orderNumber","striped","showHeader","bordered","expandColumnKey","initRef","assertThisInitialized","_this$state6","_addCheckedKeyWithDis","addCheckedKeyWithDisabled","nextHalflCheckedKeys","_this$state7","_removeCheckedKey","removeCheckedKey","dataKey","_this$state8","checkboxColumn","__type","orderNumberColumn","cellRenderer","attrs","fixed","classPrefix","overscanRowCount","flexShrink","flexGrow","es","nextProps","prevState","resizable","nextState","_nextState","extraColumns","unshift","align","columnsArr","_treeToList","treeToList","leafs","maxDepth","list","hasFrozenLeft","hasOwnProperty","render","_ref10","cellData","columnIndex","React","isValidElement","defineProperty","Component","AutoResizeTable","_ref11","BaseTable_Table","BaseTable","defaultProps","dataSource","idField","treeList","roots","getChildren","item","parents","tempArr","__parent","sortedArr","sort","b","treeToFlatten","listToTree","pidField","tree","id","y","_loop","nextId","len","getDataListWithExpanded","expandedKeys","setChildren","cArr","treeFilter","node","nextChildrens","getScrollbarWidth","navigator","userAgent","scrollbarWidth","oP","document","styles","overflowY","body","appendChild","offsetWidth","clientWidth","remove","addCheckedKey","nextHalfCheckedKeys","halfIndex","parentHalfCheckedKeys","childrenSelectedKeys","ck","_loop2","pNode","childrensAllChecked","cKey","j","newHalflCheckedKeys","childrenKeys","_loop3","m","_loop4","childrensAllUnChecked","_ref3$disabledSelectK","isEnabled","itemKey","parentEnableSelect","pArr","isEnableSelect","_loop5","__webpack_require__","__webpack_exports__","Pager","onShowSizeChange","pageIndex","pageSize","onPageChange","onRefresh","current","onPageIndexChange","total","pagerAttr","objectSpread","showSizeChanger","refreshButton","button_default","verticalAlign","icon","start","end","totalCount","totalInfo","pagination_default","pageSizeOptions","SubMenu","Menu","HeadDropMenu","columnKey","config","onFilterColumnChange","hidden","columnsFilter","_this$props","columnsConfig","columnsOptions","defaultChecked","isHide","checkbox_default","target","handleClick","domEvent","keyPath","1","2","3","6","grouped","7","lineHeight","padding","_this$props$options","options","pinable","filterable","groupable","menu_default","forceSubMenuRender","mode","onTitleClick","Item","getTime","cd","Date","getFullYear","getMonth","getDate","getHours","mi","getMinutes","s","getSeconds","serverSaveFunctionName","LocalConfig","get","allConfigs","JSON","parse","window","localStorage","getItem","settings","set","configs","time","setItem","stringify","getConfigs","setConfigs","saveConfigs","settedConfigs","serverSaveFn","Promise","resolve","reject","removeConfigs","treeForEach","RadioGroup","Radio","Group","RadioButton","Button","SortableItem","onChangeWidth","onChangeFixed","_this$props2","onToggleVisible","_this$props3","itemStyles","borderBottom","marginBottom","paddingBottom","fontWeight","textAlign","input_number_default","size","position","bottom","switch_default","checkedChildren","unCheckedChildren","SortableList","_this2","items","onDragEnd","bind","result","destination","startIndex","endIndex","from","_result$splice","removed","slicedToArray","reorder","source","onSort","_this3","react_beautiful_dnd_esm","droppableId","provided","snapshot","ref","innerRef","isDraggingOver","draggableId","draggableProps","dragHandleProps","isDragging","draggableStyle","userSelect","background","modal_SortableItem","placeholder","SettingModal","_this4","saveSettings","_this4$props","tableId","onSave","groupedColumnKey","visible","reset","_this4$props2","onReset","resetLoading","toggle","v","onOk","onCancel","columnsOriginal","rawConfigs","setConfig","prevConfig","nextConfig","order","propsOriginal","columnsLeafs","settable","bodyStyle","minHeight","maxHeight","overflow","maskClosable","footer","modal_default","modal_SortableList","orderBy","Setting","modalRef","useRef","createPortal","setting_modal","EditableTable","dropdown_button_ref","createRef","pagination","columnSettingMenuShow","click","columnMenu","dataset","columnkey","trigger","offsetX","clientX","offsetY","clientY","columnSettingMenuHide","onColumnResize","onColumnChange","newConfigs","formatColumns","data-columnkey","saveConfig","resetConfig","renderHeader","header","headerExtra","renderFooter","pageAttr","footerExtra","dataTotal","hasPager","hasPagination","pager","settingButton","marginRight","setting","rawColumns","featured_pagination","_this$state$paginatio","Math","floor","getMaxCurrent","_","getCurrentPageData","newProps","columnMenuState","base","popover_default","onVisibleChange","content","ColumnDropMenu","arrowPointAtCenter","placement","left","top","newPagination","rowsAttributes","tableRef","inst","isEditing","updateComponent","dataList","addedData","delayTimer","delayUpdate","delay","validateDelay","clearTimeout","setTimeout","isMouseFocus","changedRows","addToChanged","newRow","validateTrigger","validateRow","editChange","newValues","setRowAttr","fRow","__attribute","merge","newAttr","getRowAttr","getValidate","validatorAsync","validation","validator","valid","msg","message","validateAsync","all","datas","validate","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","sent","abrupt","stop","validateAll","_callee2","editKeys","isEditAll","allData","_context2","editorInstance","setEditorIns","ins","ed","getEditorIns","editingVisible","cols","editor","renderFn","renderProps","newRenderProps","colSpan","values","onKeyDown","tooltip_default","editAll","endEdit","callBack","editSaveLoading","isAdding","isAddingRange","sourceData","editType","cancelEdit","editRows","getChangedRows","getRows","addRow","editting","addRows","newEditKeys","newAddedData","rowKeys","rowTemplate","setRows","focusInput","input","select","focus","el","ReactDom","findDOMNode","inputEl","getElementsByTagName","getNextEditor","keyCode","nextEditor","currIndex","nextRow","currColumnIndex","nextColumn","currEditor","getRealOpenState","completeEdit","_callee3","allowSaveEmpty","alwaysValidate","newRows","addedRows","onEditSave","_context3","__isAddedRow","error","_x","apply","edit","onBeforeEdit","onEdit","selectedKeys","onBeforeDelete","warn","newData","deletedRows","deleteLoading","onDelete","addRange","rowCount","defaultAddCount","isAppend","onBeforeAdd","addCount","onAdd","editTools","tools","editToolsConfig","buttons","itemStyle","okText","okIcon","icon_default","cancelText","cancelIcon","addText","addIcon","editText","editIcon","deleteText","deleteIcon","menu","dropdown_default","overlay","tool","popconfirm_default","onConfirm","toolIcon","toolAttr","handler","text","getProps","createToolBar","editable","backgroundColor","getDataRows","_this$state9","updateRows","api","delete","getData","_this$props$editTools","_this$props$editTools2","toolBar","dataControled","forwardRef","Editable","propTypes","PropTypes","bool","oneOfType","object","array","number","func","oneOf","propName","componentName","count","tbs","getElementsByClassName","tb","getAttribute","Error"],"mappings":"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","file":"static/js/examples-index~examples-playground~examples-props.66c8b95c.js","sourcesContent":["import React, { useMemo } from \"react\";\r\nimport { getTreeLeafs } from \"./utils\";\r\n\r\nconst Column = ({ cell, depth, columnDepth, headerHeight, dataIndex }) => {\r\n  let h = (columnDepth - depth + 1) * headerHeight;\r\n\r\n  return (\r\n    <div className=\"tablex-head-column\" style={{ height: h }} >\r\n      {cell}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ColumnGroup = ({ title, children, headerHeight }) => {\r\n  return (\r\n    <div className=\"tablex-head-group\" style={{ display: \"block\" }}>\r\n      <div\r\n        style={{\r\n          height: headerHeight,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          borderRight: \"1px solid #eeeeee\"\r\n        }}\r\n      >\r\n        {title}\r\n      </div>\r\n      <div\r\n        style={{\r\n          height: headerHeight,\r\n          display: \"flex\",\r\n          borderTop: \"1px solid #eeeeee\"\r\n        }}\r\n      >\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst isForzen = (type = \"\", column) => {\r\n  let bl = false;\r\n\r\n  let leafs = getTreeLeafs([column]);\r\n\r\n  bl = leafs.findIndex(d => d.frozen === type) > -1;\r\n\r\n  return bl;\r\n};\r\n\r\nconst renderChildren = ({\r\n  parent,\r\n  headerHeight,\r\n  columnDepth,\r\n  cells,\r\n  columnList,\r\n  frozen\r\n}) => {\r\n  let columns = parent.children || [];\r\n\r\n  if (frozen === \"right\" || frozen === \"left\") {\r\n    columns = columns.filter(c => isForzen(frozen, c));\r\n  } \r\n\r\n  if (columns.length > 0) {\r\n    return (\r\n      <ColumnGroup\r\n        key={parent.key}\r\n        title={parent.title}\r\n        depth={parent.__depth}\r\n        columnDepth={columnDepth}\r\n        headerHeight={headerHeight}\r\n      >\r\n        {columns.map((d, i) => {\r\n          let childrens = d.children || [];\r\n\r\n          if (childrens.length > 0) {\r\n            return renderChildren({\r\n              parent: d,\r\n              headerHeight,\r\n              columnDepth,\r\n              cells,\r\n              columnList,\r\n              frozen\r\n            });\r\n          } else {\r\n            let cellIndex = columnList.findIndex(c => c.key === d.key);\r\n            let column = columnList[cellIndex] || {};\r\n            if (frozen !== \"left\" && frozen !== \"right\") {\r\n              if (d.frozen === \"left\" || d.frozen === \"right\") {\r\n                if (column.__placeholder__ !== true) {\r\n                }\r\n\r\n                if (d.__parents && d.__parents.length > 0) {\r\n                }\r\n                return null;\r\n              }\r\n            }\r\n\r\n            return (\r\n              <Column\r\n                key={d.dataIndex || i}\r\n                {...d}\r\n                cell={cells[cellIndex]}\r\n                depth={d.__depth}\r\n                columnDepth={columnDepth}\r\n                headerHeight={headerHeight}\r\n              />\r\n            );\r\n          }\r\n        })}\r\n      </ColumnGroup>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\nconst renderColumns = ({\r\n  columns,\r\n  cells,\r\n  columnList,\r\n  columnDepth,\r\n  headerHeight\r\n}) => {\r\n  let frozen = \"\";\r\n  let arr = columnList.filter(d => !d.__placeholder__);\r\n  if (arr[0]) {\r\n    frozen = arr[0].frozen || \"middle\";\r\n  }\r\n\r\n  if (frozen === \"middle\") {\r\n    //console.log(\"renderColumns:\", cells);\r\n  }\r\n\r\n  return columns.map((d, i) => {\r\n    let cellIndex = columnList.findIndex(c => c.key === d.key);\r\n\r\n    let children = d.children || [];\r\n\r\n    if (children.length > 0) {\r\n      return renderChildren({\r\n        parent: d,\r\n        headerHeight,\r\n        columnDepth,\r\n        cells,\r\n        columnList,\r\n        frozen\r\n      });\r\n    } else {\r\n      if (frozen === \"middle\") {\r\n      }\r\n\r\n      if (\r\n        columnList[cellIndex] &&\r\n        columnList[cellIndex].__placeholder__ === true\r\n      ) {\r\n        if (columnList[cellIndex].frozen === \"right\") {\r\n          return null;\r\n        }\r\n\r\n        return cells[cellIndex];\r\n      }\r\n\r\n      return (\r\n        <Column\r\n          key={d.dataIndex || i}\r\n          {...d}\r\n          cell={cells[cellIndex]}\r\n          depth={d.__depth}\r\n          columnDepth={columnDepth}\r\n          headerHeight={headerHeight}\r\n        />\r\n      );\r\n    }\r\n  });\r\n};\r\n\r\nfunction GroupHeader(props) {\r\n  return <React.Fragment>{renderColumns(props)}</React.Fragment>;\r\n}\r\n\r\nconst MemoHeader = ({\r\n  cells = [],\r\n  columns,\r\n  columnList,\r\n  columnDepth,\r\n  headerHeight = 40\r\n}) => {\r\n  const memoizedValue = useMemo(() => {\r\n    return (\r\n      <GroupHeader\r\n        cells={cells}\r\n        columns={columns}\r\n        columnList={columnList}\r\n        columnDepth={columnDepth}\r\n        headerHeight={headerHeight}\r\n      />\r\n    );\r\n  }, [cells]);\r\n\r\n  return memoizedValue;\r\n};\r\n\r\nexport default MemoHeader;\r\n","import React from \"react\";\r\n\r\nfunction ExpandLoading() {\r\n  return (\r\n    <svg\r\n      viewBox=\"0 0 1024 1024\"\r\n      className=\"tablex-loading-icon\"\r\n      data-icon=\"loading\"\r\n      width=\"1em\"\r\n      height=\"1em\"\r\n      fill=\"currentColor\"\r\n      aria-hidden=\"true\"\r\n      focusable=\"false\"\r\n    >\r\n      <path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nconst ExpandIcon = props => {\r\n  let { loading, expandable, expanded, onExpand, isLeaf, depth } = props;\r\n\r\n  let cls = \"tablex__expandicon\";\r\n\r\n  if (loading === true) {\r\n    return <ExpandLoading style={{ marginLeft: depth * 20 }} />;\r\n  }\r\n\r\n  if (expandable === undefined) {\r\n    return null;\r\n  }\r\n\r\n  if (isLeaf === false) {\r\n    if (expanded === true) {\r\n      cls += \" expanded\";\r\n    } else {\r\n      cls += \" collapsed\";\r\n    }\r\n  } else {\r\n    cls = \"tablex__expandicon--placeholder\";\r\n  }\r\n\r\n  return (\r\n    <span\r\n      className={cls}\r\n      style={{ marginLeft: depth * 20 }}\r\n      onClick={e => {\r\n        e.stopPropagation();\r\n        onExpand(!expanded);\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ExpandIcon;\r\n","import React from \"react\";\r\n\r\nconst Checkbox = props => {\r\n    let { indeterminate, onChange, value, checked, disabled } = props;\r\n\r\n    let cls = \"\";\r\n\r\n    if (indeterminate === true) {\r\n        cls = \"tablex__checkbox--indeterminate\";\r\n    }\r\n\r\n    if (checked === true) {\r\n        cls = \"tablex__checkbox--checked\";\r\n    }\r\n\r\n    if (disabled === true) {\r\n        cls = \"tablex__checkbox--disabled\";\r\n    }\r\n\r\n    return (\r\n        <span\r\n            className={\"tablex__checkbox \" + cls}\r\n            onClick={e => {\r\n                e.stopPropagation();\r\n                if (typeof onChange === \"function\" && disabled != true) {\r\n                    onChange(!checked, props.value);\r\n                }\r\n            }}\r\n        >\r\n            <input\r\n                type=\"checkbox\"\r\n                value={value}\r\n                disabled={disabled}\r\n                className=\"tablex__checkbox__input\"\r\n            />\r\n            <span className=\"tablex__checkbox__inner\" />\r\n        </span>\r\n    );\r\n};\r\n\r\nexport default Checkbox;\r\n","import React from \"react\";\r\nimport BaseTable, { AutoResizer, unflatten } from \"react-base-table\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport {\r\n  treeToList,\r\n  removeCheckedKey,\r\n  addCheckedKeyWithDisabled\r\n} from \"./utils\";\r\nimport TableHeader from \"./GroupHeader\";\r\nimport ExpandIcon from \"./ExpandIcon\";\r\nimport Checkbox from \"./Checkbox\";\r\nimport \"./styles.css\";\r\n\r\nclass Table extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      columns: [],\r\n      columnList: [],\r\n      columnDepth: 0,\r\n      data: [],\r\n      flatData: [],\r\n      loadingKeys: [],\r\n      prevProps: null,\r\n      rowHeight: 40,\r\n      selectedRowKeys: [],\r\n      disabledSelectKeys: [],\r\n      halfCheckedKeys: [],\r\n      selectMode: \"\",\r\n      rowKey: \"\",\r\n      orderNumber: false,\r\n      checkStrictly: false,\r\n      striped: true,\r\n      showHeader: true,\r\n      bordered: true,\r\n      rowSelectClassName: \"\",\r\n      expandColumnKey: \"\"\r\n    };\r\n\r\n    if (typeof props.initRef === \"function\") {\r\n      props.initRef(this);\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let {\r\n      rowKey,\r\n      columns,\r\n      loading,\r\n      selectMode,\r\n      disabledSelectKeys,\r\n      orderNumber,\r\n      checkStrictly,\r\n      resizable,\r\n      striped,\r\n      showHeader,\r\n      bordered,\r\n      rowHeight,\r\n      rowSelectClassName,\r\n      expandColumnKey\r\n    } = nextProps;\r\n\r\n    let data = nextProps.data || [];\r\n\r\n    let nextState = null;\r\n\r\n    if (prevState.prevProps !== nextProps) {\r\n      let extraColumns = [];\r\n\r\n      //\r\n      if (selectMode === \"multiple\") {\r\n        extraColumns.unshift({\r\n          key: \"__checkbox_column\",\r\n          dataKey: \"__checkbox_column\",\r\n          __type: \"__checkbox_column\",\r\n          width: 50,\r\n          align: \"center\"\r\n        });\r\n      }\r\n\r\n      if (orderNumber === true) {\r\n        extraColumns.unshift({\r\n          key: \"__ordernumber_column\",\r\n          dataIndex: \"__ordernumber_column\",\r\n          __type: \"__ordernumber_column\",\r\n          width: 50,\r\n          title: \"序号\",\r\n          align: \"center\"\r\n        });\r\n      }\r\n      //\r\n\r\n      let columnsArr = [].concat(extraColumns).concat(columns);\r\n\r\n      let { leafs: columnList, maxDepth: columnDepth, list } = treeToList(\r\n        columnsArr,\r\n        \"key\"\r\n      );\r\n\r\n      let hasFrozenLeft = false;\r\n\r\n      //兼容antd table column的属性\r\n      list.forEach(d => {\r\n        d.frozen = d.fixed;\r\n        d.key = d.key || d.dataIndex;\r\n        d.dataKey = d.dataIndex;\r\n\r\n        if (d.fixed === \"left\") {\r\n          hasFrozenLeft = true;\r\n        }\r\n\r\n        if (!d.hasOwnProperty(\"resizable\")) {\r\n          d.resizable = resizable;\r\n        }\r\n\r\n        if (typeof d.render === \"function\") {\r\n          d.cellRenderer = ({\r\n            cellData,\r\n            columns,\r\n            column,\r\n            columnIndex,\r\n            rowData,\r\n            rowIndex\r\n          }) => {\r\n            let r = d.render(cellData, rowData, rowIndex);\r\n\r\n            if (React.isValidElement(r)) {\r\n              return r;\r\n            }\r\n\r\n            if (r && r.children) {\r\n              if (React.isValidElement(r.children)) {\r\n                return r.children;\r\n              }\r\n            }\r\n            return r;\r\n          };\r\n        }\r\n      });\r\n\r\n      if (hasFrozenLeft === true) {\r\n        extraColumns.forEach(d => {\r\n          d.fixed = \"left\";\r\n          d.frozen = \"left\";\r\n        });\r\n      }\r\n\r\n      //\r\n\r\n      let { list: dataArr } = treeToList(data, rowKey);\r\n\r\n      nextState = {\r\n        rowKey,\r\n        columns: columnsArr,\r\n        columnList: columnList,\r\n        columnDepth: columnDepth,\r\n        data: data,\r\n        flatData: dataArr,\r\n        loading: !!loading,\r\n        selectMode,\r\n        disabledSelectKeys,\r\n        rowKey,\r\n        orderNumber,\r\n        checkStrictly,\r\n        striped,\r\n        showHeader,\r\n        bordered,\r\n        rowHeight,\r\n        rowSelectClassName,\r\n        expandColumnKey\r\n      };\r\n\r\n      if (\"selectedRowKeys\" in nextProps) {\r\n        nextState.selectedRowKeys = nextProps.selectedRowKeys || [];\r\n      }\r\n\r\n      nextState.prevProps = nextProps;\r\n    }\r\n\r\n    return nextState;\r\n  }\r\n\r\n  getScrollbarSize = () => {\r\n    return 6;\r\n  };\r\n\r\n  components = {\r\n    ExpandIcon: ExpandIcon\r\n  };\r\n\r\n  expandIconProps = ({ rowData }) => {\r\n    let rowKey = this.props.rowKey;\r\n    let key = rowData[rowKey];\r\n\r\n    return {\r\n      rowKey: key,\r\n      rowData,\r\n      isLeaf: rowData.children instanceof Array ? false : true,\r\n      loading: this.state.loadingKeys.indexOf(key) > -1\r\n    };\r\n  };\r\n\r\n  /**\r\n   * 行是否正在加载子级\r\n   */\r\n  isLoadingChildren = key => {\r\n    let { loadingKeys } = this.state;\r\n\r\n    return loadingKeys.indexOf(key) > -1;\r\n  };\r\n\r\n  /**\r\n   * 设置行的子级加载状态\r\n   */\r\n  setLoadingChildren = (key, bl, callback) => {\r\n    let { loadingKeys } = this.state;\r\n\r\n    let i = loadingKeys.indexOf(key);\r\n\r\n    let nextKeys = [...loadingKeys];\r\n\r\n    if (bl === true) {\r\n      if (i === -1) {\r\n        nextKeys.push(key);\r\n      }\r\n    } else {\r\n      if (i > -1) {\r\n        nextKeys.splice(i, 1);\r\n      }\r\n    }\r\n\r\n    this.setState({\r\n      loadingKeys: nextKeys,\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  };\r\n\r\n  /**\r\n   * 异步加载子级数据\r\n   */\r\n  loadChildrenData = (key, row) => {\r\n    let fn = this.props.loadChildrenData;\r\n\r\n    if (typeof fn === \"function\") {\r\n      let res = fn(row);\r\n\r\n      if (res && res.constructor.name === \"Promise\") {\r\n        this.setLoadingChildren(key, true);\r\n\r\n        res.then(childrens => {\r\n          this.setLoadingChildren(key, false);\r\n        });\r\n\r\n        res.catch(e => {\r\n          this.setLoadingChildren(key, false);\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  onRowExpand = ({ expanded, rowData, rowIndex, rowKey }) => {\r\n    if (\r\n      rowData &&\r\n      rowData.children instanceof Array &&\r\n      rowData.children.length > 0\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (expanded === true) {\r\n      this.loadChildrenData(rowKey, rowData);\r\n    }\r\n  };\r\n\r\n  headerRenderer = ({ cells, columns, headerIndex }) => {\r\n    return (\r\n      <TableHeader\r\n        cells={cells}\r\n        columns={this.state.columns}\r\n        columnList={columns}\r\n        columnDepth={this.state.columnDepth}\r\n        headerIndex={headerIndex}\r\n        headerHeight={this.state.rowHeight}\r\n      />\r\n    );\r\n  };\r\n\r\n  onScroll = ({ scrollLeft, horizontalScrollDirection }) => {};\r\n\r\n  /** 通过rowKey获取数据行 */\r\n  getRowsByKeys = (keys = []) => {\r\n    let rows = [];\r\n    let { rowKey, flatData: arr } = this.state;\r\n\r\n    keys.forEach(k => {\r\n      let row = arr.find(r => r[rowKey] === k);\r\n      if (row != null) {\r\n        rows.push(Object.assign({}, row));\r\n      }\r\n    });\r\n\r\n    return rows;\r\n  };\r\n\r\n  /** 是否为单选 */\r\n  isSingleSelect = () => {\r\n    return this.state.selectMode === \"single\";\r\n  };\r\n\r\n  /** 是否为多选 */\r\n  isMultipleSelect = () => {\r\n    return this.state.selectMode === \"multiple\";\r\n  };\r\n\r\n  /** 当前行是否被禁用选择 */\r\n  isDisabledSelect = key => {\r\n    let bl = this.state.disabledSelectKeys.findIndex(d => d === key) > -1;\r\n    return bl;\r\n  };\r\n\r\n  /** 是否为自动添加的扩展列 */\r\n  isExtraColumn = (type = \"\") => {\r\n    return [\"__checkbox_column\", \"__ordernumber_column\"].indexOf(type) > -1;\r\n  };\r\n\r\n  onSelectChange = rowKey => {\r\n    let { selectedRowKeys } = this.state;\r\n    let i = selectedRowKeys.indexOf(rowKey);\r\n    let nextKeys = [].concat(selectedRowKeys);\r\n\r\n    if (this.isDisabledSelect(rowKey)) {\r\n      return;\r\n    }\r\n\r\n    if (this.isSingleSelect()) {\r\n      if (i > -1) {\r\n        nextKeys = [];\r\n      } else {\r\n        nextKeys = [rowKey];\r\n      }\r\n    } else if (this.isMultipleSelect()) {\r\n      if (i > -1) {\r\n        nextKeys.splice(i, 1);\r\n      } else {\r\n        nextKeys.push(rowKey);\r\n      }\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextKeys, this.getRowsByKeys(nextKeys), rowKey);\r\n    }\r\n\r\n    this.setState({ selectedRowKeys: nextKeys });\r\n  };\r\n\r\n  rowEventHandlers = {\r\n    onClick: ({ rowData, rowIndex, rowKey, event }) => {\r\n      let o = this.props.rowEventHandlers || {};\r\n\r\n      if (this.isSingleSelect()) {\r\n        this.onSelectChange(rowKey);\r\n      }\r\n\r\n      if (this.isMultipleSelect()) {\r\n        let { selectedRowKeys } = this.state;\r\n        let isSelected = selectedRowKeys.indexOf(rowKey) > -1;\r\n        let isEnabled = !this.isDisabledCheck(rowKey, rowData);\r\n        isEnabled && this.onCheckChange(!isSelected, rowKey);\r\n      }\r\n\r\n      if (typeof o.onClick === \"function\") {\r\n        o.onClick({ rowData, rowIndex, rowKey, event });\r\n      }\r\n    }\r\n  };\r\n\r\n  onCheckChange = (bl, value) => {\r\n    if (this.state.checkStrictly === false) {\r\n      this.onSelectChange(value);\r\n    } else {\r\n      if (bl === true) {\r\n        this.addChecked(value);\r\n      } else {\r\n        this.removeChecked(value);\r\n      }\r\n    }\r\n  };\r\n\r\n  /** 添加复选行 */\r\n  addChecked(key) {\r\n    let {\r\n      selectedRowKeys,\r\n      rowKey,\r\n      flatData,\r\n      halfCheckedKeys,\r\n      disabledSelectKeys\r\n    } = this.state;\r\n\r\n    let {\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys\r\n    } = addCheckedKeyWithDisabled({\r\n      key,\r\n      selectedRowKeys,\r\n      rowKey,\r\n      flatData,\r\n      halfCheckedKeys,\r\n      disabledSelectKeys\r\n    });\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextKeys, this.getRowsByKeys(nextKeys), rowKey);\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys,\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  }\r\n\r\n  /** 移除复选行 */\r\n  removeChecked(key) {\r\n    let { selectedRowKeys, rowKey, flatData, halfCheckedKeys } = this.state;\r\n\r\n    let {\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys\r\n    } = removeCheckedKey({\r\n      key,\r\n      selectedRowKeys,\r\n      rowKey,\r\n      flatData,\r\n      halfCheckedKeys\r\n    });\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextKeys, this.getRowsByKeys(nextKeys), rowKey);\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: nextKeys,\r\n      halfCheckedKeys: nextHalflCheckedKeys,\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  }\r\n\r\n  onCheckAllChange = bl => {\r\n    if (bl === true) {\r\n      this.addAllChecked();\r\n    } else {\r\n      this.removeAllChecked();\r\n    }\r\n  };\r\n\r\n  addAllChecked = () => {\r\n    let { rowKey, flatData } = this.state;\r\n    let nextSelected = [];\r\n    let arr = [];\r\n\r\n    flatData.forEach(d => {\r\n      let k = d[rowKey];\r\n\r\n      let bl = !this.isDisabledCheck(k, d);\r\n\r\n      if (bl) {\r\n        nextSelected.push(k);\r\n        arr.push(d);\r\n      }\r\n    });\r\n\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange(nextSelected, arr, \"\");\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: nextSelected,\r\n      halfCheckedKeys: [],\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  };\r\n\r\n  removeAllChecked = () => {\r\n    if (typeof this.props.onSelectChange === \"function\") {\r\n      this.props.onSelectChange([], [], \"\");\r\n    }\r\n\r\n    this.setState({\r\n      selectedRowKeys: [],\r\n      halfCheckedKeys: [],\r\n      data: cloneDeep(this.state.data)\r\n    });\r\n  };\r\n\r\n  /** 判断行/行父级是否被禁用选中 */\r\n  isDisabledCheck = (key, rowData) => {\r\n    let arr = this.state.disabledSelectKeys;\r\n    let bl = arr.indexOf(key) > -1;\r\n\r\n    if (bl === false) {\r\n      let parentKeys = rowData.__parents || [];\r\n\r\n      for (let i = 0; i < parentKeys.length; i++) {\r\n        const p = parentKeys[i];\r\n        if (arr.indexOf(p) > -1) {\r\n          bl = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return bl;\r\n  };\r\n\r\n  checkboxCellRender = ({ rowData }) => {\r\n    let { rowKey, selectedRowKeys, halfCheckedKeys } = this.state;\r\n    let key = rowData[rowKey];\r\n\r\n    let attr = {};\r\n\r\n    if (selectedRowKeys.indexOf(key) > -1) {\r\n      attr.checked = true;\r\n    }\r\n\r\n    if (halfCheckedKeys.indexOf(key) > -1) {\r\n      attr.indeterminate = true;\r\n    }\r\n\r\n    if (this.isDisabledCheck(key, rowData)) {\r\n      attr.disabled = true;\r\n    }\r\n\r\n    return (\r\n      <Checkbox\r\n        rowData={rowData}\r\n        value={key}\r\n        onChange={this.onCheckChange}\r\n        {...attr}\r\n      />\r\n    );\r\n  };\r\n\r\n  checkboxHeadRender = ({ rowData }) => {\r\n    let { selectedRowKeys, halfCheckedKeys, flatData, rowKey } = this.state;\r\n\r\n    let isCheckedAll = true;\r\n\r\n    for (let i = 0; i < flatData.length; i++) {\r\n      const key = flatData[i][rowKey];\r\n\r\n      if (this.isDisabledCheck(key, flatData[i])) {\r\n        continue;\r\n      }\r\n\r\n      if (selectedRowKeys.indexOf(key) === -1) {\r\n        isCheckedAll = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    let attr = {};\r\n\r\n    if (isCheckedAll === true) {\r\n      attr.checked = true;\r\n    } else {\r\n      if (selectedRowKeys.length > 0 || halfCheckedKeys.length > 0) {\r\n        attr.indeterminate = true;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <Checkbox rowData={rowData} {...attr} onChange={this.onCheckAllChange} />\r\n    );\r\n  };\r\n\r\n  orderNumberCellRender = ({ rowIndex }) => {\r\n    return <span>{rowIndex + 1}</span>;\r\n  };\r\n\r\n  rowClassName = ({ rowData, rowIndex }) => {\r\n    let { rowKey, selectedRowKeys, rowSelectClassName } = this.state;\r\n    let key = rowData[rowKey];\r\n    let isSelected = false;\r\n\r\n    if (selectedRowKeys.indexOf(key) > -1) {\r\n      isSelected = true;\r\n    }\r\n\r\n    let cls = [];\r\n\r\n    if (rowIndex % 2 === 0) {\r\n      cls.push(\"tablex__row--even\");\r\n    } else {\r\n      cls.push(\"tablex__row--odd\");\r\n    }\r\n\r\n    if (isSelected) {\r\n      cls.push(rowSelectClassName);\r\n    }\r\n\r\n    let tempCls = \"\";\r\n    if (typeof this.props.rowClassName === \"function\") {\r\n      tempCls = this.props.rowClassName(record, index);\r\n    }\r\n\r\n    tempCls && cls.push(tempCls);\r\n\r\n    return cls.join(\" \");\r\n  };\r\n\r\n  tableApi = {\r\n    getSelectedKeys: () => {\r\n      return this.state.selectedRowKeys;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let props = this.props;\r\n\r\n    let expandColumnKey = this.props.expandColumnKey;\r\n\r\n    if (!expandColumnKey && this.props.columns.length > 0) {\r\n      expandColumnKey = this.props.columns[0].dataKey;\r\n    }\r\n\r\n    let {\r\n      columnDepth,\r\n      columnList,\r\n      data,\r\n      rowHeight,\r\n      striped,\r\n      showHeader,\r\n      bordered\r\n    } = this.state;\r\n\r\n    let checkboxColumn = columnList.find(d => d.__type === \"__checkbox_column\");\r\n    let orderNumberColumn = columnList.find(\r\n      d => d.__type === \"__ordernumber_column\"\r\n    );\r\n\r\n    if (checkboxColumn) {\r\n      checkboxColumn.cellRenderer = this.checkboxCellRender;\r\n      checkboxColumn.headerRenderer = this.checkboxHeadRender;\r\n    }\r\n\r\n    if (orderNumberColumn) {\r\n      orderNumberColumn.cellRenderer = this.orderNumberCellRender;\r\n    }\r\n\r\n    let cls = [];\r\n\r\n    if (striped === true) {\r\n      cls.push(\"tablex__striped\");\r\n    }\r\n\r\n    if (bordered === true) {\r\n      cls.push(\"tablex__bordered\");\r\n    }\r\n\r\n    let headerHeight = (columnDepth + 1) * rowHeight;\r\n\r\n    let attrs = {\r\n      fixed: true,\r\n      data: data,\r\n      columns: columnList,\r\n      expandColumnKey: expandColumnKey,\r\n      className: cls.join(\" \"),\r\n      classPrefix: \"tablex\",\r\n      getScrollbarSize: this.getScrollbarSize,\r\n      expandIconProps: this.expandIconProps,\r\n      components: this.components,\r\n      onRowExpand: this.onRowExpand,\r\n      rowHeight: rowHeight,\r\n      headerHeight: [headerHeight],\r\n      headerRenderer: this.headerRenderer,\r\n      onScroll: this.onScroll,\r\n      rowEventHandlers: this.rowEventHandlers,\r\n      rowClassName: this.rowClassName,\r\n      overscanRowCount: 2\r\n    };\r\n\r\n    if (!showHeader) {\r\n      attrs.headerHeight = [0];\r\n      attrs.headerRenderer = null;\r\n    }\r\n\r\n    if (columnList.length === 1) {\r\n      columnList[0].flexShrink = 1;\r\n      columnList[0].flexGrow = 1;\r\n\r\n      attrs.fixed = false;\r\n    }\r\n\r\n    return <BaseTable {...props} {...attrs} />;\r\n  }\r\n}\r\n\r\nconst AutoResizeTable = props => {\r\n  return (\r\n    <AutoResizer>\r\n      {({ width, height }) => (\r\n        <Table {...props} width={width} height={height} />\r\n      )}\r\n    </AutoResizer>\r\n  );\r\n};\r\n\r\nexport default AutoResizeTable;\r\n","import React from \"react\";\r\nimport BaseTable from \"./BaseTable\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n/**\r\n * 表格组件\r\n */\r\nconst Table = props => {\r\n  return <BaseTable {...props} />;\r\n};\r\n\r\nTable.defaultProps = {\r\n  rowKey: \"key\",\r\n  columns: [],\r\n  dataSource: [],\r\n  selectMode: \"single\",\r\n  disabledSelectKeys: [],\r\n  orderNumber: false,\r\n  checkStrictly: true,\r\n  resizable: true,\r\n  showHeader: true,\r\n  striped: true,\r\n  bordered: true,\r\n  rowHeight: 40,\r\n  rowSelectClassName: \"tablex__row--selected\",\r\n  expandColumnKey: \"\"\r\n};\r\n\r\nTable.propTypes = {\r\n  /** 数据行主键字段 */\r\n  rowKey: PropTypes.string.isRequired,\r\n  /** 列 */\r\n  columns: PropTypes.array.isRequired,\r\n  /** 行数据源 */\r\n  dataSource: PropTypes.array,\r\n  /** table实例回调\r\n   * (ins:React.Element) => void\r\n   */\r\n  initRef: PropTypes.func,\r\n\r\n  /** 是否显示边框 */\r\n  bordered: PropTypes.bool,\r\n\r\n  /** 奇偶行颜色间隔 */\r\n  striped: PropTypes.bool,\r\n  /** 是否显示表头 */\r\n  showHeader: PropTypes.bool,\r\n\r\n  /** 行高 */\r\n  rowHeight: PropTypes.number,\r\n\r\n  /** 行选中时的样式类名 */\r\n  rowSelectClassName: PropTypes.string,\r\n\r\n  /**\r\n   * 行事件对象\r\n   *  {onClick:({ rowData, rowIndex, rowKey, event })=>{},...}\r\n   * */\r\n  rowEventHandlers: PropTypes.object,\r\n\r\n  /** 选择模式：多选 单选 不可选择 */\r\n  selectMode: PropTypes.oneOf([\"multiple\", \"single\", \"none\"]),\r\n  /** 选中的行键值 */\r\n  selectedRowKeys: PropTypes.array,\r\n  /** 将被禁用选中的行key */\r\n  disabledSelectKeys: PropTypes.array,\r\n  /**\r\n   * 行选择事件\r\n   *  (selectedKeys,selectedRows,triggerKey) => void\r\n   * */\r\n  onSelectChange: PropTypes.func,\r\n  /** 是否显示序号列 */\r\n  orderNumber: PropTypes.bool,\r\n  /** 列是否可设置宽度，优先级小于column.resizable */\r\n  resizable: PropTypes.bool,\r\n  /** 多选模式是否级联控制checkbox选中状态 */\r\n  checkStrictly: PropTypes.bool,\r\n\r\n  /** 展开按钮所在的列 */\r\n  expandColumnKey: PropTypes.string,\r\n\r\n  /** 展开的行键值 */\r\n  expandedRowKeys: PropTypes.array,\r\n  /**\r\n   * 行展开事件\r\n   * (expandedRowKeys:Array) => void\r\n   * */\r\n  onExpandedRowsChange: PropTypes.func,\r\n\r\n  /**\r\n   * 展开时加载children的方法\r\n   * (row:object) => Promise\r\n   * */\r\n  loadChildrenData: PropTypes.func\r\n};\r\n\r\nexport default Table;\r\n","export function treeToList(arr, idField = \"id\") {\r\n  let treeList = arr || [];\r\n\r\n  //末级节点\r\n  let leafs = [];\r\n\r\n  //根\r\n  let roots = [];\r\n\r\n  //所有节点\r\n  let list = [];\r\n\r\n  let maxDepth = 0;\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n\r\n    const childrens = d.children || [];\r\n\r\n    d.__depth = 0;\r\n\r\n    list.push(d);\r\n    roots.push(d);\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d, 0, []);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(item, depth, parents) {\r\n    const tempArr = item.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      d.__depth = depth + 1;\r\n      d.__parent = {\r\n        title: item.title,\r\n        key: item[idField],\r\n        width: item.width\r\n      };\r\n\r\n      d.__parents = [].concat(parents).concat([item[idField]]);\r\n\r\n      list.push(d);\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d, d.__depth, [].concat(d.__parents));\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  if (leafs.length > 0) {\r\n    let sortedArr = [].concat(leafs);\r\n    sortedArr.sort((a, b) => b.__depth - a.__depth);\r\n    maxDepth = sortedArr[0].__depth;\r\n  }\r\n\r\n  return { list, leafs, roots, maxDepth };\r\n}\r\n\r\nexport function treeToFlatten(arr) {\r\n  let treeList = arr || [];\r\n\r\n  //末级节点\r\n  let leafs = [];\r\n  //根\r\n  let roots = [];\r\n\r\n  //所有节点\r\n  let list = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n    const childrens = d.children || [];\r\n\r\n    list.push(d);\r\n    roots.push(d);\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d, 0);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(item, depth) {\r\n    const tempArr = item.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      list.push(d);\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d, depth + 1);\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return { list, leafs, roots };\r\n}\r\n\r\n\r\nexport function listToTree(arr = [], idField, pidField) {\r\n\r\n  let tree = [];\r\n\r\n  function getChildren(item) {\r\n\r\n      let id = item[idField];\r\n\r\n      let childrens = arr.filter(y => y[pidField] === id);\r\n\r\n      for (let i = 0; i < childrens.length; i++) {\r\n\r\n          let d = childrens[i];\r\n          const nextId = d[idField];\r\n\r\n          const nextChildrens = arr.filter(y => y[pidField] === nextId);\r\n\r\n          if (nextChildrens.length > 0) {\r\n              d.children = getChildren(d);\r\n          }\r\n\r\n      }\r\n\r\n      return childrens;\r\n\r\n  }\r\n\r\n  let roots = arr.filter(d => !d[pidField]);\r\n\r\n\r\n  for (let i = 0, len = roots.length; i < len; i++) {\r\n\r\n      let d = Object.assign({}, roots[i]);\r\n\r\n      d.children = getChildren(d);\r\n\r\n      tree.push(d)\r\n  }\r\n\r\n  return tree;\r\n}\r\n\r\n\r\n\r\nexport function getTreeLeafs(arr) {\r\n  let treeList = arr || [];\r\n  //末级节点\r\n  let leafs = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n\r\n    const childrens = d.children || [];\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d, 0);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(item, depth) {\r\n    const tempArr = item.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d, depth + 1);\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return leafs;\r\n}\r\n\r\nexport function getDataListWithExpanded(list, expandedKeys = [], rowKey) {\r\n  let arr = [];\r\n\r\n  for (let i = 0; i < list.length; i++) {\r\n    let d = list[i];\r\n\r\n    d.__depth = 0;\r\n\r\n    arr.push(d);\r\n\r\n    if (expandedKeys.indexOf(d[rowKey]) > -1) {\r\n      if (d.children) {\r\n        setChildren(d, 0);\r\n      }\r\n    }\r\n  }\r\n\r\n  function setChildren(c, depth) {\r\n    let cArr = c.children;\r\n    for (let i = 0; i < cArr.length; i++) {\r\n      let d = cArr[i];\r\n      d.__depth = depth + 1;\r\n      arr.push(d);\r\n\r\n      if (expandedKeys.indexOf(d[rowKey]) > -1) {\r\n        if (d.children) {\r\n          setChildren(d, depth + 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return arr;\r\n}\r\n\r\nexport function treeFilter(arr, fn) {\r\n  let treeList = arr || [];\r\n\r\n  //根\r\n  let roots = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    let bl = fn(d, i);\r\n\r\n    if (bl === true) {\r\n      if (d.children && d.children.length > 0) {\r\n        d.children = getChildren(d);\r\n      }\r\n\r\n      roots.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(node) {\r\n    const tempArr = node.children || [];\r\n\r\n    const nextChildrens = [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n\r\n      let bl = fn(d, i);\r\n\r\n      if (bl === true) {\r\n        if (d.children && d.children.length > 0) {\r\n          d.children = getChildren(d);\r\n        }\r\n\r\n        nextChildrens.push(d);\r\n      }\r\n    }\r\n\r\n    return nextChildrens;\r\n  }\r\n\r\n  return roots;\r\n}\r\n\r\nexport function getScrollbarWidth() {\r\n  var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\r\n\r\n  if (userAgent.indexOf(\"Chrome\") > -1) {\r\n    return 6;\r\n  }\r\n\r\n  var oP = document.createElement(\"p\"),\r\n    styles = {\r\n      width: \"100px\",\r\n      height: \"100px\",\r\n      overflowY: \"scroll\"\r\n    },\r\n    i,\r\n    scrollbarWidth;\r\n\r\n  for (i in styles) {\r\n    oP.style[i] = styles[i];\r\n  }\r\n  document.body.appendChild(oP);\r\n  scrollbarWidth = oP.offsetWidth - oP.clientWidth;\r\n  oP.remove();\r\n\r\n  return scrollbarWidth;\r\n}\r\n\r\n/**\r\n * 添加选中行\r\n * @key {Array} 行key\r\n * @selectedRowKeys {Array} 当前选中的行key\r\n * @rowKey {string} 数据行主键key字段名\r\n * @flatData {Array} 展平的表格数据\r\n * @halfCheckedKeys {Array} 当前半选状态的行key\r\n */\r\nexport function addCheckedKey({\r\n  key,\r\n  selectedRowKeys,\r\n  rowKey,\r\n  flatData,\r\n  halfCheckedKeys\r\n}) {\r\n  let nextKeys = [].concat(selectedRowKeys);\r\n  let nextHalfCheckedKeys = [].concat(halfCheckedKeys);\r\n  let row = flatData.find(d => d[rowKey] === key);\r\n  let parentKeys = [].concat(row.__parents || []);\r\n\r\n  if (selectedRowKeys.indexOf(key) === -1) {\r\n    let halfIndex = nextHalfCheckedKeys.indexOf(key);\r\n    if (halfIndex > -1) {\r\n      nextHalfCheckedKeys.splice(halfIndex, 1);\r\n    }\r\n    nextKeys.push(key);\r\n  }\r\n\r\n  //父级半选的key\r\n  let parentHalfCheckedKeys = [];\r\n\r\n  //子级key\r\n  let childrenSelectedKeys = [];\r\n\r\n  flatData.filter(d => {\r\n    let pArr = d.__parents || [];\r\n    let bl = pArr.indexOf(key) > -1;\r\n    let ck = d[rowKey];\r\n    if (bl) {\r\n      if (selectedRowKeys.indexOf(ck) === -1) {\r\n        childrenSelectedKeys.push(ck);\r\n      }\r\n    }\r\n    return bl;\r\n  });\r\n\r\n  nextKeys = nextKeys.concat(childrenSelectedKeys);\r\n\r\n  for (let i = parentKeys.length - 1; i >= 0; i--) {\r\n    let p = parentKeys[i];\r\n\r\n    let pNode = flatData.find(d => {\r\n      return d[rowKey] === p;\r\n    });\r\n\r\n    let childrens = [];\r\n    if (pNode) {\r\n      childrens = pNode.children || [];\r\n    }\r\n\r\n    //子级是否全被选中\r\n    let childrensAllChecked = true;\r\n\r\n    for (let i = 0; i < childrens.length; i++) {\r\n      const cKey = childrens[i][rowKey];\r\n      if (nextKeys.indexOf(cKey) === -1) {\r\n        childrensAllChecked = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    //子级全被选中，则勾选其父节点\r\n    if (childrensAllChecked === true) {\r\n      if (nextKeys.indexOf(p) === -1) {\r\n        nextKeys.push(p);\r\n      }\r\n\r\n      //取消半选中父级\r\n      let k = nextHalfCheckedKeys.findIndex(d => d === p);\r\n      if (k > -1) {\r\n        nextHalfCheckedKeys.splice(k, 1);\r\n      }\r\n    } else {\r\n      //未全选，则半选父节点\r\n      if (halfCheckedKeys.indexOf(p) === -1) {\r\n        parentHalfCheckedKeys.push(p);\r\n\r\n        //取消选中父级\r\n        let j = nextKeys.findIndex(d => d === p);\r\n        if (j > -1) {\r\n          nextKeys.splice(j, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let newHalflCheckedKeys = nextHalfCheckedKeys.concat(parentHalfCheckedKeys);\r\n\r\n  return {\r\n    selectedRowKeys: nextKeys,\r\n    halfCheckedKeys: newHalflCheckedKeys\r\n  };\r\n}\r\n\r\nexport function removeCheckedKey({\r\n  key,\r\n  selectedRowKeys,\r\n  rowKey,\r\n  flatData,\r\n  halfCheckedKeys\r\n}) {\r\n  let nextKeys = [].concat(selectedRowKeys);\r\n  let nextHalfCheckedKeys = [].concat(halfCheckedKeys);\r\n\r\n  let row = flatData.find(d => d[rowKey] === key);\r\n\r\n  let parentKeys = [].concat(row.__parents || []);\r\n\r\n  //父级半选的key\r\n  let parentHalfCheckedKeys = [];\r\n\r\n  //子级key\r\n  let childrenKeys = [];\r\n\r\n  flatData.filter(d => {\r\n    let pArr = d.__parents || [];\r\n    let bl = pArr.indexOf(key) > -1;\r\n    if (bl) {\r\n      childrenKeys.push(d[rowKey]);\r\n    }\r\n    return bl;\r\n  });\r\n\r\n  //移除子级\r\n  if (childrenKeys.length > 0) {\r\n    for (let i = 0; i < childrenKeys.length; i++) {\r\n      const k = childrenKeys[i];\r\n\r\n      //移除选中\r\n      let j = nextKeys.findIndex(d => d === k);\r\n      if (j > -1) {\r\n        nextKeys.splice(j, 1);\r\n      }\r\n\r\n      //移除半选\r\n      let m = nextHalfCheckedKeys.findIndex(d => d === k);\r\n      if (m > -1) {\r\n        nextHalfCheckedKeys.splice(m, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  //移除本级选中\r\n  let i = nextKeys.findIndex(d => d === key);\r\n  if (i > -1) {\r\n    nextKeys.splice(i, 1);\r\n  }\r\n\r\n  //移除本级半选\r\n  let j = nextHalfCheckedKeys.findIndex(d => d === key);\r\n  if (j > -1) {\r\n    nextHalfCheckedKeys.splice(j, 1);\r\n  }\r\n\r\n  for (let i = parentKeys.length - 1; i >= 0; i--) {\r\n    let p = parentKeys[i];\r\n    let childrens = flatData.filter(d => {\r\n      return (d.__parents || []).indexOf(p) > -1;\r\n    });\r\n\r\n    //子级是否全未选中\r\n    let childrensAllUnChecked = true;\r\n\r\n    for (let i = 0; i < childrens.length; i++) {\r\n      const cKey = childrens[i][rowKey];\r\n      if (nextKeys.indexOf(cKey) > -1) {\r\n        childrensAllUnChecked = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    //子级全未选中，则取消勾选其父节点\r\n    if (childrensAllUnChecked === true) {\r\n      //取消选中父级\r\n      let j = nextKeys.findIndex(d => d === p);\r\n      if (j > -1) {\r\n        nextKeys.splice(j, 1);\r\n      }\r\n\r\n      //取消半选父级\r\n      let k = nextHalfCheckedKeys.findIndex(d => d === p);\r\n      if (k > -1) {\r\n        nextHalfCheckedKeys.splice(k, 1);\r\n      }\r\n    } else {\r\n      //否则半选父节点\r\n      if (halfCheckedKeys.indexOf(p) === -1) {\r\n        parentHalfCheckedKeys.push(p);\r\n\r\n        //取消选中父级\r\n        let j = nextKeys.findIndex(d => d === p);\r\n        if (j > -1) {\r\n          nextKeys.splice(j, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let newHalflCheckedKeys = nextHalfCheckedKeys.concat(parentHalfCheckedKeys);\r\n\r\n  return {\r\n    selectedRowKeys: nextKeys,\r\n    halfCheckedKeys: newHalflCheckedKeys\r\n  };\r\n}\r\n\r\n/**\r\n * 添加选中行\r\n * @key {Array} 行key\r\n * @selectedRowKeys {Array} 当前选中的行key\r\n * @rowKey {string} 数据行主键key字段名\r\n * @flatData {Array} 展平的表格数据\r\n * @halfCheckedKeys {Array} 当前半选状态的行key\r\n * @disabledSelectKeys {Array} 禁用选择的数据行key\r\n */\r\nexport function addCheckedKeyWithDisabled({\r\n  key,\r\n  selectedRowKeys,\r\n  rowKey,\r\n  flatData,\r\n  halfCheckedKeys,\r\n  disabledSelectKeys = []\r\n}) {\r\n  let nextKeys = [].concat(selectedRowKeys);\r\n  let nextHalfCheckedKeys = [].concat(halfCheckedKeys);\r\n  let row = flatData.find(d => d[rowKey] === key);\r\n  let parentKeys = [].concat(row.__parents || []);\r\n\r\n  /** 是否允许被选择 */\r\n  function isEnabled(itemKey) {\r\n    return disabledSelectKeys.indexOf(itemKey) === -1;\r\n  }\r\n\r\n  //本级是否允许选择\r\n  if (isEnabled(key) === false) {\r\n    return {\r\n      selectedRowKeys,\r\n      halfCheckedKeys\r\n    };\r\n  }\r\n\r\n  //父级是否允许选择\r\n  let parentEnableSelect = true;\r\n  for (let i = 0; i < parentKeys.length; i++) {\r\n    const pk = parentKeys[i];\r\n    if (isEnabled(pk) === false) {\r\n      parentEnableSelect = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (parentEnableSelect === false) {\r\n    return {\r\n      selectedRowKeys,\r\n      halfCheckedKeys\r\n    };\r\n  }\r\n\r\n  if (selectedRowKeys.indexOf(key) === -1) {\r\n    let halfIndex = nextHalfCheckedKeys.indexOf(key);\r\n    if (halfIndex > -1) {\r\n      nextHalfCheckedKeys.splice(halfIndex, 1);\r\n    }\r\n\r\n    nextKeys.push(key);\r\n  }\r\n\r\n  //父级半选的key\r\n  let parentHalfCheckedKeys = [];\r\n\r\n  //子级key\r\n  let childrenSelectedKeys = [];\r\n\r\n  flatData.filter(d => {\r\n    let pArr = d.__parents || [];\r\n    let bl = pArr.indexOf(key) > -1;\r\n    let ck = d[rowKey];\r\n    if (bl) {\r\n      if (selectedRowKeys.indexOf(ck) === -1) {\r\n        //子级是否允许被选择\r\n        let isEnableSelect = isEnabled(ck);\r\n\r\n        for (let i = 0; i < pArr.length; i++) {\r\n          const cpk = pArr[i];\r\n          if (isEnabled(cpk) === false) {\r\n            isEnableSelect = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        isEnableSelect && childrenSelectedKeys.push(ck);\r\n      }\r\n    }\r\n    return bl;\r\n  });\r\n\r\n  nextKeys = nextKeys.concat(childrenSelectedKeys);\r\n\r\n  for (let i = parentKeys.length - 1; i >= 0; i--) {\r\n    let p = parentKeys[i];\r\n\r\n    let pNode = flatData.find(d => {\r\n      return d[rowKey] === p;\r\n    });\r\n\r\n    let childrens = [];\r\n    if (pNode) {\r\n      childrens = pNode.children || [];\r\n    }\r\n\r\n    //子级是否全被选中\r\n    let childrensAllChecked = true;\r\n\r\n    for (let i = 0; i < childrens.length; i++) {\r\n      const cKey = childrens[i][rowKey];\r\n      if (isEnabled(cKey) && nextKeys.indexOf(cKey) === -1) {\r\n        childrensAllChecked = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    //子级全被选中，则勾选其父节点\r\n    if (childrensAllChecked === true) {\r\n      if (nextKeys.indexOf(p) === -1) {\r\n        isEnabled(p) && nextKeys.push(p);\r\n      }\r\n\r\n      //取消半选中父级\r\n      let k = nextHalfCheckedKeys.findIndex(d => d === p);\r\n      if (k > -1) {\r\n        nextHalfCheckedKeys.splice(k, 1);\r\n      }\r\n    } else {\r\n      //未全选，则半选父节点\r\n      if (halfCheckedKeys.indexOf(p) === -1) {\r\n        isEnabled(p) && parentHalfCheckedKeys.push(p);\r\n\r\n        //取消选中父级\r\n        let j = nextKeys.findIndex(d => d === p);\r\n        if (j > -1) {\r\n          nextKeys.splice(j, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  let newHalflCheckedKeys = nextHalfCheckedKeys.concat(parentHalfCheckedKeys);\r\n\r\n  return {\r\n    selectedRowKeys: nextKeys,\r\n    halfCheckedKeys: newHalflCheckedKeys\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Pagination from \"antd/lib/pagination\";\r\nimport Button from \"antd/lib/button\";\r\nimport \"antd/dist/antd.css\";\r\nimport \"./styles.css\";\r\n\r\nclass Pager extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      current: props.current || 1,\r\n      pageSize: props.pageSize,\r\n      total: props.total\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n\r\n    if (\"current\" in nextProps) {\r\n      nextState.current = nextProps.current;\r\n    }\r\n\r\n    if (\"pageSize\" in nextProps) {\r\n      nextState.pageSize = nextProps.pageSize;\r\n    }\r\n\r\n    if (\"total\" in nextProps) {\r\n      nextState.total = nextProps.total;\r\n    }\r\n\r\n    if (Object.keys(nextState).length > 0) {\r\n      return nextState;\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  onShowSizeChange = (pageIndex, pageSize) => {\r\n    if (typeof this.props.onPageChange === \"function\") {\r\n      this.props.onPageChange(pageIndex, pageSize);\r\n    }\r\n  };\r\n\r\n  onRefresh = () => {\r\n    let { current, pageSize } = this.state;\r\n\r\n    if (typeof this.props.onRefresh === \"function\") {\r\n      this.props.onRefresh(current, pageSize);\r\n    }\r\n  };\r\n\r\n  onPageIndexChange = (pageIndex, pageSize) => {\r\n    if (typeof this.props.onPageChange === \"function\") {\r\n      this.props.onPageChange(pageIndex, pageSize);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    let { pageSize, current, total } = this.state;\r\n\r\n    let pagerAttr = {\r\n      ...this.props,\r\n      showSizeChanger: true,\r\n      onShowSizeChange: this.onShowSizeChange,\r\n      onChange: this.onPageIndexChange,\r\n      pageSize,\r\n      current,\r\n      total\r\n    };\r\n\r\n    let refreshButton = (\r\n      <Button\r\n        style={{ verticalAlign: \"middle\" }}\r\n        icon=\"reload\"\r\n        onClick={this.onRefresh}\r\n      />\r\n    );\r\n\r\n    let start = pageSize * (current - 1) + 1;\r\n    let end = pageSize * current;\r\n    end = end > total ? total : end;\r\n\r\n    let totalCount = total;\r\n\r\n    if (total <= 0) {\r\n      start = 0;\r\n      end = 0;\r\n      totalCount = 0;\r\n    }\r\n\r\n    let totalInfo = (\r\n      <div className=\"tablex__pager__count\">\r\n        显示 {start}-{end}，共 {totalCount} 条\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div className=\"tablex__pager\">\r\n        <div className=\"tablex__pager__number\">\r\n          <Pagination {...pagerAttr} />\r\n          {refreshButton}\r\n        </div>\r\n        {totalInfo}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPager.defaultProps = {\r\n  current: 1,\r\n  pageSize: 10,\r\n  total: 0,\r\n  pageSizeOptions: [\"10\", \"20\", \"30\", \"40\"],\r\n  onPageChange: () => {}\r\n};\r\n\r\nPager.propTypes = {\r\n  /** 当前页数 */\r\n  current: PropTypes.number.isRequired,\r\n  /** 每页条数 */\r\n  pageSize: PropTypes.number.isRequired,\r\n  /** 数据总数 */\r\n  total: PropTypes.number,\r\n  /** 页码，页大小改变事件 */\r\n  onPageChange: PropTypes.func,\r\n  /** 指定每页可以显示多少条 */\r\n  pageSizeOptions: PropTypes.array\r\n};\r\n\r\nexport default Pager;\r\n","import React from \"react\";\r\nimport Menu from \"antd/lib/menu\";\r\nimport Checkbox from \"antd/lib/checkbox\";\r\n\r\nconst SubMenu = Menu.SubMenu;\r\n\r\nclass HeadDropMenu extends React.Component {\r\n  onChange = (columnKey, config) => {\r\n    if (typeof this.props.onChange === \"function\") {\r\n      this.props.onChange(columnKey, config);\r\n    } else {\r\n    }\r\n  };\r\n\r\n  onFilterColumnChange = (checked, key) => {\r\n    this.onChange(key, {\r\n      hidden: !checked\r\n    });\r\n  };\r\n\r\n  columnsFilter = () => {\r\n    let { columns: arr, columnsConfig } = this.props;\r\n    \r\n    let columns = arr; //.filter(d => !!d.title)\r\n\r\n    const columnsOptions = [];\r\n    let defaultChecked = [];\r\n\r\n    columns.forEach((c, i) => {\r\n      let columnKey = c.key || c.dataIndex;\r\n\r\n      let isHide = false;\r\n\r\n      let config = (columnsConfig || {})[columnKey] || {};\r\n\r\n\r\n      isHide = !!config.hidden;\r\n\r\n      if (isHide === false) {\r\n        defaultChecked.push(columnKey);\r\n      }\r\n\r\n      columnsOptions.push(\r\n        <div key={i} style={{ display: \"block\" }}>\r\n          <Checkbox\r\n            checked={!isHide}\r\n            value={columnKey}\r\n            onChange={e => {\r\n              this.onFilterColumnChange(e.target.checked, columnKey);\r\n            }}\r\n          >\r\n            {c.title}\r\n          </Checkbox>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    const columnsFilterItems = (\r\n      <div style={{ marginLeft: 10 }}>{columnsOptions}</div>\r\n    );\r\n\r\n    return columnsFilterItems;\r\n  };\r\n\r\n  handleClick = ({ item, key, keyPath, domEvent }) => {\r\n    let { columnKey } = this.props;\r\n\r\n    let config = {\r\n      1: {\r\n        fixed: \"left\"\r\n      },\r\n      2: {\r\n        fixed: \"right\"\r\n      },\r\n      3: {\r\n        fixed: false\r\n      },\r\n      6: {\r\n        grouped: true\r\n      },\r\n      7: {\r\n        grouped: false\r\n      }\r\n    }[key];\r\n\r\n    config && this.onChange(columnKey, config);\r\n\r\n    domEvent.stopPropagation();\r\n  };\r\n\r\n  onTitleClick({ key, domEvent }) {\r\n    domEvent.stopPropagation();\r\n  }\r\n\r\n  render() {\r\n    let styles = { height: \"auto\", lineHeight: \"normal\", padding: \"0px 10px\" };\r\n\r\n    let { pinable, filterable, groupable } = this.props.options;\r\n\r\n    return (\r\n      <div className=\"tablex__column__dropMenu\">\r\n        <Menu\r\n          forceSubMenuRender={false}\r\n          onClick={this.handleClick}\r\n          style={{ width: 160 }}\r\n          mode=\"vertical\"\r\n        >\r\n          {pinable && (\r\n            <SubMenu key=\"sub1\" title=\"列冻结\" onTitleClick={this.onTitleClick}>\r\n              <Menu.Item key=\"1\" style={styles}>\r\n                左侧\r\n              </Menu.Item>\r\n              <Menu.Item key=\"2\" style={styles}>\r\n                右侧\r\n              </Menu.Item>\r\n              <Menu.Item key=\"3\" style={styles}>\r\n                取消冻结\r\n              </Menu.Item>\r\n            </SubMenu>\r\n          )}\r\n          {filterable && (\r\n            <SubMenu\r\n              key=\"sub2\"\r\n              title=\"显示/隐藏\"\r\n              onTitleClick={this.onTitleClick}\r\n            >\r\n              <Menu.Item key=\"4\" style={styles}>\r\n                {this.columnsFilter()}\r\n              </Menu.Item>\r\n            </SubMenu>\r\n          )}\r\n          {groupable && (\r\n            <SubMenu key=\"sub3\" title=\"列分组\" onTitleClick={this.onTitleClick}>\r\n              <Menu.Item key=\"6\" style={styles}>\r\n                按此列分组\r\n              </Menu.Item>\r\n              <Menu.Item key=\"7\" style={styles}>\r\n                取消分组\r\n              </Menu.Item>\r\n            </SubMenu>\r\n          )}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HeadDropMenu;\r\n","function getTime() {\r\n  let cd = new Date();\r\n\r\n  let y = cd.getFullYear();\r\n  let m = cd.getMonth() + 1;\r\n  m = m < 10 ? \"0\" + m : m;\r\n  let d = cd.getDate();\r\n  d = d < 10 ? \"0\" + d : d;\r\n  let h = cd.getHours();\r\n  h = h < 10 ? \"0\" + h : h;\r\n  let mi = cd.getMinutes();\r\n  mi = mi < 10 ? \"0\" + mi : mi;\r\n  let s = cd.getSeconds();\r\n  s = s < 10 ? \"0\" + s : s;\r\n\r\n  return y + \"/\" + m + \"/\" + d + \" \" + h + \":\" + mi + \":\" + s;\r\n}\r\n\r\nlet storageKey = \"__tablex_configs\";\r\nlet tableKey = \"tableId\";\r\nlet serverSaveFunctionName = \"__tablex_configs_save\";\r\n\r\nlet LocalConfig = {\r\n  get: function(key) {\r\n    let allConfigs = JSON.parse(\r\n      window.localStorage.getItem(storageKey) || \"[]\"\r\n    );\r\n    if (key) {\r\n      let config = allConfigs.find(d => d[tableKey] === key);\r\n      let settings = {};\r\n      if (config) {\r\n        if (typeof config === \"string\") {\r\n          settings = JSON.parse(config);\r\n        } else {\r\n          settings = config;\r\n        }\r\n      }\r\n      return settings;\r\n    }\r\n    return allConfigs;\r\n  },\r\n\r\n  set: function(key, configs) {\r\n    configs = Object.assign(configs, {\r\n      time: getTime(),\r\n      [tableKey]: key\r\n    });\r\n\r\n    let allConfigs = LocalConfig.get();\r\n    let i = allConfigs.findIndex(d => d[tableKey] === key);\r\n\r\n    if (i > -1) {\r\n      allConfigs[i] = Object.assign(allConfigs[i], configs);\r\n    } else {\r\n      allConfigs.push(configs);\r\n    }\r\n    window.localStorage.setItem(storageKey, JSON.stringify(allConfigs));\r\n    return configs;\r\n  },\r\n  remove: function(key) {\r\n    let allConfigs = LocalConfig.get();\r\n    let i = allConfigs.findIndex(d => d[tableKey] === key);\r\n    if (i > -1) {\r\n      allConfigs.splice(i, 1);\r\n      window.localStorage.setItem(storageKey, JSON.stringify(allConfigs));\r\n    }\r\n  }\r\n};\r\n\r\nexport function getConfigs(key) {\r\n  return LocalConfig.get(key);\r\n}\r\n\r\nexport function setConfigs(key, configs) {\r\n  return LocalConfig.set(key, configs);\r\n}\r\n\r\n//配置窗口 保存\r\nexport function saveConfigs(key, configs) {\r\n  let settedConfigs = LocalConfig.set(key, configs);\r\n\r\n  let serverSaveFn = window[serverSaveFunctionName];\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    if (typeof serverSaveFn === \"function\") {\r\n      serverSaveFn(key, settedConfigs).then(d => {\r\n        resolve();\r\n      });\r\n    } else {\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\n//配置窗口 重置\r\nexport function removeConfigs(key) {\r\n  let serverSaveFn = window[serverSaveFunctionName];\r\n\r\n  return new Promise(function(resolve, reject) {\r\n    if (typeof serverSaveFn === \"function\") {\r\n      serverSaveFn(key, \"\").then(d => {\r\n        LocalConfig.remove(key);\r\n        resolve();\r\n      });\r\n    } else {\r\n      LocalConfig.remove(key);\r\n      resolve();\r\n    }\r\n  });\r\n}\r\n\r\nexport function treeToList(arr) {\r\n  let treeList = arr || [];\r\n\r\n  //末级节点\r\n  let leafs = [];\r\n\r\n  //根\r\n  let roots = [];\r\n\r\n  //所有节点\r\n  let list = [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    if (!d) {\r\n      continue;\r\n    }\r\n\r\n    const childrens = d.children || [];\r\n\r\n    list.push(d);\r\n    roots.push(d);\r\n\r\n    if (childrens.length > 0) {\r\n      getChildren(d);\r\n    } else {\r\n      leafs.push(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(d) {\r\n    const tempArr = d.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n      const childrens = d.children || [];\r\n\r\n      list.push(d);\r\n\r\n      if (childrens.length > 0) {\r\n        getChildren(d);\r\n      } else {\r\n        leafs.push(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return { list, leafs, roots };\r\n}\r\n\r\nexport function treeForEach(arr, fn) {\r\n  let treeList = arr || [];\r\n\r\n  for (let i = 0; i < treeList.length; i++) {\r\n    const d = treeList[i];\r\n\r\n    let bl = fn(d, i);\r\n\r\n    if (bl === false) {\r\n      break;\r\n    }\r\n\r\n    if (d.children && d.children.length > 0) {\r\n      getChildren(d);\r\n    }\r\n  }\r\n\r\n  function getChildren(node) {\r\n    const tempArr = node.children || [];\r\n\r\n    for (let i = 0; i < tempArr.length; i++) {\r\n      const d = tempArr[i];\r\n\r\n      let bl = fn(d, i);\r\n\r\n      if (bl === false) {\r\n        break;\r\n      }\r\n\r\n      if (d.children && d.children.length > 0) {\r\n        getChildren(d);\r\n      }\r\n    }\r\n  }\r\n\r\n  return treeList;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Modal from \"antd/lib/modal\";\r\nimport Button from \"antd/lib/button\";\r\nimport InputNumber from \"antd/lib/input-number\";\r\nimport Radio from \"antd/lib/radio\";\r\nimport Switch from \"antd/lib/switch\";\r\nimport { saveConfigs, removeConfigs, treeToList } from \"./utils\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport orderBy from \"lodash/orderBy\";\r\n\r\nconst RadioGroup = Radio.Group;\r\nconst RadioButton = Radio.Button;\r\n\r\nconst reorder = (list, startIndex, endIndex) => {\r\n  const result = Array.from(list);\r\n  const [removed] = result.splice(startIndex, 1);\r\n  result.splice(endIndex, 0, removed);\r\n\r\n  return result;\r\n};\r\n\r\nconst getItemStyle = (isDragging, draggableStyle) => ({\r\n  userSelect: \"none\",\r\n  padding: 5,\r\n\r\n  background: isDragging ? \"#fce2c9\" : \"none\",\r\n  width: \"100%\",\r\n  ...draggableStyle\r\n});\r\n\r\nconst getListStyle = () => ({\r\n  width: \"100%\"\r\n});\r\n\r\nclass SortableItem extends Component {\r\n  onChangeWidth = e => {\r\n    let { onChangeWidth, data } = this.props;\r\n    onChangeWidth(e, data);\r\n  };\r\n\r\n  onChangeFixed = e => {\r\n    let { onChangeFixed, data } = this.props;\r\n    onChangeFixed(e, data);\r\n  };\r\n\r\n  onToggleVisible = e => {\r\n    let { onToggleVisible, data } = this.props;\r\n    onToggleVisible(e, data);\r\n  };\r\n\r\n  render() {\r\n    let itemStyles = {\r\n      display: \"inline-block\",\r\n      marginLeft: 10\r\n    };\r\n\r\n    let d = this.props.data;\r\n\r\n    return (\r\n      <div\r\n        style={{\r\n          borderBottom: \"1px solid #e8e8e8\",\r\n          width: \"100%\",\r\n          marginBottom: 5,\r\n          paddingBottom: 10\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"inline-block\",\r\n            width: \"30%\",\r\n            fontWeight: \"bold\",\r\n            padding: \"5px 0 0px 0px\"\r\n          }}\r\n        >\r\n          {d.title}\r\n        </div>\r\n        <div\r\n          style={{ display: \"inline-block\", width: \"70%\", textAlign: \"right\" }}\r\n        >\r\n          <div style={itemStyles}>\r\n            宽度：\r\n            <InputNumber\r\n              value={d.width}\r\n              style={{ width: 80 }}\r\n              onChange={this.onChangeWidth}\r\n            />\r\n          </div>\r\n          <div style={itemStyles}>\r\n            冻结：\r\n            <RadioGroup\r\n              size=\"small\"\r\n              value={d.fixed || \"none\"}\r\n              onChange={this.onChangeFixed}\r\n            >\r\n              <RadioButton value=\"left\">左</RadioButton>\r\n              <RadioButton value=\"none\">无</RadioButton>\r\n              <RadioButton value=\"right\">右</RadioButton>\r\n            </RadioGroup>\r\n          </div>\r\n\r\n          <div style={{ ...itemStyles, position: \"relative\", bottom: \"2px\" }}>\r\n            <Switch\r\n              checkedChildren=\"显示\"\r\n              checked={!d.hidden}\r\n              unCheckedChildren=\"隐藏\"\r\n              onChange={this.onToggleVisible}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass SortableList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      items: []\r\n    };\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    return { items: nextProps.items };\r\n  }\r\n\r\n  onDragEnd(result) {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n\r\n    const items = reorder(\r\n      this.state.items,\r\n      result.source.index,\r\n      result.destination.index\r\n    );\r\n\r\n    this.props.onSort(items);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <DragDropContext onDragEnd={this.onDragEnd}>\r\n        <Droppable droppableId=\"droppable\">\r\n          {(provided, snapshot) => (\r\n            <div\r\n              ref={provided.innerRef}\r\n              style={getListStyle(snapshot.isDraggingOver)}\r\n            >\r\n              {this.state.items.map((item, index) => (\r\n                <Draggable\r\n                  key={item.key || item.dataIndex}\r\n                  draggableId={item.key || item.dataIndex}\r\n                  index={index}\r\n                >\r\n                  {(provided, snapshot) => (\r\n                    <div\r\n                      ref={provided.innerRef}\r\n                      {...provided.draggableProps}\r\n                      {...provided.dragHandleProps}\r\n                      style={getItemStyle(\r\n                        snapshot.isDragging,\r\n                        provided.draggableProps.style\r\n                      )}\r\n                    >\r\n                      <SortableItem\r\n                        data={item}\r\n                        onChangeWidth={this.props.onChangeWidth}\r\n                        onChangeFixed={this.props.onChangeFixed}\r\n                        onToggleVisible={this.props.onToggleVisible}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </Draggable>\r\n              ))}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    );\r\n  }\r\n}\r\n\r\nclass SettingModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      propsOriginal: {},\r\n      visible: false,\r\n      loading: false,\r\n      resetLoading: false,\r\n      configs: {},\r\n      rawConfigs: {},\r\n      columns: [],\r\n      columnsOriginal: [],\r\n      columnsLeafs: []\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if (prevState.propsOriginal !== nextProps) {\r\n      let nextState = {};\r\n\r\n      nextState.propsOriginal = nextProps;\r\n\r\n      let arr = nextProps.columns || [];\r\n\r\n      nextState.columnsOriginal = arr;\r\n\r\n      let columns = cloneDeep(arr);\r\n\r\n      nextState.rawConfigs = nextProps.configs || {};\r\n      let configs = cloneDeep(nextProps.configs || {});\r\n\r\n      let { leafs } = treeToList(columns);\r\n\r\n      leafs.forEach((d, i) => {\r\n        let columnKey = d.key || d.dataIndex;\r\n        let config = configs[columnKey] || {};\r\n        if (\"fixed\" in config) {\r\n          d.fixed = config.fixed;\r\n        }\r\n        if (\"width\" in config) {\r\n          d.width = config.width;\r\n        }\r\n        if (\"hidden\" in config) {\r\n          d.hidden = config.hidden;\r\n        }\r\n\r\n        if (\"order\" in config) {\r\n          d.order = config.order;\r\n        } else {\r\n          d.order = i;\r\n        }\r\n      });\r\n\r\n      let columnsArr = orderBy(columns, [\"order\"], [\"asc\"]);\r\n      nextState.columns = columnsArr;\r\n\r\n      leafs = orderBy(leafs, [\"order\"], [\"asc\"]);\r\n\r\n      nextState.columnsLeafs = leafs;\r\n\r\n      nextState.configs = configs;\r\n\r\n      return nextState;\r\n    } else {\r\n      let nextState = {};\r\n\r\n      let columns = prevState.columns;\r\n      let { leafs } = treeToList(columns);\r\n      let configs = prevState.configs;\r\n\r\n      leafs.forEach((d, i) => {\r\n        let columnKey = d.key || d.dataIndex;\r\n        let config = configs[columnKey] || {};\r\n        if (\"fixed\" in config) {\r\n          d.fixed = config.fixed;\r\n        }\r\n        if (\"width\" in config) {\r\n          d.width = config.width;\r\n        }\r\n        if (\"hidden\" in config) {\r\n          d.hidden = config.hidden;\r\n        }\r\n\r\n        if (\"order\" in config) {\r\n          d.order = config.order;\r\n        } else {\r\n          d.order = i;\r\n        }\r\n      });\r\n\r\n      leafs = orderBy(leafs, [\"order\"], [\"asc\"]);\r\n      nextState.columnsLeafs = leafs;\r\n\r\n      return nextState;\r\n    }\r\n  }\r\n\r\n  saveSettings = () => {\r\n    var { tableId, onSave, groupedColumnKey } = this.props;\r\n\r\n    if (!tableId) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ loading: true });\r\n\r\n    let { configs } = this.state;\r\n\r\n    saveConfigs(tableId, {\r\n      columnsConfig: configs\r\n    }).then(d => {\r\n      if (typeof onSave === \"function\") {\r\n        onSave(configs);\r\n      }\r\n      this.setState({ loading: false, visible: false });\r\n    });\r\n  };\r\n\r\n  reset = () => {\r\n    var { tableId, onReset } = this.props;\r\n\r\n    if (!tableId) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ resetLoading: true });\r\n\r\n    removeConfigs(tableId).then(d => {\r\n      if (typeof onReset === \"function\") {\r\n        onReset();\r\n      }\r\n      this.setState({ resetLoading: false });\r\n    });\r\n  };\r\n\r\n  toggle = () => {\r\n    let v = !this.state.visible;\r\n    this.setState({ visible: v });\r\n  };\r\n\r\n  onOk = () => {\r\n    this.saveSettings();\r\n  };\r\n\r\n  onCancel = () => {\r\n    this.setState({\r\n      visible: false,\r\n      columns: cloneDeep(this.state.columnsOriginal),\r\n      configs: cloneDeep(this.state.rawConfigs)\r\n    });\r\n  };\r\n\r\n  setConfig = (column, config) => {\r\n    let configs = this.state.configs || {};\r\n\r\n    let columnKey = column.key || column.dataIndex;\r\n\r\n    let prevConfig = configs[columnKey] || {};\r\n    let nextConfig = {\r\n      [columnKey]: Object.assign({}, prevConfig, config)\r\n    };\r\n\r\n    this.setState({\r\n      configs: { ...configs, ...nextConfig }\r\n    });\r\n  };\r\n\r\n  onChangeWidth = (value, column) => {\r\n    this.setConfig(column, { width: value });\r\n  };\r\n\r\n  onChangeFixed = (e, column) => {\r\n    this.setConfig(column, { fixed: e.target.value });\r\n  };\r\n\r\n  onToggleVisible = (bl, column) => {\r\n    this.setConfig(column, { hidden: !bl });\r\n  };\r\n\r\n  onSort = items => {\r\n    let configs = this.state.configs || {};\r\n\r\n    items.forEach((d, index) => {\r\n      // d.order = index;\r\n\r\n      let columnKey = d.key || d.dataIndex;\r\n      let config = configs[columnKey];\r\n      if (config) {\r\n        config.order = index;\r\n      } else {\r\n        configs[columnKey] = { order: index };\r\n      }\r\n    });\r\n\r\n    this.setState({ configs });\r\n  };\r\n\r\n  render() {\r\n    let { visible, columnsLeafs } = this.state;\r\n\r\n    let leafs = columnsLeafs.filter(d => d.settable !== false);\r\n\r\n    let attrs = {\r\n      visible: visible,\r\n      title: \"表格配置\",\r\n      onOk: this.onOk,\r\n      onCancel: this.onCancel,\r\n      width: \"720px\",\r\n      bodyStyle: {\r\n        minHeight: \"300px\",\r\n        maxHeight: \"500px\",\r\n        overflow: \"auto\"\r\n      },\r\n      maskClosable: false,\r\n      footer: (\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Button\r\n            type=\"primary\"\r\n            loading={this.state.resetLoading}\r\n            onClick={this.reset}\r\n          >\r\n            重置\r\n          </Button>\r\n          <Button\r\n            loading={this.state.loading}\r\n            type=\"primary\"\r\n            onClick={this.onOk}\r\n            style={{ marginLeft: 20 }}\r\n          >\r\n            确定\r\n          </Button>\r\n          <Button style={{ marginLeft: 20 }} onClick={this.onCancel}>\r\n            取消\r\n          </Button>\r\n        </div>\r\n      )\r\n    };\r\n\r\n    return (\r\n      <Modal {...attrs}>\r\n        <SortableList\r\n          items={leafs}\r\n          onSort={this.onSort}\r\n          onChangeWidth={this.onChangeWidth}\r\n          onChangeFixed={this.onChangeFixed}\r\n          onToggleVisible={this.onToggleVisible}\r\n        />\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SettingModal;\r\n","import React, { useRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Button from \"antd/lib/button\";\r\nimport Modal from \"./modal\";\r\nimport { getConfigs, setConfigs } from \"./utils\";\r\n\r\nconst Setting = props => {\r\n  const modalRef = useRef();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Button\r\n        icon=\"setting\"\r\n        onClick={() => {\r\n          modalRef.current.toggle();\r\n        }}\r\n      />\r\n      {createPortal(<Modal {...props} ref={modalRef} />, document.body)}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Setting;\r\nexport { getConfigs };\r\nexport { setConfigs };\r\n","import React from \"react\";\r\nimport Table from \"../base/index\";\r\nimport Pagination from \"./pagination\";\r\nimport ColumnDropMenu from \"./ColumnDropMenu\";\r\nimport { treeToFlatten as treeToList, treeFilter } from \"../base/utils\";\r\nimport Setting, { getConfigs, setConfigs } from \"./setting\";\r\nimport orderBy from \"lodash/orderBy\";\r\nimport Popover from \"antd/lib/popover\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\n\r\n/**\r\n * 表格\r\n */\r\nclass EditableTable extends React.Component {\r\n  dropdown_button_ref = React.createRef();\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    let configs = {};\r\n\r\n    if (props.tableId) {\r\n      configs = getConfigs(props.tableId) || {};\r\n    }\r\n\r\n    this.state = {\r\n      pagination: false,\r\n      data: [],\r\n      columns: [],\r\n      columnsConfig: configs.columnsConfig || null,\r\n      columnMenu: null\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n\r\n    let columns = cloneDeep(nextProps.columns || []);\r\n\r\n    nextState.columns = columns;\r\n    nextState.data = nextProps.data || [];\r\n    nextState.rawColumns = nextProps.columns || [];\r\n\r\n    if (\"pagination\" in nextProps) {\r\n      nextState.pagination = nextProps.pagination;\r\n\r\n      const newPagination = {\r\n        ...prevState.pagination,\r\n        ...nextProps.pagination\r\n      };\r\n      newPagination.current = newPagination.current || 1;\r\n      newPagination.pageSize = newPagination.pageSize || 10;\r\n\r\n      if (nextProps.pagination !== false) {\r\n        nextState.pagination = newPagination;\r\n      } else {\r\n        nextState.pagination = {};\r\n      }\r\n\r\n      return nextState;\r\n    }\r\n\r\n    if (Object.keys(nextState).length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return nextState;\r\n  }\r\n\r\n  hasPagination() {\r\n    return this.props.pagination !== false;\r\n  }\r\n\r\n  onPageChange = (pageIndex, pageSize) => {\r\n    let { pagination } = this.state;\r\n    let fn = this.state.pagination.onPageChange;\r\n\r\n    if (typeof fn === \"function\") {\r\n      fn(pageIndex, pageSize);\r\n    } else {\r\n      this.setState({\r\n        pagination: {\r\n          ...pagination,\r\n          current: pageIndex,\r\n          pageSize\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  getMaxCurrent(total) {\r\n    const {\r\n      pagination: { current, pageSize }\r\n    } = this.state;\r\n    if ((current - 1) * pageSize >= total) {\r\n      return Math.floor((total - 1) / pageSize) + 1;\r\n    }\r\n    return current;\r\n  }\r\n\r\n  getCurrentPageData(data) {\r\n    let current;\r\n    let pageSize;\r\n    const state = this.state;\r\n    // 如果没有分页的话，默认全部展示\r\n    if (!this.hasPagination()) {\r\n      pageSize = data.length;\r\n      current = 1;\r\n    } else {\r\n      pageSize = state.pagination.pageSize;\r\n      current = this.getMaxCurrent(state.pagination.total || data.length);\r\n    }\r\n\r\n    // 分页\r\n    // ---\r\n    // 当数据量少于等于每页数量时，直接设置数据\r\n    // 否则进行读取分页数据\r\n    if (data.length > pageSize) {\r\n      data = data.filter((_, i) => {\r\n        return i >= (current - 1) * pageSize && i < current * pageSize;\r\n      });\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  columnSettingMenuShow = e => {\r\n    e.target.className = \"tablex__column__inner__dropdown opened\";\r\n\r\n    if (this.dropdown_button_ref && this.dropdown_button_ref.current) {\r\n      this.dropdown_button_ref.current.click();\r\n    }\r\n\r\n    this.setState({\r\n      columnMenu: {\r\n        columnKey: e.target.dataset.columnkey,\r\n        trigger: e.target,\r\n        visible: true,\r\n        offsetX: e.clientX,\r\n        offsetY: e.clientY\r\n      }\r\n    });\r\n  };\r\n\r\n  columnSettingMenuHide = () => {\r\n    let columnMenu = this.state.columnMenu || {};\r\n    if (columnMenu.trigger) {\r\n      columnMenu.trigger.className = \"tablex__column__inner__dropdown\";\r\n    }\r\n    this.setState({\r\n      columnMenu: Object.assign(columnMenu, { visible: false, trigger: null })\r\n    });\r\n  };\r\n\r\n  onColumnResize = ({ column, width }) => {\r\n    let columnKey = column.key || column.dataIndex;\r\n    this.onColumnChange(columnKey, { width });\r\n  };\r\n\r\n  onColumnChange = (key, config) => {\r\n    let columnKey = key;\r\n\r\n    let { columnsConfig, columnMenu } = this.state;\r\n\r\n    let configs = columnsConfig || {};\r\n\r\n    if (!columnKey && columnMenu) {\r\n      columnKey = columnMenu.columnKey;\r\n    }\r\n\r\n    let prevConfig = configs[columnKey] || {};\r\n    let nextConfig = {\r\n      [columnKey]: Object.assign({}, prevConfig, config)\r\n    };\r\n\r\n    let newConfigs = { ...configs, ...nextConfig };\r\n\r\n    setConfigs(this.props.tableId, {\r\n      columnsConfig: newConfigs,\r\n      groupedColumnKey: null\r\n    });\r\n\r\n    this.setState({\r\n      columnsConfig: newConfigs\r\n    });\r\n  };\r\n\r\n  formatColumns = () => {\r\n    let { columns, columnsConfig } = this.state;\r\n\r\n    let configs = columnsConfig || {};\r\n\r\n    let arr = columns;\r\n\r\n    arr = treeFilter(columns, d => {\r\n      let columnKey = d.key || d.dataIndex;\r\n      let bl = true;\r\n\r\n      let config = configs[columnKey] || {};\r\n      bl = !config.hidden;\r\n\r\n      return bl;\r\n    });\r\n\r\n    let cols = treeToList(arr).leafs;\r\n\r\n    cols.forEach((d, i) => {\r\n      let columnKey = d.key || d.dataIndex;\r\n      let config = configs[columnKey] || configs[columnKey] || {};\r\n\r\n      if (\"fixed\" in config) {\r\n        d.fixed = config.fixed;\r\n      }\r\n\r\n      if (\"width\" in config) {\r\n        d.width = config.width;\r\n      }\r\n\r\n      if (\"order\" in config) {\r\n        d.order = config.order;\r\n      } else {\r\n        d.order = i;\r\n      }\r\n\r\n      d.headerRenderer = ({ column }) => {\r\n        return (\r\n          <div className=\"tablex__column__inner\">\r\n            <span className=\"tablex__column__inner__title\">{column.title}</span>\r\n            <span\r\n              className=\"tablex__column__inner__dropdown\"\r\n              data-columnkey={columnKey}\r\n              onClick={this.columnSettingMenuShow}\r\n            />\r\n          </div>\r\n        );\r\n      };\r\n    });\r\n\r\n    arr = orderBy(arr, [\"order\"], [\"asc\"]);\r\n\r\n    return cloneDeep(arr);\r\n  };\r\n\r\n  saveConfig = configs => {\r\n    this.setState({ columnsConfig: configs });\r\n  };\r\n\r\n  resetConfig = () => {\r\n    this.setState({ columnsConfig: {} });\r\n  };\r\n\r\n  renderHeader = () => {\r\n    let header = null;\r\n\r\n    let headerExtra = null;\r\n\r\n    if (typeof this.props.headerExtra === \"function\") {\r\n      headerExtra = this.props.headerExtra();\r\n    }\r\n\r\n    if (headerExtra) {\r\n      header = <div className=\"tablex__container__header\">{headerExtra}</div>;\r\n    }\r\n\r\n    return header;\r\n  };\r\n\r\n  renderFooter = () => {\r\n    let footer = null;\r\n\r\n    let { pagination: pageAttr, data } = this.state;\r\n\r\n    let { settable, tableId } = this.props;\r\n\r\n    let footerExtra = null;\r\n\r\n    if (typeof this.props.footerExtra === \"function\") {\r\n      footerExtra = this.props.footerExtra();\r\n    }\r\n\r\n    const dataTotal = pageAttr.total || data.length;\r\n\r\n    let hasPager = this.hasPagination();\r\n\r\n    let pager = null;\r\n    let settingButton = null;\r\n\r\n    if (settable === true && tableId) {\r\n      settingButton = (\r\n        <div key=\"_settingButton\" style={{ marginRight: \"5px\" }}>\r\n          <Setting\r\n            tableId={tableId}\r\n            onSave={this.saveConfig}\r\n            onReset={this.resetConfig}\r\n            configs={this.state.columnsConfig}\r\n            columns={this.state.rawColumns}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (hasPager) {\r\n      pager = (\r\n        <Pagination\r\n          {...pageAttr}\r\n          total={dataTotal}\r\n          onPageChange={this.onPageChange}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (pager !== null || settingButton !== null || footerExtra !== null) {\r\n      footer = (\r\n        <div className=\"tablex__container__footer\">\r\n          {settingButton}\r\n          {footerExtra}\r\n          {pager}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return footer;\r\n  };\r\n\r\n  render() {\r\n    let props = this.props;\r\n\r\n    let { columnMenu } = this.state;\r\n\r\n    let columns = this.formatColumns();\r\n\r\n    let arr = props.data;\r\n    if (this.hasPagination()) {\r\n      arr = this.getCurrentPageData(props.data);\r\n    }\r\n\r\n    let newProps = {\r\n      data: arr,\r\n      columns,\r\n      onColumnResize: this.onColumnResize\r\n    };\r\n\r\n    let columnMenuState = columnMenu || {};\r\n\r\n    return (\r\n      <div className=\"tablex__container\">\r\n        {this.renderHeader()}\r\n        <div className=\"tablex__container__body\">\r\n          <Table {...props} {...newProps} />\r\n        </div>\r\n        {this.renderFooter()}\r\n\r\n        <Popover\r\n          trigger=\"click\"\r\n          onVisibleChange={this.columnSettingMenuHide}\r\n          content={\r\n            <ColumnDropMenu\r\n              options={{ pinable: true, filterable: true, groupable: false }}\r\n              columns={this.state.columns}\r\n              columnsConfig={this.state.columnsConfig}\r\n              onChange={this.onColumnChange}\r\n            />\r\n          }\r\n          arrowPointAtCenter={true}\r\n          placement=\"bottomRight\"\r\n        >\r\n          <span\r\n            style={{\r\n              width: 1,\r\n              height: 1,\r\n              position: \"fixed\",\r\n              left: columnMenuState.offsetX,\r\n              top: columnMenuState.offsetY,\r\n              display: columnMenuState.visible ? \"block\" : \"none\"\r\n            }}\r\n            ref={this.dropdown_button_ref}\r\n          />\r\n        </Popover>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditableTable;\r\n","import React from \"react\";\r\nimport ReactDom from \"react-dom\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\nimport merge from \"lodash/merge\";\r\nimport Table from \"./Table\";\r\nimport { treeToFlatten as treeToList, treeFilter } from \"../base/utils\";\r\nimport Tooltip from \"antd/lib/tooltip\";\r\nimport Button from \"antd/lib/button\";\r\nimport message from \"antd/lib/message\";\r\nimport Popconfirm from \"antd/lib/popconfirm\";\r\nimport Menu from \"antd/lib/menu\";\r\nimport Dropdown from \"antd/lib/dropdown\";\r\nimport Icon from \"antd/lib/icon\";\r\nimport Popover from \"antd/lib/popover\";\r\nimport Pagination from \"./pagination\";\r\nimport ColumnDropMenu from \"./ColumnDropMenu\";\r\nimport \"antd/dist/antd.css\";\r\nimport Setting, { getConfigs, setConfigs } from \"./setting\";\r\nimport orderBy from \"lodash/orderBy\";\r\n\r\n/**\r\n * 表格\r\n */\r\nclass EditableTable extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      rowKey: props.rowKey,\r\n      propsOriginal: {},\r\n      rawColumns: [],\r\n      columns: [],\r\n      data: [],\r\n      dataList: [],\r\n      sourceData: [],\r\n      changedRows: [],\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: false,\r\n      addedData: [],\r\n      isEditing: false,\r\n      editKeys: [],\r\n      editSaveLoading: false,\r\n      deleteLoading: false,\r\n      dataControled: false\r\n    };\r\n  }\r\n\r\n  rowsAttributes = [];\r\n  tableRef = null;\r\n  initRef = inst => {\r\n    if (typeof this.props.initRef === \"function\") {\r\n      this.props.initRef(inst);\r\n    }\r\n    this.tableRef = inst;\r\n  };\r\n\r\n  isEditing = () => {\r\n    return this.state.isEditing;\r\n  };\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    let nextState = {};\r\n\r\n    //是否让数据受控\r\n    nextState.dataControled = nextProps.dataControled || false;\r\n    //\r\n    let columns = cloneDeep(nextProps.columns || []);\r\n    let columnList = treeToList(columns).list;\r\n    nextState.columns = columns;\r\n    nextState.columnList = columnList;\r\n    nextState.rawColumns = nextProps.columns || [];\r\n\r\n    let data = nextProps.data || nextProps.dataSource;\r\n\r\n    if (prevState.propsOriginal !== nextProps) {\r\n      nextState.propsOriginal = nextProps;\r\n\r\n      nextState.changedRows = [];\r\n\r\n      if (prevState.dataControled === true) {\r\n        let newData = data || [];\r\n        let dataList = treeToList(newData).list;\r\n        nextState.dataList = dataList;\r\n        nextState.data = newData;\r\n        nextState.sourceData = cloneDeep(newData);\r\n      } else {\r\n        if (prevState.sourceData !== data) {\r\n          let newData = data || [];\r\n          let dataList = treeToList(newData).list;\r\n          nextState.dataList = dataList;\r\n          nextState.data = newData;\r\n          nextState.sourceData = cloneDeep(newData);\r\n        }\r\n      }\r\n    }\r\n    return nextState;\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  updateComponent = () => {\r\n    let { data, dataList, addedData } = this.state;\r\n\r\n    this.setState({\r\n      data: cloneDeep(data),\r\n      dataList: cloneDeep(dataList),\r\n      addedData: cloneDeep(addedData)\r\n    });\r\n  };\r\n\r\n  delayTimer = null;\r\n  delayUpdate = fn => {\r\n    let delay = 300;\r\n\r\n    if (typeof this.props.validateDelay === \"number\") {\r\n      delay = this.props.validateDelay;\r\n    }\r\n\r\n    if (this.delayTimer) {\r\n      clearTimeout(this.delayTimer);\r\n    }\r\n\r\n    if (typeof fn === \"function\") {\r\n      this.delayTimer = setTimeout(() => {\r\n        fn();\r\n        this.updateComponent();\r\n      }, delay);\r\n    } else {\r\n      this.delayTimer = setTimeout(this.updateComponent, delay);\r\n    }\r\n  };\r\n\r\n  isMouseFocus = false;\r\n\r\n  changedRows = [];\r\n  addToChanged = newRow => {\r\n    let rowKey = this.props.rowKey;\r\n    let changedRows = this.changedRows;\r\n    let validateTrigger = this.props.validateTrigger;\r\n\r\n    let i = changedRows.findIndex(d => d[rowKey] === newRow[rowKey]);\r\n\r\n    if (i >= 0) {\r\n      changedRows[i] = newRow;\r\n    } else {\r\n      changedRows.push(newRow);\r\n    }\r\n\r\n    this.changedRows = changedRows;\r\n\r\n    // 当change时立即验证行\r\n    if (validateTrigger === \"onChange\") {\r\n      this.validateRow(newRow);\r\n      this.updateComponent();\r\n    }\r\n  };\r\n\r\n  editChange = (newValues = {}, row, index) => {\r\n    let { data, addedData } = this.state;\r\n\r\n    let rowKey = this.props.rowKey;\r\n\r\n    // let dataList = data.concat(addedData);\r\n\r\n    let arr = treeToList(data).list;\r\n\r\n    let k = row[rowKey];\r\n    let i = arr.findIndex(d => d[rowKey] === k);\r\n\r\n    if (i > -1) {\r\n      let changedRow = {};\r\n\r\n      Object.keys(newValues).forEach(k => {\r\n        arr[i][k] = newValues[k];\r\n        changedRow = Object.assign({}, arr[i]);\r\n        changedRow[k] = newValues[k];\r\n        //row[k] = newValues[k];\r\n      });\r\n\r\n      //this.setState({});\r\n\r\n      this.addToChanged(arr[i]);\r\n    }\r\n\r\n    let j = addedData.findIndex(d => d[rowKey] === k);\r\n\r\n    if (j > -1) {\r\n      Object.keys(newValues).forEach(k => {\r\n        addedData[j][k] = newValues[k];\r\n      });\r\n\r\n      this.addToChanged(addedData[j]);\r\n    }\r\n  };\r\n\r\n  setRowAttr = (row, attr = {}) => {\r\n    let rowKey = this.props.rowKey;\r\n    let key = row[rowKey];\r\n\r\n    let attrs = this.rowsAttributes || [];\r\n\r\n    let i = attrs.findIndex(d => d[rowKey] === key);\r\n\r\n    if (i > -1) {\r\n      let fRow = attrs[i];\r\n\r\n      if (typeof fRow.__attribute === \"undefined\") {\r\n        fRow.__attribute = attr;\r\n      } else {\r\n        fRow.__attribute = merge({}, fRow.__attribute, attr);\r\n      }\r\n    } else {\r\n      let newAttr = Object.assign({}, row);\r\n      newAttr.__attribute = attr;\r\n      attrs.push(newAttr);\r\n    }\r\n\r\n    this.rowsAttributes = attrs;\r\n  };\r\n\r\n  getRowAttr = row => {\r\n    let rowKey = this.props.rowKey;\r\n    let key = row[rowKey];\r\n\r\n    let attrs = this.rowsAttributes || [];\r\n    let attr = {};\r\n\r\n    let i = attrs.findIndex(d => d[rowKey] === key);\r\n    if (i > -1) {\r\n      attr = attrs[i] || {};\r\n    }\r\n\r\n    return Object.assign({}, attr.__attribute || {});\r\n  };\r\n\r\n  getValidate = (row, key) => {\r\n    let attr = this.getRowAttr(row);\r\n    let r = (attr[\"validation\"] || {})[key] || {};\r\n\r\n    return r;\r\n  };\r\n\r\n  //进行异步验证的promise\r\n  validatorAsync = [];\r\n\r\n  validateRow = row => {\r\n    let { columnList: columns } = this.state;\r\n\r\n    let bl = true;\r\n\r\n    let validation = {};\r\n\r\n    for (let i = 0; i < columns.length; i++) {\r\n      const c = columns[i];\r\n      const ck = c.dataIndex;\r\n\r\n      if (typeof c.validator === \"function\") {\r\n        var v = c.validator(row[ck], row);\r\n\r\n        if (v.constructor.name === \"Promise\") {\r\n          this.validatorAsync.push(\r\n            new Promise((resolve, reject) => {\r\n              v.then(d => {\r\n                resolve({ validation: d, row, columnKey: ck });\r\n              });\r\n\r\n              v.catch(e => {\r\n                reject(e);\r\n              });\r\n            })\r\n          );\r\n        } else {\r\n          validation[ck] = {\r\n            valid: v.valid,\r\n            msg: v.valid ? \"\" : v.message || \"输入不正确\"\r\n          };\r\n\r\n          if (!v.valid) bl = false;\r\n\r\n          this.setRowAttr(row, {\r\n            validation\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return bl;\r\n  };\r\n\r\n  //异步验证数据行\r\n  validateAsync = rows => {\r\n    let arr = rows || [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n      let bl = true;\r\n\r\n      for (let i = 0; i < arr.length; i++) {\r\n        const r = arr[i];\r\n        let temp = this.validateRow(r);\r\n        if (temp === false) {\r\n          bl = false;\r\n        }\r\n      }\r\n\r\n      if (this.validatorAsync.length > 0) {\r\n        Promise.all(this.validatorAsync).then(datas => {\r\n          datas.forEach(d => {\r\n            let v = d.validation;\r\n\r\n            if (v.valid === false) {\r\n              bl = false;\r\n            }\r\n\r\n            let validation = {};\r\n\r\n            validation[d.columnKey] = {\r\n              valid: v.valid,\r\n              msg: v.valid ? \"\" : v.message\r\n            };\r\n\r\n            this.setRowAttr(d.row, {\r\n              validation\r\n            });\r\n          });\r\n\r\n          this.validatorAsync = [];\r\n          this.updateComponent();\r\n\r\n          resolve(bl);\r\n        });\r\n      } else {\r\n        if (arr.length > 0) {\r\n          this.updateComponent();\r\n        }\r\n\r\n        resolve(bl);\r\n      }\r\n    });\r\n  };\r\n\r\n  //验证改变的数据行\r\n  validate = async () => {\r\n    let bl = true;\r\n    let arr = this.changedRows;\r\n\r\n    // let { data, addedData } = this.state;\r\n\r\n    // let arr = data.concat(addedData);\r\n\r\n    bl = await this.validateAsync(arr);\r\n\r\n    return bl;\r\n  };\r\n\r\n  //验证当前所有数据行\r\n  validateAll = async () => {\r\n    let bl = true;\r\n    let { data, addedData, editKeys, isEditAll } = this.state;\r\n    let rowKey = this.props.rowKey;\r\n\r\n    let allData = data.concat(addedData);\r\n\r\n    let arr = [];\r\n\r\n    if (isEditAll === true) {\r\n      arr = allData;\r\n    } else {\r\n      arr = allData.filter(d => {\r\n        return editKeys.indexOf(d[rowKey]) > -1;\r\n      });\r\n    }\r\n\r\n    bl = await this.validateAsync(arr);\r\n    // this.forceUpdate();\r\n    return bl;\r\n  };\r\n\r\n  editorInstance = [];\r\n  setEditorIns = (row, column, ins) => {\r\n    if (ins === null) {\r\n      return;\r\n    }\r\n\r\n    let rowKey = row[this.props.rowKey];\r\n    let columnKey = column.dataIndex;\r\n\r\n    let editorInstance = [].concat(this.editorInstance);\r\n\r\n    let ed = this.editorInstance.find(\r\n      d => d.rowKey === rowKey && d.columnKey === columnKey\r\n    );\r\n\r\n    if (ed) {\r\n      ed.editorInstance = ins;\r\n    } else {\r\n      editorInstance.push({\r\n        columnKey: columnKey,\r\n        rowKey: rowKey,\r\n        editorInstance: ins\r\n      });\r\n    }\r\n\r\n    this.editorInstance = editorInstance;\r\n  };\r\n\r\n  getEditorIns = (rowKey, columnKey) => {\r\n    let ed = this.editorInstance.find(\r\n      d => d.rowKey === rowKey && d.columnKey === columnKey\r\n    );\r\n\r\n    if (ed) {\r\n      return ed.editorInstance;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  formatColumns = () => {\r\n    let { columns, editKeys, isEditAll, isEditing } = this.state;\r\n\r\n    let rowKey = this.props.rowKey;\r\n\r\n    let arr = columns;\r\n\r\n    arr = treeFilter(columns, d => {\r\n      let bl = true;\r\n\r\n      if (isEditing === true) {\r\n        bl = d.editingVisible !== false;\r\n      }\r\n\r\n      return bl;\r\n    });\r\n\r\n    let cols = treeToList(arr).leafs;\r\n\r\n    if (isEditAll === true) {\r\n      cols.forEach(d => {\r\n        let editor = d.editor;\r\n\r\n        if (typeof editor === \"function\") {\r\n          let renderFn = d.render;\r\n\r\n          d.render = (value, row, index) => {\r\n            let renderProps = null;\r\n            let newRenderProps = {};\r\n\r\n            if (typeof renderFn === \"function\") {\r\n              renderProps = renderFn(value, row, index);\r\n            }\r\n\r\n            if (\r\n              renderProps &&\r\n              renderProps.props &&\r\n              renderProps.props.colSpan === 0\r\n            ) {\r\n              return renderProps;\r\n            }\r\n\r\n            let { valid, msg } = this.getValidate(row, d.dataIndex) || {};\r\n\r\n            let ed = editor(\r\n              value,\r\n              row,\r\n              index,\r\n              values => {\r\n                this.editChange(values, row, index);\r\n              },\r\n              ins => {\r\n                this.setEditorIns(row, d, ins);\r\n              },\r\n              this.validate\r\n            );\r\n\r\n            let c = (\r\n              <span\r\n                style={{ verticalAlign: \"middle\" }}\r\n                className={valid === false ? \"has-error\" : \"\"}\r\n                onClick={e => this.onClick(e, row, d)}\r\n                onKeyDown={e => this.onKeyDown(e, row, d)}\r\n              >\r\n                <Tooltip placement=\"topLeft\" title={msg}>\r\n                  {ed}\r\n                </Tooltip>\r\n              </span>\r\n            );\r\n\r\n            newRenderProps.children = c;\r\n\r\n            if (renderProps && renderProps.props) {\r\n              newRenderProps.props = renderProps.props;\r\n            }\r\n\r\n            return newRenderProps;\r\n          };\r\n        }\r\n      });\r\n    } else if (editKeys.length > 0) {\r\n      cols.forEach(d => {\r\n        if (typeof d.editingVisible === \"boolean\") {\r\n          d.hidden = !d.editingVisible;\r\n        }\r\n\r\n        let editor = d.editor;\r\n\r\n        if (typeof editor === \"function\") {\r\n          let renderFn = d.render;\r\n\r\n          d.render = (value, row, index) => {\r\n            let renderProps = null;\r\n            let newRenderProps = {};\r\n\r\n            if (typeof renderFn === \"function\") {\r\n              renderProps = renderFn(value, row, index);\r\n            }\r\n\r\n            if (\r\n              renderProps &&\r\n              renderProps.props &&\r\n              renderProps.props.colSpan === 0\r\n            ) {\r\n              return renderProps;\r\n            }\r\n\r\n            let bl = editKeys.findIndex(k => k === row[rowKey]) > -1;\r\n\r\n            if (bl) {\r\n              let { valid, msg } = this.getValidate(row, d.dataIndex) || {};\r\n\r\n              let ed = editor(\r\n                value,\r\n                row,\r\n                index,\r\n                values => {\r\n                  this.editChange(values, row, index);\r\n                },\r\n                ins => {\r\n                  this.setEditorIns(row, d, ins);\r\n                }\r\n              );\r\n\r\n              let c = (\r\n                <span\r\n                  style={{ verticalAlign: \"middle\" }}\r\n                  className={valid === false ? \"has-error\" : \"\"}\r\n                  onClick={e => this.onClick(e, row, d)}\r\n                  onKeyDown={e => this.onKeyDown(e, row, d)}\r\n                >\r\n                  <Tooltip placement=\"topLeft\" title={msg}>\r\n                    {ed}\r\n                  </Tooltip>\r\n                </span>\r\n              );\r\n\r\n              newRenderProps.children = c;\r\n\r\n              if (renderProps && renderProps.props) {\r\n                newRenderProps.props = renderProps.props;\r\n              }\r\n\r\n              return newRenderProps;\r\n            } else {\r\n              if (typeof renderFn === \"function\") {\r\n                return renderFn(value, row, index);\r\n              }\r\n              return value;\r\n            }\r\n          };\r\n        }\r\n      });\r\n    }\r\n\r\n    arr = orderBy(arr, [\"order\"], [\"asc\"]);\r\n\r\n    return cloneDeep(arr);\r\n  };\r\n\r\n  editAll = () => {\r\n    this.setState({ isEditAll: true, isEditing: true, editKeys: [] });\r\n  };\r\n\r\n  endEdit = callBack => {\r\n    let arr = [].concat(this.changedRows);\r\n\r\n    this.changedRows = [];\r\n\r\n    let nextState = {\r\n      editSaveLoading: false,\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: false,\r\n      isEditing: false,\r\n      editKeys: [],\r\n      changedRows: [],\r\n      addedData: [],\r\n      sourceData: cloneDeep(this.state.data)\r\n    };\r\n\r\n    if (typeof callBack === \"function\") {\r\n      this.setState(nextState, () => {\r\n        callBack(arr, this.state.data, this.editType);\r\n      });\r\n    } else {\r\n      this.setState(nextState);\r\n    }\r\n  };\r\n\r\n  //取消编辑\r\n  cancelEdit = () => {\r\n    if (typeof this.props.onCancel === \"function\") {\r\n      this.props.onCancel();\r\n    }\r\n\r\n    this.reset();\r\n  };\r\n\r\n  editRows = keys => {\r\n    this.setState({ isEditAll: false, editKeys: keys, isEditing: true });\r\n  };\r\n\r\n  getChangedRows = () => {\r\n    return this.changedRows;\r\n  };\r\n\r\n  getRows = () => {\r\n    return this.state.data;\r\n  };\r\n\r\n  addRow = (r = {}, editting = true) => {\r\n    this.addRows([r], editting);\r\n  };\r\n\r\n  addRows = (arr = [], editting = true) => {\r\n    let rowKey = this.props.rowKey;\r\n    let { addedData, editKeys } = this.state;\r\n\r\n    let rowKeys = [];\r\n    let newEditKeys = [];\r\n    let newAddedData = [];\r\n\r\n    this.editType = \"add\";\r\n\r\n    let rows = [];\r\n\r\n    let rowTemplate = {};\r\n\r\n    arr.forEach((d, i) => {\r\n      let k = d[rowKey];\r\n\r\n      if (!k) {\r\n        k = d[rowKey] = \"__id_\" + i + \"_\" + new Date().getTime();\r\n      }\r\n\r\n      rows.push(Object.assign({}, rowTemplate, d));\r\n      rowKeys.push(k);\r\n    });\r\n\r\n    newEditKeys = editKeys.concat(rowKeys);\r\n    newAddedData = [].concat(rows);\r\n\r\n    if (editting === false) {\r\n      this.setState({\r\n        isAddingRange: true,\r\n        addedData: newAddedData\r\n      });\r\n    } else {\r\n      this.setState({\r\n        isAddingRange: true,\r\n        isEditing: true,\r\n        addedData: newAddedData,\r\n        editKeys: newEditKeys\r\n      });\r\n    }\r\n  };\r\n\r\n  setRows = (arr = []) => {\r\n    this.changedRows = [];\r\n    this.setState({\r\n      data: arr,\r\n      editKeys: [],\r\n      isEditAll: false,\r\n      changedRows: []\r\n    });\r\n  };\r\n\r\n  reset = () => {\r\n    let data = cloneDeep(this.state.sourceData);\r\n\r\n    let nextState = {\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: false,\r\n      isEditing: false,\r\n      editKeys: [],\r\n      data: data,\r\n      changedRows: [],\r\n      addedData: []\r\n    };\r\n\r\n    this.changedRows = [];\r\n    this.setState(nextState);\r\n  };\r\n\r\n  focusInput = editor => {\r\n    if (!editor) {\r\n      return;\r\n    }\r\n\r\n    if (editor.input && typeof editor.input.select === \"function\") {\r\n      setTimeout(() => {\r\n        editor.input.select();\r\n      }, 1);\r\n    } else if (typeof editor.focus === \"function\") {\r\n      editor.focus();\r\n    } else {\r\n      let el = ReactDom.findDOMNode(editor);\r\n\r\n      if (el) {\r\n        let inputEl = el.getElementsByTagName(\"input\")[0];\r\n        inputEl && inputEl.focus();\r\n        el.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  getNextEditor = (keyCode, row, column) => {\r\n    let nextEditor = null;\r\n\r\n    let key = this.props.rowKey;\r\n\r\n    let rowKey = row[key];\r\n\r\n    let columnKey = column.dataIndex;\r\n\r\n    let { data, addedData, columns } = this.state;\r\n\r\n    let rows = [].concat(data).concat(addedData);\r\n\r\n    let arr = treeToList(columns).leafs;\r\n\r\n    if (keyCode === 38) {\r\n      //top\r\n\r\n      let currIndex = rows.findIndex(d => d[key] === rowKey);\r\n      let nextRow = rows[currIndex - 1];\r\n\r\n      if (nextRow) {\r\n        nextEditor = this.getEditorIns(nextRow[key], columnKey);\r\n      }\r\n    }\r\n\r\n    if (keyCode === 40) {\r\n      //bottom\r\n\r\n      let currIndex = rows.findIndex(d => d[key] === rowKey);\r\n      let nextRow = rows[currIndex + 1];\r\n\r\n      if (nextRow) {\r\n        nextEditor = this.getEditorIns(nextRow[key], columnKey);\r\n      }\r\n    }\r\n\r\n    if (keyCode === 37) {\r\n      //left\r\n\r\n      let currColumnIndex = arr.findIndex(d => d[\"dataIndex\"] === columnKey);\r\n      let nextColumn = arr[currColumnIndex - 1];\r\n\r\n      if (nextColumn) {\r\n        nextEditor = this.getEditorIns(rowKey, nextColumn[\"dataIndex\"]);\r\n      }\r\n    }\r\n\r\n    if (keyCode === 39 || keyCode === 13) {\r\n      //right\r\n\r\n      let currColumnIndex = arr.findIndex(d => d[\"dataIndex\"] === columnKey);\r\n      let nextColumn = arr[currColumnIndex + 1];\r\n\r\n      if (nextColumn) {\r\n        nextEditor = this.getEditorIns(rowKey, nextColumn[\"dataIndex\"]);\r\n      }\r\n    }\r\n\r\n    return nextEditor;\r\n  };\r\n\r\n  onKeyDown = (e, row, column) => {\r\n    // e.preventDefault();\r\n    //e.stopPropagation();\r\n\r\n    let key = this.props.rowKey;\r\n\r\n    let rowKey = row[key];\r\n    let columnKey = column.dataIndex;\r\n\r\n    let nextEditor = this.getNextEditor(e.keyCode, row, column);\r\n\r\n    let currEditor = this.getEditorIns(rowKey, columnKey);\r\n\r\n    if (currEditor) {\r\n      //ly 2018年11月6日 11点12分\r\n      //当当前编辑器为下拉类型时，如 datePicker comobobox 。获取展开状态，展开时禁用表格列的快捷键切换\r\n      if (typeof currEditor.getRealOpenState === \"function\") {\r\n        let bl = currEditor.getRealOpenState();\r\n\r\n        if (e.keyCode === 13) {\r\n          this.focusInput(nextEditor);\r\n          return false;\r\n        }\r\n\r\n        if (bl === true) {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.focusInput(nextEditor);\r\n  };\r\n\r\n  onClick = (e, row, column) => {\r\n    this.isMouseFocus = true;\r\n  };\r\n\r\n  completeEdit = async callBack => {\r\n    let changedRows = this.getChangedRows();\r\n\r\n    let editType = this.editType;\r\n    let { data, addedData } = this.state;\r\n    let { allowSaveEmpty, alwaysValidate } = this.props;\r\n\r\n    let newRows = [].concat(data);\r\n    if (editType === \"add\") {\r\n      if (allowSaveEmpty === true) {\r\n        let addedRows = addedData.map(d => {\r\n          let r = Object.assign({}, d);\r\n          delete r.__isAddedRow;\r\n          return r;\r\n        });\r\n        newRows = data.concat(addedRows);\r\n      } else {\r\n        newRows = data.concat(changedRows);\r\n      }\r\n    } else if (editType === \"edit\") {\r\n      newRows = data;\r\n    } else if (editType === \"delete\") {\r\n      newRows = data;\r\n    }\r\n\r\n    let bl = true;\r\n\r\n    if (alwaysValidate === true) {\r\n      bl = await this.validateAll();\r\n    } else {\r\n      bl = await this.validate();\r\n    }\r\n\r\n    if (bl === false) {\r\n      message.error(\"信息录入不正确，请检查\");\r\n      return;\r\n    }\r\n\r\n    if (allowSaveEmpty !== true) {\r\n      if (changedRows.length <= 0) {\r\n        this.cancelEdit();\r\n        return;\r\n      }\r\n    }\r\n\r\n    let onEditSave = this.props.onEditSave;\r\n\r\n    if (typeof onEditSave === \"function\") {\r\n      this.setState({ editSaveLoading: true });\r\n\r\n      let fn = onEditSave(changedRows, newRows, this.editType);\r\n\r\n      if (fn) {\r\n        //如果返回的是一个promise对象，则只有当调用resolve时，才触发编辑完成事件\r\n        if (typeof fn.then === \"function\" && typeof fn.catch === \"function\") {\r\n          fn.then(() => {\r\n            this.endEdit(callBack);\r\n          });\r\n\r\n          fn.catch(() => {\r\n            this.setState({ editSaveLoading: false });\r\n          });\r\n        } else {\r\n          this.setState({ editSaveLoading: false });\r\n        }\r\n      } else {\r\n        this.endEdit(callBack);\r\n      }\r\n    } else {\r\n      this.endEdit(callBack);\r\n    }\r\n  };\r\n\r\n  //\"edit\"：编辑 ； \"add\"：新增 \"delete\"： 删除\r\n  editType = \"\";\r\n  edit = () => {\r\n    let arr = this.state.data || [];\r\n\r\n    if (arr.length === 0) {\r\n      message.error(\"没有可编辑的数据\");\r\n      return false;\r\n    }\r\n\r\n    let bl = true;\r\n\r\n    if (typeof this.props.onBeforeEdit === \"function\") {\r\n      bl = this.props.onBeforeEdit();\r\n    }\r\n\r\n    if (bl === false) {\r\n      return false;\r\n    }\r\n\r\n    this.editType = \"edit\";\r\n\r\n    this.editAll();\r\n\r\n    if (typeof this.props.onEdit === \"function\") {\r\n      this.props.onEdit();\r\n    }\r\n  };\r\n\r\n  delete = () => {\r\n    let bl = true;\r\n\r\n    let selectedKeys = this.tableRef.tableApi.getSelectedKeys();\r\n\r\n    if (typeof this.props.onBeforeDelete === \"function\") {\r\n      bl = this.props.onBeforeDelete(selectedKeys);\r\n    }\r\n\r\n    if (bl === false) {\r\n      return false;\r\n    }\r\n\r\n    if (selectedKeys.length <= 0) {\r\n      message.warn(\"请选择要删除的数据\");\r\n    } else {\r\n      this.editType = \"delete\";\r\n\r\n      let { data, rowKey } = this.state;\r\n\r\n      let newData = [].concat(data);\r\n      let deletedRows = [];\r\n\r\n      for (let i = 0; i < selectedKeys.length; i++) {\r\n        let index = newData.findIndex(d => d[rowKey] === selectedKeys[i]);\r\n\r\n        deletedRows.push(Object.assign({}, newData[index]));\r\n\r\n        if (index > -1) {\r\n          newData.splice(index, 1);\r\n        }\r\n      }\r\n\r\n      let onEditSave = this.props.onEditSave;\r\n\r\n      if (typeof onEditSave === \"function\") {\r\n        this.setState({ deleteLoading: true });\r\n\r\n        let fn = onEditSave(deletedRows, newData, this.editType);\r\n\r\n        if (fn && typeof fn.then === \"function\") {\r\n          fn.then(() => {\r\n            this.setState({ deleteLoading: false });\r\n          });\r\n        } else {\r\n          this.setState({ deleteLoading: false });\r\n        }\r\n      } else {\r\n        this.setState({ data: newData, deletedRows });\r\n      }\r\n\r\n      if (typeof this.props.onDelete === \"function\") {\r\n        this.props.onDelete();\r\n      }\r\n    }\r\n  };\r\n\r\n  addRange = rowCount => {\r\n    let { rowTemplate, rowKey, isAppend, defaultAddCount } = this.props;\r\n\r\n    let bl = true;\r\n\r\n    if (typeof this.props.onBeforeAdd === \"function\") {\r\n      bl = this.props.onBeforeAdd();\r\n    }\r\n\r\n    if (bl === false) {\r\n      return false;\r\n    }\r\n\r\n    this.editType = \"add\";\r\n\r\n    let addCount = rowCount || defaultAddCount;\r\n\r\n    let data = this.state.data || [];\r\n\r\n    let newData = [];\r\n\r\n    let addedData = [];\r\n    let keys = [];\r\n\r\n    for (let i = 0; i < addCount; i++) {\r\n      let row = {};\r\n\r\n      if (typeof rowTemplate === \"function\") {\r\n        row = rowTemplate(i);\r\n        if (!row[rowKey]) {\r\n          row[rowKey] = \"__id_\" + i + \"_\" + new Date().getTime();\r\n        }\r\n      } else {\r\n        row[rowKey] = \"__id_\" + i + \"_\" + new Date().getTime();\r\n      }\r\n\r\n      keys.push(row[rowKey]);\r\n      addedData.push(row);\r\n    }\r\n\r\n    // if (isAppend === true) {\r\n    //     newData = data.concat(addedData)\r\n    // } else {\r\n    //     newData = addedData;\r\n    // }\r\n\r\n    this.changedRows = [];\r\n\r\n    this.setState({\r\n      addedData,\r\n      data: data,\r\n      editKeys: keys,\r\n      isEditing: true,\r\n      isEditAll: false,\r\n      isAdding: false,\r\n      isAddingRange: true,\r\n      changedRows: []\r\n    });\r\n\r\n    if (typeof this.props.onAdd === \"function\") {\r\n      this.props.onAdd(addedData, newData, \"add\");\r\n    }\r\n  };\r\n\r\n  editTools = () => {\r\n    let w = 0;\r\n\r\n    let tools = this.props.editTools || [];\r\n    let config = this.props.editToolsConfig || {};\r\n    let isTop = config.position === \"top\";\r\n\r\n    if (tools.length <= 0) {\r\n      return null;\r\n    }\r\n\r\n    let buttons = [];\r\n\r\n    let { isEditing } = this.state;\r\n\r\n    let itemStyle = config.itemStyle || { marginRight: 5 };\r\n\r\n    let okText = config.okText || \"确定\";\r\n    let okIcon = config.okIcon || \"\";\r\n    okIcon = okIcon ? <Icon type={okIcon} /> : null;\r\n\r\n    let cancelText = config.cancelText || \"取消\";\r\n    let cancelIcon = config.cancelIcon || \"\";\r\n    cancelIcon = cancelIcon ? <Icon type={cancelIcon} /> : null;\r\n\r\n    let addText = config.addText || \"新增\";\r\n    let addIcon = config.addIcon || \"\";\r\n    addIcon = addIcon ? <Icon type={addIcon} /> : null;\r\n\r\n    let editText = config.editText || \"编辑\";\r\n    let editIcon = config.editIcon || \"\";\r\n    editIcon = editIcon ? <Icon type={editIcon} /> : null;\r\n\r\n    let deleteText = config.deleteText || \"删除\";\r\n    let deleteIcon = config.deleteIcon || \"\";\r\n    deleteIcon = deleteIcon ? <Icon type={deleteIcon} /> : null;\r\n\r\n    if (isEditing) {\r\n      w = 160;\r\n      buttons.push(\r\n        <Button\r\n          key={\"_btnOk\"}\r\n          loading={this.state.editSaveLoading}\r\n          onClick={this.completeEdit}\r\n          style={{ ...itemStyle }}\r\n        >\r\n          {okIcon}\r\n          {okText}\r\n        </Button>\r\n      );\r\n      buttons.push(\r\n        <Button key={\"_btnCancel\"} onClick={this.cancelEdit} style={itemStyle}>\r\n          {cancelIcon}\r\n          {cancelText}\r\n        </Button>\r\n      );\r\n    } else {\r\n      tools.forEach((d, i) => {\r\n        w += 80;\r\n\r\n        let styles = { ...itemStyle };\r\n\r\n        const menu = (\r\n          <Menu onClick={e => this.addRange(e.item.props.value)}>\r\n            <Menu.Item key=\"1\" value={5}>\r\n              5 行\r\n            </Menu.Item>\r\n            <Menu.Item key=\"2\" value={10}>\r\n              10 行\r\n            </Menu.Item>\r\n          </Menu>\r\n        );\r\n\r\n        if (d === \"addSingle\") {\r\n          buttons.push(\r\n            <Button\r\n              key={d + \"_1\"}\r\n              onClick={() => this.addRange(1)}\r\n              style={styles}\r\n            >\r\n              {addIcon}\r\n              {addText}\r\n            </Button>\r\n          );\r\n        }\r\n\r\n        if (d === \"add\") {\r\n          buttons.push(\r\n            <Dropdown key={d + \"_1\"} overlay={menu}>\r\n              <Button tool=\"add\" style={styles} onClick={() => this.addRange()}>\r\n                {addIcon} {addText}\r\n                <Icon type=\"down\" />\r\n              </Button>\r\n            </Dropdown>\r\n          );\r\n        }\r\n\r\n        if (d === \"edit\") {\r\n          buttons.push(\r\n            <Button key={d + \"_1\"} onClick={this.edit} style={styles}>\r\n              {editIcon}\r\n              {editText}\r\n            </Button>\r\n          );\r\n        }\r\n\r\n        if (d === \"delete\") {\r\n          buttons.push(\r\n            <Popconfirm\r\n              key={d}\r\n              title=\"确定删除选中的数据吗？\"\r\n              okText=\"确定\"\r\n              cancelText=\"取消\"\r\n              onConfirm={this.delete}\r\n            >\r\n              <Button\r\n                style={styles}\r\n                loading={this.state.deleteLoading}\r\n                onClick={e => {\r\n                  e.stopPropagation();\r\n                }}\r\n              >\r\n                {deleteIcon}\r\n                {deleteText}\r\n              </Button>\r\n            </Popconfirm>\r\n          );\r\n        }\r\n\r\n        if (typeof d === \"function\") {\r\n          buttons.push(\r\n            <span style={styles} key={\"_fnTools_\" + i}>\r\n              {d()}\r\n            </span>\r\n          );\r\n        }\r\n\r\n        if (typeof d === \"object\" && d !== null) {\r\n          let toolIcon = d.icon;\r\n          toolIcon = toolIcon ? <Icon type={toolIcon} /> : null;\r\n          let toolAttr = d.props || {};\r\n          buttons.push(\r\n            <Button\r\n              key={\"_objTools_\" + i}\r\n              onClick={d.handler}\r\n              style={styles}\r\n              {...toolAttr}\r\n            >\r\n              {toolIcon}\r\n              {d.text}\r\n            </Button>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    if (buttons.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    return <div>{buttons}</div>;\r\n  };\r\n\r\n  getProps = () => {\r\n    let props = this.props || {};\r\n    let newProps = Object.assign({}, props);\r\n\r\n    return newProps;\r\n  };\r\n\r\n  createToolBar = () => {\r\n    if (this.props.editable === true) {\r\n      let tools = this.editTools();\r\n\r\n      if (tools !== null) {\r\n        return (\r\n          <div\r\n            style={{\r\n              backgroundColor: \"#ffffff\"\r\n            }}\r\n          >\r\n            {tools}\r\n          </div>\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  getDataRows = () => {\r\n    let { data, addedData, isAdding, isAddingRange, dataList } = this.state;\r\n\r\n    let arr = data;\r\n\r\n    let { isAppend, rowKey } = this.props;\r\n\r\n    let addedRows = [];\r\n\r\n    addedData.forEach(d => {\r\n      if (dataList.findIndex(c => c[rowKey] === d[rowKey]) <= -1) {\r\n        let r = d;\r\n        r.__isAddedRow = true;\r\n        addedRows.push(r);\r\n      }\r\n    });\r\n\r\n    if (isAdding === true || isAddingRange === true) {\r\n      if (isAppend === true) {\r\n        arr = [].concat(data).concat(addedRows);\r\n      } else {\r\n        arr = addedRows;\r\n      }\r\n    }\r\n\r\n    return arr;\r\n  };\r\n\r\n  updateRows = callback => {\r\n    let arr = [];\r\n\r\n    if (typeof callback === \"function\") {\r\n      let currData = this.getDataRows();\r\n\r\n      arr = callback(currData);\r\n\r\n      if (arr.length > 0) {\r\n        this.setState({\r\n          data: this.state.data\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  api = {\r\n    editAll: this.editAll,\r\n    addRange: this.addRange,\r\n    delete: this.delete,\r\n    reset: this.reset,\r\n    completeEdit: this.completeEdit,\r\n    cancelEdit: this.cancelEdit,\r\n    isEditing: this.isEditing,\r\n    getData: () => this.state.data\r\n  };\r\n\r\n  headerExtra = () => {\r\n    let header = null;\r\n\r\n    let { editToolsConfig = {} } = this.props;\r\n    let toolBarPosition = editToolsConfig.position;\r\n\r\n    if (toolBarPosition === \"top\") {\r\n      header = this.createToolBar();\r\n    }\r\n\r\n    return header;\r\n  };\r\n\r\n  footerExtra = () => {\r\n    let { editToolsConfig = {} } = this.props;\r\n    let toolBarPosition = editToolsConfig.position;\r\n\r\n    let toolBar = null;\r\n\r\n    if (toolBarPosition === \"bottom\") {\r\n      toolBar = this.createToolBar();\r\n    }\r\n\r\n    return toolBar;\r\n  };\r\n\r\n  render() {\r\n    let columns = this.formatColumns();\r\n\r\n    let arr = this.getDataRows();\r\n\r\n    let props = this.props;\r\n\r\n    let newProps = {\r\n      editable: true,\r\n      data: arr,\r\n      columns,\r\n      initRef: this.initRef,\r\n      headerExtra: this.headerExtra,\r\n      footerExtra: this.footerExtra\r\n    };\r\n\r\n    return <Table {...props} {...newProps} />;\r\n  }\r\n}\r\n\r\nexport default EditableTable;\r\n","import React from \"react\";\r\nimport FeaturedTable from \"./Editable\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./styles.css\";\r\n\r\nconst Table = React.forwardRef((props, ref) => (\r\n  <FeaturedTable {...props} ref={ref} />\r\n));\r\n\r\nTable.defaultProps = {\r\n  editable: false,\r\n  editTools: [\"edit\", \"add\"],\r\n  editToolsConfig: {\r\n    position: \"bottom\",\r\n    itemStyle: { marginLeft: \"5px\" },\r\n    editText: \"\",\r\n    editIcon: \"\",\r\n    addText: \"\",\r\n    addIcon: \"\",\r\n    deleteText: \"\",\r\n    deleteIcon: \"\",\r\n    okText: \"\",\r\n    okIcon: \"\",\r\n    cancelText: \"\",\r\n    cancelIcon: \"\"\r\n  },\r\n  defaultAddCount: 1,\r\n  isAppend: false,\r\n  validateTrigger: \"onSave\",\r\n  validateDelay: 300,\r\n  allowSaveEmpty: false,\r\n  dataControled: false,\r\n  alwaysValidate: false,\r\n  settable: true,\r\n  pagination: false\r\n};\r\n\r\nTable.propTypes = {\r\n  /** 是否允许编辑 */\r\n  editable: PropTypes.bool,\r\n  /** 分页 */\r\n  pagination: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\r\n  /** 工具栏，工具按钮 ['edit', 'add','delete',{icon:\"\",text:\"\",props:{},handler:Function},Function] addSingle:单行新增 */\r\n  editTools: PropTypes.array,\r\n  /** 工具栏，工具按钮属性配置{ position: \"bottom\", itemStyle: { marginLeft: \"5px\" }, editText: \"\", editIcon: \"\", addText: \"\", addIcon: \"\", deleteText: \"\", deleteIcon: \"\", okText: \"\", okIcon: \"\", cancelText: \"\", cancelIcon: \"\" } */\r\n  editToolsConfig: PropTypes.object,\r\n  /** 新增行时，是追加，还是清空当前页数据 */\r\n  isAppend: PropTypes.bool,\r\n  /** 新增行时的默认条数 */\r\n  defaultAddCount: PropTypes.number,\r\n\r\n  /** 编辑确定事件 (changedRows,newRows,editType)=>void\r\n   * @param {Array} changedRows-改变的数据行\r\n   * @param {Array} newRows-改变后最新的数据\r\n   * @param {string} editType-编辑类型;\"edit\":编辑;\"add\":新增;\"delete\":删除\r\n   */\r\n  onEditSave: PropTypes.func,\r\n  /** 当没有改变行数据时，是否仍然执行onEditSave */\r\n  allowSaveEmpty: PropTypes.bool,\r\n  /** 验证时机 */\r\n  validateTrigger: PropTypes.oneOf([\"onChange\", \"onBlur\", \"onSave\"]),\r\n\r\n  /** 新增按钮前置事件，返回false不进入新增状态 ()=>bool */\r\n  onBeforeAdd: PropTypes.func,\r\n\r\n  /** 新增按钮事件 (addedData, newData)=>void\r\n   * @param {Array} addedData-添加的数据行\r\n   * @param {Array} newRows-添加后最新的数据\r\n   */\r\n  onAdd: PropTypes.func,\r\n\r\n  /** 新增时的行数据模板，可通过此项设置默认行数据 (rowIndex)=>object\r\n   * @param {numer} rowIndex\r\n   * @returns {object} 行对象\r\n   */\r\n  rowTemplate: PropTypes.func,\r\n\r\n  /** 编辑取消事件 */\r\n  onCancel: PropTypes.func,\r\n  /** 编辑按钮前置事件，返回false不进入编辑状态 */\r\n  onBeforeEdit: PropTypes.func,\r\n\r\n  /** 编辑按钮事件 */\r\n  onEdit: PropTypes.func,\r\n  /**\r\n   * 删除按钮前置事件,返回false 不可删除\r\n   */\r\n  onBeforeDelete: PropTypes.func,\r\n  /** 删除按钮事件 */\r\n  onDelete: PropTypes.func,\r\n  /** 无论是否存在输入变化，是否始终验证 */\r\n  alwaysValidate: PropTypes.bool,\r\n  /** 数据是否完全受控，如若受控，请在onEditSave、onCancel中自行更新数据源 */\r\n  dataControled: PropTypes.bool,\r\n  /** 是否可进行属性设置 */\r\n  settable: PropTypes.bool,\r\n  /** 表格全局id，通过此id记忆表格配置，由于采用localStorage存储配置，需保证id唯一 */\r\n  tableId: function(props, propName, componentName) {\r\n    let count = 0;\r\n    let v = props[propName];\r\n\r\n    if (typeof v !== \"undefined\" && v !== \"\") {\r\n      let tbs = document.getElementsByClassName(\"table-extend\");\r\n\r\n      for (let i = 0, len = tbs.length; i < len; i++) {\r\n        const tb = tbs[i];\r\n        if (tb) {\r\n          const t = tb.getAttribute(\"data-tableid\");\r\n          if (t === v) {\r\n            count = count + 1;\r\n\r\n            if (count > 1) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (count > 1) {\r\n      return new Error(\r\n        ` Encountered two table with the same tableId, '${v}'.The tableId must be unique in the whole application.\r\n                  We Recommended set the tableId based on file path.\r\n                  eg: platform/user/index.js =>  platform-user-xxx `\r\n      );\r\n    }\r\n  }\r\n};\r\n\r\nexport default Table;\r\n"],"sourceRoot":""}