(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"./doc/Editable/index.mdx":function(e,n,t){"use strict";t.r(n);var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),d=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),o=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),u=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),c=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=t("./node_modules/react/index.js"),h=t.n(s),m=t("./node_modules/@mdx-js/react/dist/index.es.js"),p=t("./node_modules/docz/dist/index.esm.js"),f=t("../tablex/lib/index.js"),g=t.n(f),v=t("./node_modules/antd/es/input/index.js"),b=t("./node_modules/antd/es/input-number/index.js"),x=t("./node_modules/antd/es/select/index.js"),w=t("./node_modules/antd/es/date-picker/index.js"),y=t("./node_modules/antd/es/switch/index.js"),I=t("./node_modules/antd/es/checkbox/index.js"),C=t("./node_modules/antd/es/button/index.js"),k=t("./node_modules/antd/es/menu/index.js"),j=t("./node_modules/lodash/lodash.js"),O=t.n(j),E=v.a.Search,S="/tablex";var T=function(e){function n(){var e,t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=Object(l.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(i)))).columns=[{dataIndex:"code",key:"code",title:"\u7f16\u7801",width:200},{title:"\u540d\u79f0",width:150,key:"name",dataIndex:"name"},{dataIndex:"description",key:"description",title:"\u7279\u5f81\u63cf\u8ff0",width:150},{dataIndex:"unit",key:"unit",title:"\u5355\u4f4d",width:150},{dataIndex:"quantities",key:"quantities",title:"\u5de5\u7a0b\u91cf",width:150,editor:function(e,n,t,a,i,r){return h.a.createElement(v.a,{defaultValue:e,ref:i,onChange:function(e){a({quantities:e.target.value})}})}},{dataIndex:"unitPrice",key:"unitPrice",title:"\u7efc\u5408\u5355\u4ef7",width:150,editor:function(e,n,t,a,i,r){return h.a.createElement(b.a,{defaultValue:e,ref:i,onKeyDown:function(e){e.stopPropagation()},onChange:function(e){a({unitPrice:e})}})}},{dataIndex:"totalPrice",key:"totalPrice",title:"\u5408\u4ef7",width:150,render:function(e,n){var t=n.unitPrice*n.quantities;return isNaN(t)?"":t}},{dataIndex:"evaluation",key:"evaluation",title:"\u6682\u4f30\u4ef7",width:150}],t.state={loading:!1,treeData:[]},t.getData=function(){t.setState({loading:!0});var e,n,a;e=S+"/public/data.json",n={onSuccess:function(e){e=O.a.uniqBy(e,(function(e){return e.code}));var n=!1;e.forEach((function(e){var t=e.code||"",a="",i=t.length;if(e.id=t,i>=2){var r=2;i%2!==0&&(r=3),"040704"===t&&(n=!0),a=!0===n?"0407":t.substring(0,i-r)}e.pid=a}));var a=Object(f.unflatten)(e,"id","pid");t.setState({loading:!1,treeData:a})}},(a=new XMLHttpRequest).open("GET",e,!0),a.onreadystatechange=function(){},a.onload=function(){if(200==a.status&&"function"===typeof n.onSuccess){var e={};a.responseText&&(e=JSON.parse(a.responseText)),n.onSuccess(e)}},a.onerror=n.onError,a.send()},t.scrollToItem=function(e){t.refs.tb&&t.refs.tb.scrollToItem(e,"center")},t.expandTo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.refs.tb.expandTo(e)},t.expandAll=function(){t.refs.tb.expandAll()},t.collapseAll=function(){t.refs.tb.collapseAll()},t.rowKey="id",t.deleteRow=function(e){var n=e[t.rowKey];t.refs.tb.api.deleteData([n])},t.copiedRow=null,t.copy=function(e){var n={};for(var a in e)e.hasOwnProperty(a)&&"children"!==a&&(n[a]=e[a]);var i=JSON.stringify(n);t.copiedRow=JSON.stringify(n);var r=document.createElement("input");document.body.appendChild(r),r.setAttribute("value",i),r.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(r)},t.pasteChildren=function(e){var n=t.rowKey,a=t.copiedRow;if(a){var i=JSON.parse(a);i[n]="copied_row_"+i[n],t.refs.tb.api.insertData({data:[i],parentKey:e[n],editing:!0,scrollTo:!1}),t.isCut=!1,t.copiedRow=null}},t.isCut=!1,t.cut=function(e){t.copy(e),t.isCut=!0},t.selectAll=function(e){t.refs.tb.selectToggle(e)},t.expandToggle=function(e){t.refs.tb.expandToggle(e)},t.onMenuClick=function(e){var n=e.key,a=e.item;console.log("key:",a.props.row);var i={del:t.deleteRow,copy:t.copy,cut:t.cut,pasteChildren:t.pasteChildren,selectAll:t.selectAll,expandToggle:t.expandToggle,export:t.export}[n];"function"===typeof i&&i(a.props.row)},t.searchIndex=-1,t.searchedKey="",t.onChangeSearch=function(){t.searchIndex=0,t.searchedKey=""},t.onSearch=function(e){if(!e)return t.searchIndex=0,t.searchedKey="",t.scrollToItem(-1),void t.forceUpdate();t.expandAll();var n=-1,a="",i=t.refs.tb.findData((function(n){return n.name.indexOf(e)>-1}),{startIndex:t.searchIndex,focused:!0});i&&(n=i.index,a=i.row.id),n>-1?(t.searchIndex=n+1,t.searchedKey=a):(t.searchIndex=-1,t.searchedKey="")},t.onFilter=function(e){var n=t.state.treeData;e?(t.refs.tb.filterData((function(n){return n.name.indexOf(e)>-1})),t.expandAll()):t.setState({treeData:n.slice()},t.collapseAll)},t.contentMenu=function(e){var n={style:{height:"auto",lineHeight:"normal"},row:e};return h.a.createElement(k.a,{selectable:!1,onClick:t.onMenuClick},h.a.createElement(k.a.Item,Object.assign({key:"del"},n),"\u5220\u9664\u884c"),h.a.createElement(k.a.Item,Object.assign({key:"copy"},n),"\u590d\u5236\u884c"),h.a.createElement(k.a.Item,Object.assign({key:"cut"},n),"\u526a\u5207\u884c"),h.a.createElement(k.a.Item,Object.assign({key:"pasteChildren"},n),"\u7c98\u8d34\u884c(\u4e0b\u7ea7)"),h.a.createElement(k.a.Item,Object.assign({key:"selectAll"},n),"\u5168\u9009/\u5168\u5426"),h.a.createElement(k.a.Item,Object.assign({key:"expandToggle"},n),"\u5c55\u5f00/\u6536\u7f29"),h.a.createElement(k.a.Item,Object.assign({key:"export"},n),"\u5bfc\u51fa"),h.a.createElement(k.a.Item,Object.assign({key:"print"},n),"\u6253\u5370"))},t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"render",value:function(){var e=this;return h.a.createElement("div",{style:{height:"100%"}},h.a.createElement(f.Table,{rowKey:"id",editable:!0,ref:"tb",loading:this.state.loading,columns:this.columns,selectMode:"multiple",checkStrictly:!1,data:this.state.treeData,orderNumber:{resizable:!0},contextMenu:this.contentMenu,validateTrigger:"onChange",isAppend:!0,header:function(){return h.a.createElement("div",null,h.a.createElement(C.a,{onClick:e.getData},"\u83b7\u53d6\u6570\u636e"),h.a.createElement(C.a,{onClick:e.expandAll,style:{margin:"0 5px"}},"\u5c55\u5f00\u6240\u6709"),h.a.createElement(C.a,{onClick:function(){return e.expandTo(1)},style:{margin:"0 5px"}},"\u5c55\u5f00\u81f3\u7b2c\u4e8c\u7ea7"),h.a.createElement(C.a,{onClick:e.collapseAll},"\u6298\u53e0\u6240\u6709"),h.a.createElement(E,{style:{float:"right",margin:"0 5px",width:"150px"},placeholder:"\u8f93\u5165\u540d\u79f0\u8fc7\u6ee4",onSearch:e.onFilter}),h.a.createElement(E,{style:{float:"right",margin:"0 5px",width:"150px"},placeholder:"\u8f93\u5165\u540d\u79f0\u67e5\u627e",onSearch:e.onSearch,onChange:e.onChangeSearch}))}}))}}]),n}(s.Component),D=T;"undefined"!==typeof T&&T&&T===Object(T)&&Object.isExtensible(T)&&Object.defineProperty(T,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Demo",filename:"doc\\Editable\\complex\\index.js"}});var R=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).tableRef=h.a.createRef(),t.state={data:[],loading:!1,expandedRowKeys:[]},t.columns=[{dataIndex:"column-1",key:"column-1",title:"column-1",align:"left",halign:"center",minWidth:300,onCell:function(e,n,a){return{onClick:function(){t.beginEdit(e)}}},validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,i){return h.a.createElement(v.a,{defaultValue:e,ref:i,onChange:function(e){return a([{"column-1":e.target.value,id:n.id},{id:"3",address:e.target.value}])}})}},{title:"appellation",width:150,halign:"left",children:[{dataIndex:"address",title:"name",width:200,onCell:function(e,n,a){return{onClick:function(){t.beginEdit(e)}}},editor:function(e,n,t,a,i){return h.a.createElement(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({address:e.target.value})}})}},{title:"nick name",width:150,children:[{dataIndex:"id",title:"nick-1",maxWidth:300,width:150},{dataIndex:"level",title:"level"}]}]},{dataIndex:"id",key:"column-4",title:"id"}],t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){function e(n,t,a,i){if(!(n>a)){for(var r=n,l=[],d=0;d<3;d++){var o=t+"-"+n+"-"+d,u={id:o,"column-1":"Edward King "+o,age:32,level:n,address:"London, Park Lane no. "+d};2===d&&(u.children=e(r+1,o,a,d)),l.push(u)}return l}}this.setState({data:function(){for(var n=[],t=0;t<10;t++){var a=e(0,t,2),i={id:""+t,level:0,"column-1":"Edward King "+t,age:t,address:"London, Park Lane no. "+t};t%3===0&&(i.children=a),n.push(i)}return n}()})}},{key:"beginEdit",value:function(e){var n=[];n.push(e.id),this.tableRef.current.api.editRows(n)}},{key:"completeEdit",value:function(){this.tableRef.current.api.completeEdit()}},{key:"cancelEdit",value:function(){this.tableRef.current.api.cancelEdit()}},{key:"insertData",value:function(){var e=[];e.push({id:"inserted-row-"+(new Date).getTime()}),this.tableRef.current.api.insertData({data:e,parentKey:"3",editing:!0,prepend:!1,startIndex:2})}},{key:"modifyData",value:function(){[].push({id:"inserted-row-"+(new Date).getTime()}),this.tableRef.current.api.modifyData([{id:"3","column-1":"modifyData-"+(new Date).getTime(),level:3}])}},{key:"delete",value:function(){this.tableRef.current.api.deleteData()}},{key:"onEditSave",value:function(e,n,t){console.log("onEditSave changedRows:",e),console.log("onEditSave newRows:",n),this.setState({data:n})}},{key:"render",value:function(){var e=this;return h.a.createElement("div",{style:{height:"100%"}},h.a.createElement(f.Table,{header:function(){return h.a.createElement("div",null,h.a.createElement(C.a,{onClick:e.completeEdit.bind(e),style:{cursor:"pointer"}},"complete edit"),h.a.createElement(C.a,{onClick:e.cancelEdit.bind(e),style:{cursor:"pointer",marginLeft:10}},"cancel edit"),h.a.createElement(C.a,{onClick:e.insertData.bind(e),style:{cursor:"pointer",marginLeft:10}},"insert data"),h.a.createElement(C.a,{onClick:e.modifyData.bind(e),style:{cursor:"pointer",marginLeft:10}},"modify data"),h.a.createElement(C.a,{onClick:e.delete.bind(e),style:{cursor:"pointer",marginLeft:10}},"delete"))},editable:!1,isAppend:!1,allowSaveEmpty:!0,alwaysValidate:!0,ref:this.tableRef,rowKey:"id",onEditSave:this.onEditSave.bind(this),columns:this.columns,selectMode:"multiple",checkStrictly:!1,data:this.state.data,validateTrigger:"onChange",selectOnRowClick:!1}))}}]),n}(h.a.Component),_=R;"undefined"!==typeof R&&R&&R===Object(R)&&Object.isExtensible(R)&&Object.defineProperty(R,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Demo",filename:"doc\\Editable\\customEdit.js"}}),t.d(n,"default",(function(){return A}));var P={},V="wrapper";function A(e){var n=e.components,t=Object(c.a)(e,["components"]);return Object(m.b)(V,Object.assign({},P,t,{components:n,mdxType:"MDXLayout"}),Object(m.b)("h1",{id:"\u7528\u6cd5\u793a\u4f8b"},"\u7528\u6cd5\u793a\u4f8b"),Object(m.b)("pre",null,Object(m.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),'import Table, { flatten, unflatten } from "tablex";\n')),Object(m.b)("h2",{id:"\u57fa\u672c\u7f16\u8f91\u53ca\u9a8c\u8bc1"},"\u57fa\u672c\u7f16\u8f91\u53ca\u9a8c\u8bc1"),Object(m.b)("blockquote",null,Object(m.b)("p",{parentName:"blockquote"},"\u7f16\u8f91\u6709\u8ffd\u52a0\u6a21\u5f0f\u3001\u975e\u8ffd\u52a0\u6a21\u5f0f\u4e24\u79cd\uff0c\u901a\u8fc7isAppend=true|false \u63a7\u5236\uff0c\u8ffd\u52a0\u6a21\u5f0f\u4e0d\u4f1a\u66f4\u6539\u5f53\u524d\u8868\u683c\u89c6\u56fe\u7684\u663e\u793a\u6570\u636e\uff0c\u5426\u5219\u5c06\u4f1a\u6e05\u7a7a\u5f53\u524d\u8868\u683c\u6570\u636e\u89c6\u56fe\uff08\u4e0d\u5f71\u54cd\u6570\u636e\uff09")),Object(m.b)(p.c,{__position:0,__code:"class Demo extends React.Component {\n    generateData(columns, count = 20, prefix = 'Row') {\n      return new Array(count).fill(0).map((row, rowIndex) => {\n        return columns.reduce(\n          (rowData, column, columnIndex) => {\n            if (column.dataIndex !== 'id') {\n              rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1)\n            } else {\n              rowData[column.dataIndex] =\n                prefix + ' ' + rowIndex + ' - Col ' + columnIndex\n            }\n            return rowData\n          },\n          {\n            id: prefix + rowIndex,\n            parentId: null,\n          },\n        )\n      })\n    }\n    constructor(props) {\n      super(props)\n      const columns = [\n        {\n          dataIndex: 'id',\n          title: 'id',\n          key: 'id',\n          width: 150,\n        },\n        {\n          dataIndex: 'column-1',\n          title: 'column-1',\n          width: 100,\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ ['column-1']: e.target.value })}\n              />\n            )\n          },\n        },\n\n        {\n          dataIndex: 'column-2',\n          title: 'column-2',\n          width: 150,\n          align: 'center',\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <InputNumber\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ ['column-2']: e })}\n              />\n            )\n          },\n        },\n        {\n          dataIndex: 'column-3',\n          title: 'column-3',\n          align: 'right',\n          editor: function(value, row, index, onchange, ref) {\n            return <Select defaultValue={value} ref={ref} />\n          },\n        },\n        {\n          dataIndex: 'column-4',\n          title: 'column-4',\n          width: 100,\n          align: 'center',\n        },\n      ]\n\n      let data = this.generateData(columns, 10)\n\n      data[1].children = this.generateData(columns, 3, 'children-')\n\n      this.state = {\n        data: data,\n        columns: columns,\n      }\n    }\n    onEditSave(changedRows, newData, type) {\n      console.log('onEditSave:', newData)\n      this.setState({\n        data: newData,\n      })\n    }\n    render() {\n      let { columns, data } = this.state\n      return (\n        <Table\n          rowKey=\"id\"\n          columns={columns}\n          validateTrigger=\"onChange\"\n          data={data}\n          editable={true}\n          keyboardNavigation={true}\n          alwaysValidate={true}\n          isAppend={false}\n          allowSaveEmpty={false}\n          selectMode={'multiple'}\n          checkStrictly={false}\n          editTools={['edit', 'add', 'delete']}\n          onEditSave={this.onEditSave.bind(this)}\n        />\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:400},mdxType:"Playground"},function(e){function n(e){var t;Object(r.a)(this,n);var a=[{dataIndex:"id",title:"id",key:"id",width:150},{dataIndex:"column-1",title:"column-1",width:100,validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,r){return Object(m.b)(v.a,{defaultValue:e,ref:r,onChange:function(e){return a(Object(i.a)({},"column-1",e.target.value))},mdxType:"Input"})}},{dataIndex:"column-2",title:"column-2",width:150,align:"center",editor:function(e,n,t,a,r){return Object(m.b)(b.a,{defaultValue:e,ref:r,onChange:function(e){return a(Object(i.a)({},"column-2",e))},mdxType:"InputNumber"})}},{dataIndex:"column-3",title:"column-3",align:"right",editor:function(e,n,t,a,i){return Object(m.b)(x.a,{defaultValue:e,ref:i,mdxType:"Select"})}},{dataIndex:"column-4",title:"column-4",width:100,align:"center"}],o=(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).generateData(a,10);return o[1].children=t.generateData(a,3,"children-"),t.state={data:o,columns:a},t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"generateData",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Row";return new Array(n).fill(0).map((function(n,a){return e.reduce((function(e,n,i){return"id"!==n.dataIndex?e[n.dataIndex]=Math.floor(100*Math.random()+1):e[n.dataIndex]=t+" "+a+" - Col "+i,e}),{id:t+a,parentId:null})}))}}]),Object(o.a)(n,[{key:"onEditSave",value:function(e,n,t){console.log("onEditSave:",n),this.setState({data:n})}},{key:"render",value:function(){var e=this.state,n=e.columns,t=e.data;return Object(m.b)(g.a,{rowKey:"id",columns:n,validateTrigger:"onChange",data:t,editable:!0,keyboardNavigation:!0,alwaysValidate:!0,isAppend:!1,allowSaveEmpty:!1,selectMode:"multiple",checkStrictly:!1,editTools:["edit","add","delete"],onEditSave:this.onEditSave.bind(this),mdxType:"Table"})}}]),n}(h.a.Component)),Object(m.b)(p.c,{__position:1,__code:"class Demo extends React.Component {\n    constructor(props) {\n      super(props)\n      const columns = [\n        {\n          dataIndex: 'id',\n          title: 'id',\n          key: 'id',\n          width: 150,\n        },\n        {\n          dataIndex: 'column-1',\n          title: 'column-1',\n          width: 100,\n          validator: function(value, row) {\n            console.log('validator:', row.id, value)\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => {\n                  onchange({ 'column-1': e.target.value })\n                }}\n              />\n            )\n          },\n        },\n\n        {\n          dataIndex: 'column-2',\n          title: 'column-2',\n          width: 150,\n          align: 'center',\n        },\n\n        {\n          dataIndex: 'column-3',\n          title: 'column-3',\n          align: 'right',\n        },\n        {\n          dataIndex: 'column-4',\n          title: 'column-4',\n          width: 100,\n          align: 'center',\n        },\n      ]\n\n      this.state = {\n        data: [],\n        columns: columns,\n      }\n    }\n    onEditSave(changedRows, newData, type) {\n      console.log('onEditSave changedRows:', changedRows)\n      console.log('onEditSave newData:', newData)\n      this.setState({\n        data: newData,\n      })\n    }\n    onBeforeAdd() {\n      console.log('onBeforeAdd:', this.state.data)\n      this.setState({\n        data: this.state.data.slice(),\n      })\n    }\n    render() {\n      let { columns, data } = this.state\n      return (\n        <Table\n          rowKey=\"id\"\n          columns={columns}\n          validateTrigger=\"onChange\"\n          data={data}\n          isAppend={true}\n          editable={true}\n          onBeforeAdd2={this.onBeforeAdd.bind(this)}\n          allowSaveEmpty={true}\n          alwaysValidate={true}\n          selectMode={'multiple'}\n          checkStrictly={false}\n          editTools={['edit', 'add', 'delete']}\n          onEditSave={this.onEditSave.bind(this)}\n        />\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:400},mdxType:"Playground"},function(e){function n(e){var t;Object(r.a)(this,n);var a=[{dataIndex:"id",title:"id",key:"id",width:150},{dataIndex:"column-1",title:"column-1",width:100,validator:function(e,n){return console.log("validator:",n.id,e),e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){a({"column-1":e.target.value})},mdxType:"Input"})}},{dataIndex:"column-2",title:"column-2",width:150,align:"center"},{dataIndex:"column-3",title:"column-3",align:"right"},{dataIndex:"column-4",title:"column-4",width:100,align:"center"}];return(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).state={data:[],columns:a},t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"onEditSave",value:function(e,n,t){console.log("onEditSave changedRows:",e),console.log("onEditSave newData:",n),this.setState({data:n})}},{key:"onBeforeAdd",value:function(){console.log("onBeforeAdd:",this.state.data),this.setState({data:this.state.data.slice()})}},{key:"render",value:function(){var e=this.state,n=e.columns,t=e.data;return Object(m.b)(g.a,{rowKey:"id",columns:n,validateTrigger:"onChange",data:t,isAppend:!0,editable:!0,onBeforeAdd2:this.onBeforeAdd.bind(this),allowSaveEmpty:!0,alwaysValidate:!0,selectMode:"multiple",checkStrictly:!1,editTools:["edit","add","delete"],onEditSave:this.onEditSave.bind(this),mdxType:"Table"})}}]),n}(h.a.Component)),Object(m.b)("h2",{id:"\u7f16\u8f91\u5668\u65e0\u8fb9\u6846"},"\u7f16\u8f91\u5668\u65e0\u8fb9\u6846"),Object(m.b)("blockquote",null,Object(m.b)("p",{parentName:"blockquote"},"\u6b64\u6a21\u5f0f\uff0c\u53ea\u5bf9antd\u5185\u7f6e\u7684input\u3001datepicker\u3001inputnumber\u3001select\u751f\u6548\u3002\u82e5\u60f3\u81ea\u5b9a\u4e49\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u6837\u5f0f\u8fdb\u884c\u8986\u76d6")),Object(m.b)(p.c,{__position:2,__code:"class Demo extends React.Component {\n    generateData(columns, count = 20, prefix = 'Row') {\n      return new Array(count).fill(0).map((row, rowIndex) => {\n        return columns.reduce(\n          (rowData, column, columnIndex) => {\n            if (column.dataIndex !== 'id') {\n              rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1)\n            } else {\n              rowData[column.dataIndex] =\n                prefix + ' ' + rowIndex + ' - Col ' + columnIndex\n            }\n            return rowData\n          },\n          {\n            id: prefix + rowIndex,\n            parentId: null,\n          },\n        )\n      })\n    }\n    constructor(props) {\n      super(props)\n      const columns = [\n        {\n          dataIndex: 'id',\n          title: 'id',\n          key: 'id',\n          width: 150,\n        },\n        {\n          dataIndex: 'column-1',\n          title: 'column-1',\n          width: 100,\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ ['column-1']: e.target.value })}\n              />\n            )\n          },\n        },\n\n        {\n          dataIndex: 'column-2',\n          title: 'column-2',\n          width: 150,\n          align: 'center',\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <InputNumber\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ ['column-2']: e })}\n              />\n            )\n          },\n        },\n\n        {\n          dataIndex: 'column-3',\n          title: 'column-3',\n          align: 'right',\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Select\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ ['column-3']: e })}\n              />\n            )\n          },\n        },\n        {\n          dataIndex: 'column-4',\n          title: 'column-4',\n          width: 100,\n          align: 'center',\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <DatePicker\n                placeholder=\"\"\n                ref={ref}\n                onChange={e => onchange({ ['column-4']: e })}\n              />\n            )\n          },\n        },\n        {\n          dataIndex: 'column-5',\n          title: 'column-5',\n          width: 100,\n          align: 'center',\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Switch\n                ref={ref}\n                onChange={e => onchange({ ['column-5']: e.target.value })}\n              />\n            )\n          },\n        },\n      ]\n\n      let data = this.generateData(columns, 10)\n\n      data[1].children = this.generateData(columns, 3, 'children-')\n\n      this.state = {\n        data: data,\n        columns: columns,\n      }\n    }\n    onEditSave(changedRows, newData, type) {\n      console.log('onEditSave:', newData)\n      this.setState({\n        data: newData,\n      })\n    }\n    componentDidMount() {\n      this.refs.tableRef.api.edit()\n    }\n    render() {\n      let { columns, data } = this.state\n      return (\n        <Table\n          rowKey=\"id\"\n          ref=\"tableRef\"\n          columns={columns}\n          validateTrigger=\"onChange\"\n          data={data}\n          editorNoBorder={true}\n          editable={true}\n          selectMode={'multiple'}\n          checkStrictly={false}\n          editTools={['edit', 'add', 'delete']}\n          onEditSave={this.onEditSave.bind(this)}\n        />\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:600},mdxType:"Playground"},function(e){function n(e){var t;Object(r.a)(this,n);var a=[{dataIndex:"id",title:"id",key:"id",width:150},{dataIndex:"column-1",title:"column-1",width:100,validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,r){return Object(m.b)(v.a,{defaultValue:e,ref:r,onChange:function(e){return a(Object(i.a)({},"column-1",e.target.value))},mdxType:"Input"})}},{dataIndex:"column-2",title:"column-2",width:150,align:"center",validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,r){return Object(m.b)(b.a,{defaultValue:e,ref:r,onChange:function(e){return a(Object(i.a)({},"column-2",e))},mdxType:"InputNumber"})}},{dataIndex:"column-3",title:"column-3",align:"right",validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,r){return Object(m.b)(x.a,{defaultValue:e,ref:r,onChange:function(e){return a(Object(i.a)({},"column-3",e))},mdxType:"Select"})}},{dataIndex:"column-4",title:"column-4",width:100,align:"center",validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,r){return Object(m.b)(w.a,{placeholder:"",ref:r,onChange:function(e){return a(Object(i.a)({},"column-4",e))},mdxType:"DatePicker"})}},{dataIndex:"column-5",title:"column-5",width:100,align:"center",validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,r){return Object(m.b)(y.a,{ref:r,onChange:function(e){return a(Object(i.a)({},"column-5",e.target.value))},mdxType:"Switch"})}}],o=(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).generateData(a,10);return o[1].children=t.generateData(a,3,"children-"),t.state={data:o,columns:a},t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"generateData",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Row";return new Array(n).fill(0).map((function(n,a){return e.reduce((function(e,n,i){return"id"!==n.dataIndex?e[n.dataIndex]=Math.floor(100*Math.random()+1):e[n.dataIndex]=t+" "+a+" - Col "+i,e}),{id:t+a,parentId:null})}))}}]),Object(o.a)(n,[{key:"onEditSave",value:function(e,n,t){console.log("onEditSave:",n),this.setState({data:n})}},{key:"componentDidMount",value:function(){this.refs.tableRef.api.edit()}},{key:"render",value:function(){var e=this.state,n=e.columns,t=e.data;return Object(m.b)(g.a,{rowKey:"id",ref:"tableRef",columns:n,validateTrigger:"onChange",data:t,editorNoBorder:!0,editable:!0,selectMode:"multiple",checkStrictly:!1,editTools:["edit","add","delete"],onEditSave:this.onEditSave.bind(this),mdxType:"Table"})}}]),n}(h.a.Component)),Object(m.b)("h2",{id:"\u53ea\u8bfb\u6a21\u5f0f"},"\u53ea\u8bfb\u6a21\u5f0f"),Object(m.b)("blockquote",null,Object(m.b)("p",{parentName:"blockquote"},"\u53ea\u8bfb\u6a21\u5f0f\u5c06\u4e0d\u663e\u793a\u7f16\u8f91\u680f\u53ca\u590d\u9009\u6846\uff0c\u4e5f\u65e0\u6cd5\u8fdb\u884c\u884c\u9009\u62e9")),Object(m.b)(p.c,{__position:3,__code:"class Demo extends React.PureComponent {\n    constructor(props) {\n      super(props)\n      this.state = {\n        data: [\n          {\n            id: '1',\n            name: '\u5f20\u4e09',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u5f20\u4e09',\n          },\n          {\n            id: '2',\n            name: '\u674e\u56db',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u674e\u56db',\n          },\n        ],\n      }\n\n      this.columns = [\n        {\n          dataIndex: 'id',\n          title: '\u7f16\u53f7',\n          width: 200,\n          validator: (value, row) => {\n            if (!value) {\n              return { valid: false, message: '' }\n            }\n            return { valid: true, message: '' }\n          },\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => {\n                  let newValue = e.target.value\n                  onchange({ number: newValue })\n                }}\n              ></Input>\n            )\n          },\n        },\n        {\n          width: 150,\n          dataIndex: 'name',\n          title: '\u59d3\u540d',\n          width: 150,\n          validator: (value, row) => {\n            if (!value) {\n              return { valid: false, message: '' }\n            }\n\n            return { valid: true, message: '' }\n          },\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => {\n                  let newValue = e.target.value\n                  onchange({ name: newValue })\n                }}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'age',\n          title: '\u5e74\u9f84',\n          width: 150,\n\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e =>\n                  onchange({ age: e.target.value, idcard: e.target.value })\n                }\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'idcard',\n          title: '\u8eab\u4efd\u8bc1',\n          width: 150,\n\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                value={value}\n                ref={ref}\n                onChange={e => onchange({ idcard: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'tel',\n          title: '\u7535\u8bdd\u53f7\u7801',\n          width: 150,\n\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ tel: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'remark',\n          title: '\u5907\u6ce8',\n          editor: (value, row, index, onchange, ref) => {\n            return <Input value={value} ref={ref} disabled={true}></Input>\n          },\n        },\n      ]\n    }\n    onEditSave(changedRows, newData, type) {\n      this.setState({\n        data: newData,\n      })\n    }\n\n    render() {\n      let { data, count } = this.state\n\n      return (\n        <Table\n          editTools={['edit', 'add', 'delete']}\n          ref=\"etable\"\n          columns={this.columns}\n          dataSource={data}\n          defaultAddCount={1}\n          onEditSave={this.onEditSave.bind(this)}\n          isAppend={true}\n          alwaysValidate={true}\n          validateTrigger=\"onChange\"\n          readOnly={true}\n          selectMode=\"multiple\"\n          rowKey=\"id\"\n        ></Table>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:400},mdxType:"Playground"},function(e){function n(e){var t,a;return Object(r.a)(this,n),(a=Object(l.a)(this,Object(d.a)(n).call(this,e))).state={data:[{id:"1",name:"\u5f20\u4e09",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u5f20\u4e09"},{id:"2",name:"\u674e\u56db",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u674e\u56db"}]},a.columns=[{dataIndex:"id",title:"\u7f16\u53f7",width:200,validator:function(e,n){return e?{valid:!0,message:""}:{valid:!1,message:""}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){var n=e.target.value;a({number:n})},mdxType:"Input"})}},(t={width:150,dataIndex:"name",title:"\u59d3\u540d"},Object(i.a)(t,"width",150),Object(i.a)(t,"validator",(function(e,n){return e?{valid:!0,message:""}:{valid:!1,message:""}})),Object(i.a)(t,"editor",(function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){var n=e.target.value;a({name:n})},mdxType:"Input"})})),t),{dataIndex:"age",title:"\u5e74\u9f84",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({age:e.target.value,idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"idcard",title:"\u8eab\u4efd\u8bc1",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,onChange:function(e){return a({idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"tel",title:"\u7535\u8bdd\u53f7\u7801",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({tel:e.target.value})},mdxType:"Input"})}},{dataIndex:"remark",title:"\u5907\u6ce8",editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,disabled:!0,mdxType:"Input"})}}],a}return Object(u.a)(n,e),Object(o.a)(n,[{key:"onEditSave",value:function(e,n,t){this.setState({data:n})}},{key:"render",value:function(){var e=this.state,n=e.data;e.count;return Object(m.b)(g.a,{editTools:["edit","add","delete"],ref:"etable",columns:this.columns,dataSource:n,defaultAddCount:1,onEditSave:this.onEditSave.bind(this),isAppend:!0,alwaysValidate:!0,validateTrigger:"onChange",readOnly:!0,selectMode:"multiple",rowKey:"id",mdxType:"Table"})}}]),n}(h.a.PureComponent)),Object(m.b)("h2",{id:"\u6570\u636e\u8054\u52a8"},"\u6570\u636e\u8054\u52a8"),Object(m.b)("blockquote",null,Object(m.b)("p",{parentName:"blockquote"},"\u5916\u90e8\u6570\u636e\u540c\u8868\u683c\u6570\u636e\u76f8\u4e92\u8054\u52a8")),Object(m.b)(p.c,{__position:4,__code:"class Demo extends React.PureComponent {\n    constructor(props) {\n      super(props)\n      this.state = {\n        count: 0,\n        data: [\n          {\n            id: '1',\n            name: '\u5f20\u4e09',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u5f20\u4e09',\n          },\n          {\n            id: '2',\n            name: '\u674e\u56db',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u674e\u56db',\n          },\n        ],\n      }\n\n      this.columns = [\n        {\n          dataIndex: 'id',\n          title: '\u7f16\u53f7',\n          width: 200,\n        },\n        {\n          dataIndex: 'name',\n          title: '\u59d3\u540d',\n          width: 150,\n          validator: (value, row) => {\n            if (!value) {\n              return { valid: false, message: '' }\n            }\n\n            return { valid: true, message: '' }\n          },\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                value={value}\n                ref={ref}\n                onChange={e => {\n                  let newValue = e.target.value\n\n                  row.name = newValue\n\n                  this.setState(\n                    {\n                      count: newValue,\n                    },\n                    () => {\n                      onchange({ name: newValue, remark: '\u6211\u662f' + newValue })\n                    },\n                  )\n                }}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'age',\n          title: '\u5e74\u9f84',\n          width: 150,\n          validator: (value, row) => {\n            if (!value) {\n              return { valid: false, message: '' }\n            }\n\n            return { valid: true, message: '' }\n          },\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e =>\n                  onchange({ age: e.target.value, idcard: e.target.value })\n                }\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'idcard',\n          title: '\u8eab\u4efd\u8bc1',\n          width: 150,\n          validator: (value, row) => {\n            if (!value) {\n              return { valid: false, message: '' }\n            }\n\n            return { valid: true, message: '' }\n          },\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                value={value}\n                ref={ref}\n                onChange={e => onchange({ idcard: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'tel',\n          title: '\u7535\u8bdd\u53f7\u7801',\n          width: 150,\n          validator: (value, row) => {\n            if (!value) {\n              return { valid: false, message: '' }\n            }\n\n            return { valid: true, message: '' }\n          },\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ tel: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'remark',\n          title: '\u5907\u6ce8',\n          editor: (value, row, index, onchange, ref) => {\n            return <Input value={value} ref={ref} disabled={true}></Input>\n          },\n        },\n      ]\n    }\n    onChange(e) {\n      let value = e.target.value\n\n      let { data, count } = this.state\n\n      let newData = [...data]\n\n      newData.forEach(d => {\n        d.name = value\n      })\n\n      this.setState({\n        count: value,\n        data: newData,\n      })\n    }\n\n    onEditSave(changedRows, newData, type) {\n      this.setState({\n        data: newData,\n      })\n    }\n\n    complete() {\n      this.refs['etable'].completeEdit()\n    }\n\n    render() {\n      let { data, count } = this.state\n\n      return (\n        <div>\n          <Input\n            value={count}\n            onChange={this.onChange.bind(this)}\n            style={{ margin: '10px 0' }}\n          ></Input>\n          <Button\n            onClick={this.complete.bind(this)}\n            style={{ margin: '10px 0' }}\n          >\n            \u5b8c\u6210\n          </Button>\n          <div style={{ height: 400 }}>\n            <Table\n              ref=\"etable\"\n              columns={this.columns}\n              dataSource={data}\n              editable={true}\n              defaultAddCount={1}\n              onEditSave={this.onEditSave.bind(this)}\n              isAppend={true}\n              alwaysValidate={true}\n              validateTrigger=\"onChange\"\n              rowKey=\"id\"\n            ></Table>\n          </div>\n        </div>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},mdxType:"Playground"},function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).state={count:0,data:[{id:"1",name:"\u5f20\u4e09",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u5f20\u4e09"},{id:"2",name:"\u674e\u56db",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u674e\u56db"}]},t.columns=[{dataIndex:"id",title:"\u7f16\u53f7",width:200},{dataIndex:"name",title:"\u59d3\u540d",width:150,validator:function(e,n){return e?{valid:!0,message:""}:{valid:!1,message:""}},editor:function(e,n,a,i,r){return Object(m.b)(v.a,{value:e,ref:r,onChange:function(e){var a=e.target.value;n.name=a,t.setState({count:a},(function(){i({name:a,remark:"\u6211\u662f"+a})}))},mdxType:"Input"})}},{dataIndex:"age",title:"\u5e74\u9f84",width:150,validator:function(e,n){return e?{valid:!0,message:""}:{valid:!1,message:""}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({age:e.target.value,idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"idcard",title:"\u8eab\u4efd\u8bc1",width:150,validator:function(e,n){return e?{valid:!0,message:""}:{valid:!1,message:""}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,onChange:function(e){return a({idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"tel",title:"\u7535\u8bdd\u53f7\u7801",width:150,validator:function(e,n){return e?{valid:!0,message:""}:{valid:!1,message:""}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({tel:e.target.value})},mdxType:"Input"})}},{dataIndex:"remark",title:"\u5907\u6ce8",editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,disabled:!0,mdxType:"Input"})}}],t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"onChange",value:function(e){var n=e.target.value,t=this.state,i=t.data,r=(t.count,Object(a.a)(i));r.forEach((function(e){e.name=n})),this.setState({count:n,data:r})}},{key:"onEditSave",value:function(e,n,t){this.setState({data:n})}},{key:"complete",value:function(){this.refs.etable.completeEdit()}},{key:"render",value:function(){var e=this.state,n=e.data,t=e.count;return Object(m.b)("div",null,Object(m.b)(v.a,{value:t,onChange:this.onChange.bind(this),style:{margin:"10px 0"},mdxType:"Input"}),Object(m.b)(C.a,{onClick:this.complete.bind(this),style:{margin:"10px 0"},mdxType:"Button"},"\u5b8c\u6210"),Object(m.b)("div",{style:{height:400}},Object(m.b)(g.a,{ref:"etable",columns:this.columns,dataSource:n,editable:!0,defaultAddCount:1,onEditSave:this.onEditSave.bind(this),isAppend:!0,alwaysValidate:!0,validateTrigger:"onChange",rowKey:"id",mdxType:"Table"})))}}]),n}(h.a.PureComponent)),Object(m.b)("h2",{id:"\u65b0\u589e\u591a\u884c"},"\u65b0\u589e\u591a\u884c"),Object(m.b)(p.c,{__position:5,__code:"class Demo extends React.PureComponent {\n    constructor(props) {\n      super(props)\n      this.state = {\n        data: [\n          {\n            id: '1',\n            name: '\u5f20\u4e09',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u5f20\u4e09',\n          },\n          {\n            id: '2',\n            name: '\u674e\u56db',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u674e\u56db',\n          },\n        ],\n      }\n\n      this.columns = [\n        {\n          dataIndex: 'id',\n          title: '\u7f16\u53f7',\n          width: 200,\n        },\n        {\n          dataIndex: 'name',\n          title: '\u59d3\u540d',\n          width: 150,\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => {\n                  let newValue = e.target.value\n                  onchange({ name: newValue, remark: '\u6211\u662f' + newValue })\n                }}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'age',\n          title: '\u5e74\u9f84',\n          width: 150,\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e =>\n                  onchange({ age: e.target.value, idcard: e.target.value })\n                }\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'idcard',\n          title: '\u8eab\u4efd\u8bc1',\n          width: 150,\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                value={value}\n                ref={ref}\n                onChange={e => onchange({ idcard: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'tel',\n          title: '\u7535\u8bdd\u53f7\u7801',\n          width: 150,\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ tel: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'remark',\n          title: '\u5907\u6ce8',\n          editor: (value, row, index, onchange, ref) => {\n            return <Input value={value} ref={ref} disabled={true}></Input>\n          },\n        },\n      ]\n    }\n    onEditSave(changedRows, newData, type) {\n      this.setState({\n        data: newData,\n      })\n    }\n    onEditCancel() {\n      console.log('onEditCancel')\n    }\n    render() {\n      let { data, count } = this.state\n\n      return (\n        <Table\n          ref=\"etable\"\n          columns={this.columns}\n          dataSource={data}\n          editable={true}\n          defaultAddCount={5}\n          onEditSave={this.onEditSave.bind(this)}\n          onCancel={this.onEditCancel}\n          isAppend={true}\n          allowSaveEmpty={false}\n          alwaysValidate={true}\n          validateTrigger=\"onChange\"\n          rowKey=\"id\"\n        ></Table>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:400},mdxType:"Playground"},function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).state={data:[{id:"1",name:"\u5f20\u4e09",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u5f20\u4e09"},{id:"2",name:"\u674e\u56db",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u674e\u56db"}]},t.columns=[{dataIndex:"id",title:"\u7f16\u53f7",width:200},{dataIndex:"name",title:"\u59d3\u540d",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){var n=e.target.value;a({name:n,remark:"\u6211\u662f"+n})},mdxType:"Input"})}},{dataIndex:"age",title:"\u5e74\u9f84",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({age:e.target.value,idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"idcard",title:"\u8eab\u4efd\u8bc1",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,onChange:function(e){return a({idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"tel",title:"\u7535\u8bdd\u53f7\u7801",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({tel:e.target.value})},mdxType:"Input"})}},{dataIndex:"remark",title:"\u5907\u6ce8",editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,disabled:!0,mdxType:"Input"})}}],t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"onEditSave",value:function(e,n,t){this.setState({data:n})}},{key:"onEditCancel",value:function(){console.log("onEditCancel")}},{key:"render",value:function(){var e=this.state,n=e.data;e.count;return Object(m.b)(g.a,{ref:"etable",columns:this.columns,dataSource:n,editable:!0,defaultAddCount:5,onEditSave:this.onEditSave.bind(this),onCancel:this.onEditCancel,isAppend:!0,allowSaveEmpty:!1,alwaysValidate:!0,validateTrigger:"onChange",rowKey:"id",mdxType:"Table"})}}]),n}(h.a.PureComponent)),Object(m.b)("h2",{id:"\u81ea\u5b9a\u4e49\u5de5\u5177\u680f"},"\u81ea\u5b9a\u4e49\u5de5\u5177\u680f"),Object(m.b)(p.c,{__position:6,__code:"class Demo extends React.PureComponent {\n    constructor(props) {\n      super(props)\n      this.state = {\n        data: [\n          {\n            id: '1',\n            name: '\u5f20\u4e09',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u5f20\u4e09',\n          },\n          {\n            id: '2',\n            name: '\u674e\u56db',\n            age: 20,\n            idcard: '512878211145551112',\n            remark: '\u6211\u662f\u674e\u56db',\n          },\n        ],\n      }\n\n      this.columns = [\n        {\n          dataIndex: 'id',\n          title: '\u7f16\u53f7',\n          width: 200,\n        },\n        {\n          dataIndex: 'name',\n          title: '\u59d3\u540d',\n          width: 150,\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => {\n                  let newValue = e.target.value\n                  onchange({ name: newValue, remark: '\u6211\u662f' + newValue })\n                }}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'age',\n          title: '\u5e74\u9f84',\n          width: 150,\n\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e =>\n                  onchange({ age: e.target.value, idcard: e.target.value })\n                }\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'idcard',\n          title: '\u8eab\u4efd\u8bc1',\n          width: 150,\n\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                value={value}\n                ref={ref}\n                onChange={e => onchange({ idcard: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'tel',\n          title: '\u7535\u8bdd\u53f7\u7801',\n          width: 150,\n\n          editor: (value, row, index, onchange, ref) => {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ tel: e.target.value })}\n              ></Input>\n            )\n          },\n        },\n        {\n          dataIndex: 'remark',\n          title: '\u5907\u6ce8',\n          editor: (value, row, index, onchange, ref) => {\n            return <Input value={value} ref={ref} disabled={true}></Input>\n          },\n        },\n      ]\n    }\n    onEditSave(changedRows, newData, type) {\n      this.setState({\n        data: newData,\n      })\n    }\n\n    customTools() {\n      return <Button>tools\u4f20\u9012\u51fd\u6570</Button>\n    }\n\n    render() {\n      let { data, count } = this.state\n\n      let tools = [\n        'add',\n        'edit',\n        'delete',\n        {\n          icon: 'message',\n          text: '\u67e5\u770b\u6d88\u606f',\n          handler: () => {\n            alert('\u70b9\u51fb\u4e86\u81ea\u5b9a\u4e49\u6309\u94ae')\n          },\n        },\n        this.customTools,\n      ]\n\n      return (\n        <Table\n          ref=\"etable\"\n          columns={this.columns}\n          dataSource={data}\n          editable={true}\n          defaultAddCount={1}\n          onEditSave={this.onEditSave.bind(this)}\n          isAppend={true}\n          alwaysValidate={true}\n          validateTrigger=\"onChange\"\n          editTools={tools}\n          editToolsConfig={{\n            position: 'top',\n            editText: '\u81ea\u5b9a\u4e49\u7f16\u8f91\u6309\u94ae\u53ca\u56fe\u6807',\n            editIcon: 'message',\n          }}\n          rowKey=\"id\"\n        ></Table>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:400},mdxType:"Playground"},function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).state={data:[{id:"1",name:"\u5f20\u4e09",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u5f20\u4e09"},{id:"2",name:"\u674e\u56db",age:20,idcard:"512878211145551112",remark:"\u6211\u662f\u674e\u56db"}]},t.columns=[{dataIndex:"id",title:"\u7f16\u53f7",width:200},{dataIndex:"name",title:"\u59d3\u540d",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){var n=e.target.value;a({name:n,remark:"\u6211\u662f"+n})},mdxType:"Input"})}},{dataIndex:"age",title:"\u5e74\u9f84",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({age:e.target.value,idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"idcard",title:"\u8eab\u4efd\u8bc1",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,onChange:function(e){return a({idcard:e.target.value})},mdxType:"Input"})}},{dataIndex:"tel",title:"\u7535\u8bdd\u53f7\u7801",width:150,editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({tel:e.target.value})},mdxType:"Input"})}},{dataIndex:"remark",title:"\u5907\u6ce8",editor:function(e,n,t,a,i){return Object(m.b)(v.a,{value:e,ref:i,disabled:!0,mdxType:"Input"})}}],t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"onEditSave",value:function(e,n,t){this.setState({data:n})}},{key:"customTools",value:function(){return Object(m.b)(C.a,{mdxType:"Button"},"tools\u4f20\u9012\u51fd\u6570")}},{key:"render",value:function(){var e=this.state,n=e.data,t=(e.count,["add","edit","delete",{icon:"message",text:"\u67e5\u770b\u6d88\u606f",handler:function(){alert("\u70b9\u51fb\u4e86\u81ea\u5b9a\u4e49\u6309\u94ae")}},this.customTools]);return Object(m.b)(g.a,{ref:"etable",columns:this.columns,dataSource:n,editable:!0,defaultAddCount:1,onEditSave:this.onEditSave.bind(this),isAppend:!0,alwaysValidate:!0,validateTrigger:"onChange",editTools:t,editToolsConfig:{position:"top",editText:"\u81ea\u5b9a\u4e49\u7f16\u8f91\u6309\u94ae\u53ca\u56fe\u6807",editIcon:"message"},rowKey:"id",mdxType:"Table"})}}]),n}(h.a.PureComponent)),Object(m.b)("h2",{id:"\u81ea\u5b9a\u4e49\u7f16\u8f91"},"\u81ea\u5b9a\u4e49\u7f16\u8f91"),Object(m.b)("blockquote",null,Object(m.b)("p",{parentName:"blockquote"},"\u4f7f\u7528\u8868\u683c\u5185\u7f6e\u7684API\uff0c\u4f7f\u7528api\u81ea\u5b9a\u4e49\u7f16\u8f91\u4e0e\u8868\u683c\u5185\u7f6e\u7684\u7f16\u8f91\u6309\u94ae\u7ec4\u5177\u6709\u4e0d\u540c\u7684\u884c\u4e3a\uff0c\u8bf7\u52ff\u6df7\u7528")),Object(m.b)(p.c,{__position:7,__code:"class Demo extends React.Component {\n    constructor(props) {\n      super(props)\n      this.tableRef = React.createRef()\n\n      this.state = {\n        data: [],\n        loading: false,\n        expandedRowKeys: [],\n      }\n\n      this.columns = [\n        {\n          dataIndex: 'column-1',\n          key: 'column-1',\n          title: 'column-1',\n          align: 'left',\n          halign: 'center',\n          minWidth: 300,\n          onCell: (row, value, index) => {\n            return {\n              onClick: () => {\n                this.beginEdit(row)\n              },\n            }\n          },\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e =>\n                  onchange([\n                    { 'column-1': e.target.value, id: row.id },\n                    { id: '3', address: e.target.value },\n                  ])\n                }\n              />\n            )\n          },\n        },\n        {\n          title: 'appellation',\n          width: 150,\n          halign: 'left',\n          children: [\n            {\n              dataIndex: 'address',\n              title: 'name',\n              width: 200,\n              onCell: (row, value, index) => {\n                return {\n                  onClick: () => {\n                    this.beginEdit(row)\n                  },\n                }\n              },\n              editor: function(value, row, index, onchange, ref) {\n                return (\n                  <Input\n                    defaultValue={value}\n                    ref={ref}\n                    onChange={e => onchange({ address: e.target.value })}\n                  />\n                )\n              },\n            },\n            {\n              title: 'nick name',\n              width: 150,\n              children: [\n                {\n                  dataIndex: 'id',\n                  title: 'nick-1',\n                  maxWidth: 300,\n                  width: 150,\n                },\n                {\n                  dataIndex: 'level',\n                  title: 'level',\n                },\n              ],\n            },\n          ],\n        },\n        {\n          dataIndex: 'id',\n          key: 'column-4',\n          title: 'id',\n        },\n      ]\n    }\n    componentDidMount() {\n      function createData(level, parentKey, maxLevel, index) {\n        if (level > maxLevel) {\n          return\n        }\n        let l = level\n        let data = []\n        for (let i = 0; i < 3; i++) {\n          let k = parentKey + '-' + level + '-' + i\n          let d = {\n            id: k,\n            'column-1': 'Edward King ' + k,\n            age: 32,\n            level: level,\n            address: 'London, Park Lane no. ' + i,\n          }\n\n          if (i === 2) {\n            d.children = createData(l + 1, k, maxLevel, i)\n          }\n\n          data.push(d)\n        }\n        return data\n      }\n\n      function createTreeData() {\n        let data = []\n        for (let i = 0; i < 10; i++) {\n          let childrens = createData(0, i, 2)\n          let d = {\n            id: '' + i,\n            level: 0,\n            'column-1': 'Edward King ' + i,\n            age: i,\n            address: 'London, Park Lane no. ' + i,\n          }\n\n          if (i % 3 === 0) {\n            d.children = childrens\n          }\n\n          data.push(d)\n        }\n\n        return data\n      }\n\n      this.setState({\n        data: createTreeData(),\n      })\n    }\n    beginEdit(row) {\n      let arr = []\n      arr.push(row.id)\n      this.tableRef.current.api.editRows(arr)\n    }\n    completeEdit() {\n      this.tableRef.current.api.completeEdit()\n    }\n    cancelEdit() {\n      this.tableRef.current.api.cancelEdit()\n    }\n    insertData() {\n      let arr = []\n      arr.push({ id: 'inserted-row-' + new Date().getTime() })\n      this.tableRef.current.api.insertData({\n        data: arr,\n        parentKey: '3',\n        editing: true,\n        prepend: false,\n        startIndex: 2,\n      })\n\n      //this.tableRef.current.api.editAll();\n    }\n    modifyData() {\n      let arr = []\n      arr.push({ id: 'inserted-row-' + new Date().getTime() })\n      this.tableRef.current.api.modifyData([\n        {\n          id: '3',\n          'column-1': 'modifyData-' + new Date().getTime(),\n          level: 3,\n        },\n      ])\n    }\n    delete() {\n      let deleted = this.tableRef.current.api.deleteData()\n      console.log('deleted:', deleted)\n    }\n    editAll() {\n      this.tableRef.current.api.editAll()\n    }\n    onEditComplete(modified) {\n      console.log('onEditComplete:', modified)\n    }\n    onEditSave(changedRows, newRows, editType) {\n      console.log('onEditSave changedRows:', changedRows)\n      console.log('onEditSave newRows:', newRows)\n      console.log('onEditSave editType:', editType)\n    }\n    render() {\n      return (\n        <div style={{ height: '100%' }}>\n          <Table\n            header={() => {\n              return (\n                <div>\n                  <Button\n                    onClick={this.completeEdit.bind(this)}\n                    style={{ cursor: 'pointer' }}\n                  >\n                    complete edit\n                  </Button>\n\n                  <Button\n                    onClick={this.cancelEdit.bind(this)}\n                    style={{ cursor: 'pointer', marginLeft: 10 }}\n                  >\n                    cancel edit\n                  </Button>\n\n                  <Button\n                    onClick={this.insertData.bind(this)}\n                    style={{ cursor: 'pointer', marginLeft: 10 }}\n                  >\n                    insert data\n                  </Button>\n\n                  <Button\n                    onClick={this.modifyData.bind(this)}\n                    style={{ cursor: 'pointer', marginLeft: 10 }}\n                  >\n                    modify data\n                  </Button>\n\n                  <Button\n                    onClick={this.delete.bind(this)}\n                    style={{ cursor: 'pointer', marginLeft: 10 }}\n                  >\n                    delete\n                  </Button>\n\n                  <Button\n                    onClick={this.editAll.bind(this)}\n                    style={{ cursor: 'pointer', marginLeft: 10 }}\n                  >\n                    edit all\n                  </Button>\n                </div>\n              )\n            }}\n            editable={true}\n            isAppend={true}\n            allowSaveEmpty={true}\n            alwaysValidate={false}\n            validateTrigger=\"onChange\"\n            ref={this.tableRef}\n            rowKey=\"id\"\n            onComplete={this.onEditComplete.bind(this)}\n            onEditSave={this.onEditSave.bind(this)}\n            columns={this.columns}\n            selectMode=\"multiple\"\n            checkStrictly={false}\n            data={this.state.data}\n            selectOnRowClick={false}\n          />\n        </div>\n      )\n    }\n  }",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:600},mdxType:"Playground"},function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(l.a)(this,Object(d.a)(n).call(this,e))).tableRef=h.a.createRef(),t.state={data:[],loading:!1,expandedRowKeys:[]},t.columns=[{dataIndex:"column-1",key:"column-1",title:"column-1",align:"left",halign:"center",minWidth:300,onCell:function(e,n,a){return{onClick:function(){t.beginEdit(e)}}},validator:function(e,n){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a([{"column-1":e.target.value,id:n.id},{id:"3",address:e.target.value}])},mdxType:"Input"})}},{title:"appellation",width:150,halign:"left",children:[{dataIndex:"address",title:"name",width:200,onCell:function(e,n,a){return{onClick:function(){t.beginEdit(e)}}},editor:function(e,n,t,a,i){return Object(m.b)(v.a,{defaultValue:e,ref:i,onChange:function(e){return a({address:e.target.value})},mdxType:"Input"})}},{title:"nick name",width:150,children:[{dataIndex:"id",title:"nick-1",maxWidth:300,width:150},{dataIndex:"level",title:"level"}]}]},{dataIndex:"id",key:"column-4",title:"id"}],t}return Object(u.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){function e(n,t,a,i){if(!(n>a)){for(var r=n,l=[],d=0;d<3;d++){var o=t+"-"+n+"-"+d,u={id:o,"column-1":"Edward King "+o,age:32,level:n,address:"London, Park Lane no. "+d};2===d&&(u.children=e(r+1,o,a,d)),l.push(u)}return l}}this.setState({data:function(){for(var n=[],t=0;t<10;t++){var a=e(0,t,2),i={id:""+t,level:0,"column-1":"Edward King "+t,age:t,address:"London, Park Lane no. "+t};t%3===0&&(i.children=a),n.push(i)}return n}()})}},{key:"beginEdit",value:function(e){var n=[];n.push(e.id),this.tableRef.current.api.editRows(n)}},{key:"completeEdit",value:function(){this.tableRef.current.api.completeEdit()}},{key:"cancelEdit",value:function(){this.tableRef.current.api.cancelEdit()}},{key:"insertData",value:function(){var e=[];e.push({id:"inserted-row-"+(new Date).getTime()}),this.tableRef.current.api.insertData({data:e,parentKey:"3",editing:!0,prepend:!1,startIndex:2})}},{key:"modifyData",value:function(){[].push({id:"inserted-row-"+(new Date).getTime()}),this.tableRef.current.api.modifyData([{id:"3","column-1":"modifyData-"+(new Date).getTime(),level:3}])}},{key:"delete",value:function(){var e=this.tableRef.current.api.deleteData();console.log("deleted:",e)}},{key:"editAll",value:function(){this.tableRef.current.api.editAll()}},{key:"onEditComplete",value:function(e){console.log("onEditComplete:",e)}},{key:"onEditSave",value:function(e,n,t){console.log("onEditSave changedRows:",e),console.log("onEditSave newRows:",n),console.log("onEditSave editType:",t)}},{key:"render",value:function(){var e=this;return Object(m.b)("div",{style:{height:"100%"}},Object(m.b)(g.a,{header:function(){return Object(m.b)("div",null,Object(m.b)(C.a,{onClick:e.completeEdit.bind(e),style:{cursor:"pointer"},mdxType:"Button"},"complete edit"),Object(m.b)(C.a,{onClick:e.cancelEdit.bind(e),style:{cursor:"pointer",marginLeft:10},mdxType:"Button"},"cancel edit"),Object(m.b)(C.a,{onClick:e.insertData.bind(e),style:{cursor:"pointer",marginLeft:10},mdxType:"Button"},"insert data"),Object(m.b)(C.a,{onClick:e.modifyData.bind(e),style:{cursor:"pointer",marginLeft:10},mdxType:"Button"},"modify data"),Object(m.b)(C.a,{onClick:e.delete.bind(e),style:{cursor:"pointer",marginLeft:10},mdxType:"Button"},"delete"),Object(m.b)(C.a,{onClick:e.editAll.bind(e),style:{cursor:"pointer",marginLeft:10},mdxType:"Button"},"edit all"))},editable:!0,isAppend:!0,allowSaveEmpty:!0,alwaysValidate:!1,validateTrigger:"onChange",ref:this.tableRef,rowKey:"id",onComplete:this.onEditComplete.bind(this),onEditSave:this.onEditSave.bind(this),columns:this.columns,selectMode:"multiple",checkStrictly:!1,data:this.state.data,selectOnRowClick:!1,mdxType:"Table"}))}}]),n}(h.a.Component)),Object(m.b)("h2",{id:"\u5927\u6570\u636e\u91cf\u6811\u5f62\u6570\u636e\u7f16\u8f91"},"\u5927\u6570\u636e\u91cf\u6811\u5f62\u6570\u636e\u7f16\u8f91"),Object(m.b)("blockquote",null,Object(m.b)("p",{parentName:"blockquote"},"\u4f7f\u7528\u8868\u683c\u5185\u7f6e\u7684API")),Object(m.b)(p.c,{__position:8,__code:"<Complex />",__scope:{props:this?this.props:t,Playground:p.c,Props:p.d,Table:g.a,flatten:f.flatten,Input:v.a,InputNumber:b.a,Select:x.a,DatePicker:w.a,Switch:y.a,Checkbox:I.a,Button:C.a,Complex:D,CustomEdit:_},style:{height:600},mdxType:"Playground"},Object(m.b)(D,{mdxType:"Complex"})),Object(m.b)("p",null,Object(m.b)("inlineCode",{parentName:"p"},"js")),Object(m.b)("pre",null,Object(m.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),'\nimport React, { Component } from "react";\nimport { Table, unflatten } from "tablex";\nimport { Button, Input, Menu, InputNumber } from "antd";\nimport _ from "lodash";\n\nconst { Search } = Input;\n\nlet BaseUrl = "";\n\nfunction requestGet(url, options) {\n  let xhr = new XMLHttpRequest();\n  xhr.open("GET", url, true);\n\n  xhr.onreadystatechange = function() {};\n\n  xhr.onload = function() {\n    if (xhr.status == 200) {\n      if (typeof options.onSuccess === "function") {\n        var res = {};\n        if (xhr.responseText) {\n          res = JSON.parse(xhr.responseText);\n        }\n        options.onSuccess(res);\n      }\n    }\n  };\n\n  xhr.onerror = options.onError;\n\n  xhr.send();\n}\n\nfunction createData(level, parentKey, maxLevel, index) {\n  if (level > maxLevel) {\n    return;\n  }\n\n  let l = level;\n  let data = [];\n  for (let i = 0; i < 5; i++) {\n    let k = parentKey + "-" + level + "-" + i;\n    let d = {\n      id: k,\n      name: "Edward King " + k,\n      age: 32,\n      address: "London, Park Lane no. " + i\n    };\n\n    if (i % 2 === 0) {\n      d.children = createData(l + 1, k, maxLevel, i);\n    }\n\n    data.push(d);\n  }\n  return data;\n}\n\nfunction createTreeData() {\n  let data = [];\n  for (let i = 0; i < 100; i++) {\n    data.push({\n      id: "" + i,\n      level: 0,\n      name: "Edward King " + i,\n      age: 32,\n      address: "London, Park Lane no. " + i,\n      children: createData(0, i, 4)\n    });\n  }\n\n  return data;\n}\n\nclass Demo extends Component {\n  columns = [\n    {\n      dataIndex: "code",\n      key: "code",\n      title: "\u7f16\u7801",\n      width: 200\n    },\n    {\n      title: "\u540d\u79f0",\n      width: 150,\n      key: "name",\n      dataIndex: "name"\n    },\n    {\n      dataIndex: "description",\n      key: "description",\n      title: "\u7279\u5f81\u63cf\u8ff0",\n      width: 150\n    },\n    {\n      dataIndex: "unit",\n      key: "unit",\n      title: "\u5355\u4f4d",\n      width: 150\n    },\n    {\n      dataIndex: "quantities",\n      key: "quantities",\n      title: "\u5de5\u7a0b\u91cf",\n      width: 150,\n      editor: (value, record, index, onchange, ref, validate) => {\n        return (\n          <Input\n            defaultValue={value}\n            ref={ref}\n            onChange={v => {\n              onchange({ quantities: v.target.value });\n            }}\n          />\n        );\n      }\n    },\n    {\n      dataIndex: "unitPrice",\n      key: "unitPrice",\n      title: "\u7efc\u5408\u5355\u4ef7",\n      width: 150,\n      editor: (value, record, index, onchange, ref, validate) => {\n        return (\n          <InputNumber\n            defaultValue={value}\n            ref={ref}\n            onKeyDown={e => {\n              e.stopPropagation();\n            }}\n            onChange={e => {\n              onchange({ unitPrice: e });\n            }}\n          />\n        );\n      }\n    },\n    {\n      dataIndex: "totalPrice",\n      key: "totalPrice",\n      title: "\u5408\u4ef7",\n      width: 150,\n      render: (value, row) => {\n        let v = row.unitPrice * row.quantities;\n        if (isNaN(v)) {\n          return "";\n        }\n        return v;\n      }\n    },\n    {\n      dataIndex: "evaluation",\n      key: "evaluation",\n      title: "\u6682\u4f30\u4ef7",\n      width: 150\n    }\n  ];\n\n  state = {\n    loading: false,\n    treeData: []\n  };\n\n  getData = () => {\n    this.setState({ loading: true });\n\n    let c = 0;\n    requestGet(BaseUrl + "/public/data.json", {\n      onSuccess: data => {\n        data = _.uniqBy(data, d => {\n          return d.code;\n        });\n\n        let bl = false;\n\n        data.forEach(d => {\n          let id = d.code || "";\n          let pid = "";\n          let len = id.length;\n          d.id = id;\n\n          if (len >= 2) {\n            let pl = 2;\n\n            if (len % 2 !== 0) {\n              pl = 3;\n            }\n\n            if (id === "040704") {\n              bl = true;\n            }\n\n            if (bl === true) {\n              pid = "0407";\n            } else {\n              pid = id.substring(0, len - pl);\n            }\n          }\n\n          d.pid = pid;\n        });\n\n        let treeData = unflatten(data, "id", "pid");\n\n        this.setState({\n          loading: false,\n          treeData: treeData\n        });\n      }\n    });\n  };\n\n  scrollToItem = index => {\n    if (this.refs.tb) {\n      this.refs.tb.scrollToItem(index, "center");\n    }\n  };\n\n  expandTo = (depth = 1) => {\n    this.refs.tb.expandTo(depth);\n  };\n\n  expandAll = () => {\n    this.refs.tb.expandAll();\n  };\n  collapseAll = () => {\n    this.refs.tb.collapseAll();\n  };\n\n  rowKey = "id";\n  deleteRow = row => {\n    let rowKey = this.rowKey;\n    let key = row[rowKey];\n    this.refs.tb.api.deleteData([key]);\n  };\n\n  copiedRow = null;\n  copy = row => {\n    let rowData = {};\n\n    for (const k in row) {\n      if (row.hasOwnProperty(k) && k !== "children") {\n        rowData[k] = row[k];\n      }\n    }\n    let str = JSON.stringify(rowData);\n    this.copiedRow = JSON.stringify(rowData);\n\n    const input = document.createElement("input");\n    document.body.appendChild(input);\n    input.setAttribute("value", str);\n    input.select();\n    if (document.execCommand("copy")) {\n      document.execCommand("copy");\n    }\n    document.body.removeChild(input);\n  };\n\n  pasteChildren = targetRow => {\n    let rowKey = this.rowKey;\n\n    let copiedRow = this.copiedRow;\n\n    if (copiedRow) {\n      let sourceRow = JSON.parse(copiedRow);\n      sourceRow[rowKey] = "copied_row_" + sourceRow[rowKey];\n\n      this.refs.tb.api.insertData({\n        data: [sourceRow],\n        parentKey: targetRow[rowKey],\n        editing: true,\n        scrollTo: false\n      });\n\n      this.isCut = false;\n      this.copiedRow = null;\n    }\n  };\n\n  isCut = false;\n  cut = row => {\n    this.copy(row);\n    this.isCut = true;\n  };\n\n  selectAll = rowData => {\n    this.refs.tb.selectToggle(rowData);\n  };\n\n  expandToggle = rowData => {\n    this.refs.tb.expandToggle(rowData);\n  };\n\n  onMenuClick = ({ key, item }) => {\n    console.log("key:", item.props.row);\n\n    let actions = {\n      del: this.deleteRow,\n      copy: this.copy,\n      cut: this.cut,\n      pasteChildren: this.pasteChildren,\n      selectAll: this.selectAll,\n      expandToggle: this.expandToggle,\n      export: this.export\n    };\n\n    let fn = actions[key];\n    if (typeof fn === "function") {\n      fn(item.props.row);\n    }\n  };\n\n  searchIndex = -1;\n  searchedKey = "";\n  onChangeSearch = () => {\n    this.searchIndex = 0;\n    this.searchedKey = "";\n  };\n\n  onSearch = v => {\n    if (!v) {\n      this.searchIndex = 0;\n      this.searchedKey = "";\n      this.scrollToItem(-1);\n      this.forceUpdate();\n      return;\n    }\n\n    //\u5148\u5c55\u5f00\u6240\u6709\u4ee5\u4fbf\u67e5\u8be2\u5b9a\u4f4d\n    this.expandAll();\n\n    let searchedIndex = -1;\n    let searchedKey = "";\n\n    let f = this.refs.tb.findData(d => d.name.indexOf(v) > -1, {\n      startIndex: this.searchIndex,\n      focused: true\n    });\n\n    if (f) {\n      searchedIndex = f.index;\n      searchedKey = f.row.id;\n    }\n\n    if (searchedIndex > -1) {\n      this.searchIndex = searchedIndex + 1;\n      this.searchedKey = searchedKey;\n    } else {\n      this.searchIndex = -1;\n      this.searchedKey = "";\n    }\n  };\n\n  onFilter = v => {\n    let { treeData } = this.state;\n    if (!v) {\n      this.setState({ treeData: treeData.slice() }, this.collapseAll);\n      return;\n    }\n\n    this.refs.tb.filterData(d => {\n      return d.name.indexOf(v) > -1;\n    });\n\n    this.expandAll();\n  };\n\n  contentMenu = row => {\n    let menuItemProps = {\n      style: { height: "auto", lineHeight: "normal" },\n      row\n    };\n\n    return (\n      <Menu selectable={false} onClick={this.onMenuClick}>\n        <Menu.Item key="del" {...menuItemProps}>\n          \u5220\u9664\u884c\n        </Menu.Item>\n        <Menu.Item key="copy" {...menuItemProps}>\n          \u590d\u5236\u884c\n        </Menu.Item>\n        <Menu.Item key="cut" {...menuItemProps}>\n          \u526a\u5207\u884c\n        </Menu.Item>\n        <Menu.Item key="pasteChildren" {...menuItemProps}>\n          \u7c98\u8d34\u884c(\u4e0b\u7ea7)\n        </Menu.Item>\n        <Menu.Item key="selectAll" {...menuItemProps}>\n          \u5168\u9009/\u5168\u5426\n        </Menu.Item>\n        <Menu.Item key="expandToggle" {...menuItemProps}>\n          \u5c55\u5f00/\u6536\u7f29\n        </Menu.Item>\n        <Menu.Item key="export" {...menuItemProps}>\n          \u5bfc\u51fa\n        </Menu.Item>\n        <Menu.Item key="print" {...menuItemProps}>\n          \u6253\u5370\n        </Menu.Item>\n      </Menu>\n    );\n  };\n\n  render() {\n    return (\n      <div style={{ height: "100%" }}>\n        <Table\n          rowKey="id"\n          editable={true}\n          ref="tb"\n          loading={this.state.loading}\n          columns={this.columns}\n          selectMode="multiple"\n          checkStrictly={false}\n          data={this.state.treeData}\n          orderNumber={{ resizable: true }}\n          contextMenu={this.contentMenu}\n          validateTrigger="onChange"\n          isAppend={true}\n          header={() => (\n            <div>\n              <Button onClick={this.getData}>\u83b7\u53d6\u6570\u636e</Button>\n              <Button onClick={this.expandAll} style={{ margin: "0 5px" }}>\n                \u5c55\u5f00\u6240\u6709\n              </Button>\n              <Button\n                onClick={() => this.expandTo(1)}\n                style={{ margin: "0 5px" }}\n              >\n                \u5c55\u5f00\u81f3\u7b2c\u4e8c\u7ea7\n              </Button>\n\n              <Button onClick={this.collapseAll}>\u6298\u53e0\u6240\u6709</Button>\n              <Search\n                style={{ float: "right", margin: "0 5px", width: "150px" }}\n                placeholder="\u8f93\u5165\u540d\u79f0\u8fc7\u6ee4"\n                onSearch={this.onFilter}\n              />\n              <Search\n                style={{ float: "right", margin: "0 5px", width: "150px" }}\n                placeholder="\u8f93\u5165\u540d\u79f0\u67e5\u627e"\n                onSearch={this.onSearch}\n                onChange={this.onChangeSearch}\n              />\n            </div>\n          )}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Demo;\n\n\n')))}A&&A===Object(A)&&Object.isExtensible(A)&&Object.defineProperty(A,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"doc\\Editable\\index.mdx"}}),A.isMDXComponent=!0}}]);
//# sourceMappingURL=doc-editable-index.10f551216b89484d8289.js.map