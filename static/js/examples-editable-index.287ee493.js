(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./examples/Editable/complex/index.css":function(e,t,n){},"./examples/Editable/index.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),d=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),c=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),u=n("./node_modules/react/index.js"),s=n.n(u),p=n("./node_modules/@mdx-js/react/dist/index.es.js"),h=n("./node_modules/docz/dist/index.esm.js"),f=n("../tablex/lib/index.js"),m=n.n(f),b=n("./node_modules/antd/es/input/index.js"),x=n("./node_modules/antd/es/checkbox/index.js"),g=n("./node_modules/antd/es/input-number/index.js"),v=n("./node_modules/antd/es/button/index.js"),y=n("./node_modules/antd/es/menu/index.js"),j=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js"),O=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js");function w(e){var t=e.targetIndex,n=e.node,a=e.currentIndex,r=e.getNodeKey,o=e.path,l=void 0===o?[]:o,d=e.lowerSiblingCounts,i=void 0===d?[]:d,c=e.ignoreCollapsed,u=void 0===c||c,s=e.isPseudoRoot,p=void 0!==s&&s?[]:[].concat(Object(O.a)(l),[r({node:n,treeIndex:a})]);if(a===t)return{node:n,lowerSiblingCounts:i,path:p};if(!n.children||u&&!0!==n.expanded)return{nextIndex:a+1};for(var h=a+1,f=n.children.length,m=0;m<f;m+=1){var b=w({ignoreCollapsed:u,getNodeKey:r,targetIndex:t,node:n.children[m],currentIndex:h,lowerSiblingCounts:[].concat(Object(O.a)(i),[f-m-1]),path:p});if(b.node)return b;h=b.nextIndex}return{nextIndex:h}}function I(e){var t=e.node,n=e.ignoreCollapsed;return w({getNodeKey:function(){},ignoreCollapsed:void 0===n||n,node:t,currentIndex:0,targetIndex:-1}).nextIndex-1}function C(e){var t=e.treeData;return t.reduce(function(e,t){return e+function e(t){return t.children&&!0===t.expanded&&"function"!==typeof t.children?1+t.children.reduce(function(t,n){return t+e(n)},0):1}(t)},0)}function E(e){var t=e.treeData,n=e.index,a=e.getNodeKey;if(!t||t.length<1)return null;var r=w({targetIndex:n,getNodeKey:a,node:{children:t,expanded:!0},currentIndex:-1,path:[],lowerSiblingCounts:[],isPseudoRoot:!0});return r.node?r:null}function D(e){var t=e.treeData,n=e.getNodeKey,a=e.callback,r=e.ignoreCollapsed,o=void 0===r||r;!t||t.length<1||function e(t){var n=t.callback,a=t.getNodeKey,r=t.ignoreCollapsed,o=t.isPseudoRoot,l=void 0!==o&&o,d=t.node,i=t.parentNode,c=void 0===i?null:i,u=t.currentIndex,s=t.path,p=void 0===s?[]:s,h=t.lowerSiblingCounts,f=void 0===h?[]:h,m=l?[]:[].concat(Object(O.a)(p),[a({node:d,treeIndex:u})]);if(!l&&!1===n(l?null:{node:d,parentNode:c,path:m,lowerSiblingCounts:f,treeIndex:u}))return!1;if(!d.children||!0!==d.expanded&&r&&!l)return u;var b=u,x=d.children.length;if("function"!==typeof d.children)for(var g=0;g<x;g+=1)if(!1===(b=e({callback:n,getNodeKey:a,ignoreCollapsed:r,node:d.children[g],parentNode:l?null:d,currentIndex:b+1,lowerSiblingCounts:[].concat(Object(O.a)(f),[x-g-1]),path:m})))return!1;return b}({callback:a,getNodeKey:n,ignoreCollapsed:o,isPseudoRoot:!0,node:{children:t},currentIndex:-1,path:[],lowerSiblingCounts:[]})}function _(e){var t=e.treeData,n=e.getNodeKey,a=e.callback,r=e.ignoreCollapsed,o=void 0===r||r;return!t||t.length<1?[]:function e(t){var n=t.callback,a=t.getNodeKey,r=t.ignoreCollapsed,o=t.isPseudoRoot,l=void 0!==o&&o,d=t.node,i=t.parentNode,c=void 0===i?null:i,u=t.currentIndex,s=t.path,p=void 0===s?[]:s,h=t.lowerSiblingCounts,f=void 0===h?[]:h,m=Object(j.a)({},d),b=l?[]:[].concat(Object(O.a)(p),[a({node:m,treeIndex:u})]),x={node:m,parentNode:c,path:b,lowerSiblingCounts:f,treeIndex:u};if(!m.children||!0!==m.expanded&&r&&!l)return{treeIndex:u,node:n(x)};var g=u,v=m.children.length;return"function"!==typeof m.children&&(m.children=m.children.map(function(t,o){var d=e({callback:n,getNodeKey:a,ignoreCollapsed:r,node:t,parentNode:l?null:m,currentIndex:g+1,lowerSiblingCounts:[].concat(Object(O.a)(f),[v-o-1]),path:b});return g=d.treeIndex,d.node})),{node:n(x),treeIndex:g}}({callback:a,getNodeKey:n,ignoreCollapsed:o,isPseudoRoot:!0,node:{children:t},currentIndex:-1,path:[],lowerSiblingCounts:[]}).node.children}function N(e){var t=e.treeData,n=e.expanded,a=void 0===n||n;return _({treeData:t,callback:function(e){var t=e.node;return Object(j.a)({},t,{expanded:a})},getNodeKey:function(e){return e.treeIndex},ignoreCollapsed:!1})}function P(e){var t=e.treeData,n=e.path,a=e.newNode,r=e.getNodeKey,o=e.ignoreCollapsed,l=void 0===o||o,d=function e(t){var o=t.isPseudoRoot,d=void 0!==o&&o,i=t.node,c=t.currentTreeIndex,u=t.pathIndex;if(!d&&r({node:i,treeIndex:c})!==n[u])return"RESULT_MISS";if(u>=n.length-1)return"function"===typeof a?a({node:i,treeIndex:c}):a;if(!i.children)throw new Error("Path referenced children of node with no children.");for(var s=c+1,p=0;p<i.children.length;p+=1){var h=e({node:i.children[p],currentTreeIndex:s,pathIndex:u+1});if("RESULT_MISS"!==h)return h?Object(j.a)({},i,{children:[].concat(Object(O.a)(i.children.slice(0,p)),[h],Object(O.a)(i.children.slice(p+1)))}):Object(j.a)({},i,{children:[].concat(Object(O.a)(i.children.slice(0,p)),Object(O.a)(i.children.slice(p+1)))});s+=1+I({node:i.children[p],ignoreCollapsed:l})}return"RESULT_MISS"}({node:{children:t},currentTreeIndex:-1,pathIndex:-1,isPseudoRoot:!0});if("RESULT_MISS"===d)throw new Error("No node found at the given path.");return d.children}function S(e){var t=e.treeData,n=e.path,a=e.getNodeKey,r=e.ignoreCollapsed;return P({treeData:t,path:n,getNodeKey:a,ignoreCollapsed:void 0===r||r,newNode:null})}function K(e){var t=e.treeData,n=e.path,a=e.getNodeKey,r=e.ignoreCollapsed,o=null,l=null;return{treeData:P({treeData:t,path:n,getNodeKey:a,ignoreCollapsed:void 0===r||r,newNode:function(e){var t=e.node,n=e.treeIndex;return o=t,l=n,null}}),node:o,treeIndex:l}}function T(e){var t=e.treeData,n=e.path,a=e.getNodeKey,r=e.ignoreCollapsed,o=void 0===r||r,l=null;try{P({treeData:t,path:n,getNodeKey:a,ignoreCollapsed:o,newNode:function(e){var t=e.node,n=e.treeIndex;return l={node:t,treeIndex:n},t}})}catch(d){}return l}function k(e){var t=e.treeData,n=e.newNode,a=e.parentKey,r=void 0===a?null:a,o=e.getNodeKey,l=e.ignoreCollapsed,d=void 0===l||l,i=e.expandParent,c=void 0!==i&&i,u=e.addAsFirstChild,s=void 0!==u&&u;if(null===r)return{treeData:[].concat(Object(O.a)(t||[]),[n]),treeIndex:(t||[]).length};var p=null,h=!1,f=_({treeData:t,getNodeKey:o,ignoreCollapsed:d,callback:function(e){var t=e.node,a=e.treeIndex,o=e.path,l=o?o[o.length-1]:null;if(h||l!==r)return t;h=!0;var i=Object(j.a)({},t);if(c&&(i.expanded=!0),!i.children)return p=a+1,Object(j.a)({},i,{children:[n]});if("function"===typeof i.children)throw new Error("Cannot add to children defined by a function");for(var u=a+1,f=0;f<i.children.length;f+=1)u+=1+I({node:i.children[f],ignoreCollapsed:d});p=u;var m=s?[n].concat(Object(O.a)(i.children)):[].concat(Object(O.a)(i.children),[n]);return Object(j.a)({},i,{children:m})}});if(!h)throw new Error("No node found with the given key.");return{treeData:f,treeIndex:p}}function R(e){var t=e.treeData,n=e.depth,a=e.minimumTreeIndex,r=e.newNode,o=e.getNodeKey,l=void 0===o?function(){}:o,d=e.ignoreCollapsed,i=void 0===d||d,c=e.expandParent,u=void 0!==c&&c;if(!t&&0===n)return{treeData:[r],treeIndex:0,path:[l({node:r,treeIndex:0})],parentNode:null};var s=function e(t){var n=t.targetDepth,a=t.minimumTreeIndex,r=t.newNode,o=t.ignoreCollapsed,l=t.expandParent,d=t.isPseudoRoot,i=void 0!==d&&d,c=t.isLastChild,u=t.node,s=t.currentIndex,p=t.currentDepth,h=t.getNodeKey,f=t.path,m=void 0===f?[]:f,b=function(e){return i?[]:[].concat(Object(O.a)(m),[h({node:e,treeIndex:s})])};if(s>=a-1||c&&(!u.children||!u.children.length)){if("function"===typeof u.children)throw new Error("Cannot add to children defined by a function");var x=l?{expanded:!0}:{},g=Object(j.a)({},u,x,{children:u.children?[r].concat(Object(O.a)(u.children)):[r]});return{node:g,nextIndex:s+2,insertedTreeIndex:s+1,parentPath:b(g),parentNode:i?null:g}}if(p>=n-1){if(!u.children||"function"===typeof u.children||!0!==u.expanded&&o&&!i)return{node:u,nextIndex:s+1};for(var v=s+1,y=null,w=null,C=0;C<u.children.length;C+=1){if(v>=a){y=v,w=C;break}v+=1+I({node:u.children[C],ignoreCollapsed:o})}if(null===w){if(v<a&&!c)return{node:u,nextIndex:v};y=v,w=u.children.length}var E=Object(j.a)({},u,{children:[].concat(Object(O.a)(u.children.slice(0,w)),[r],Object(O.a)(u.children.slice(w)))});return{node:E,nextIndex:v,insertedTreeIndex:y,parentPath:b(E),parentNode:i?null:E}}if(!u.children||"function"===typeof u.children||!0!==u.expanded&&o&&!i)return{node:u,nextIndex:s+1};var D=null,_=null,N=null,P=s+1,S=u.children;"function"!==typeof S&&(S=S.map(function(t,d){if(null!==D)return t;var i=e({targetDepth:n,minimumTreeIndex:a,newNode:r,ignoreCollapsed:o,expandParent:l,isLastChild:c&&d===S.length-1,node:t,currentIndex:P,currentDepth:p+1,getNodeKey:h,path:[]});return"insertedTreeIndex"in i&&(D=i.insertedTreeIndex,N=i.parentNode,_=i.parentPath),P=i.nextIndex,i.node}));var K=Object(j.a)({},u,{children:S}),T={node:K,nextIndex:P};return null!==D&&(T.insertedTreeIndex=D,T.parentPath=[].concat(Object(O.a)(b(K)),Object(O.a)(_)),T.parentNode=N),T}({targetDepth:n,minimumTreeIndex:a,newNode:r,ignoreCollapsed:i,expandParent:u,getNodeKey:l,isPseudoRoot:!0,isLastChild:!0,node:{children:t},currentIndex:-1,currentDepth:-1});if(!("insertedTreeIndex"in s))throw new Error("No suitable position found to insert.");var p=s.insertedTreeIndex;return{treeData:s.node.children,treeIndex:p,path:[].concat(Object(O.a)(s.parentPath),[l({node:r,treeIndex:p})]),parentNode:s.parentNode}}function M(e){var t=e.treeData,n=e.getNodeKey,a=e.ignoreCollapsed,r=void 0===a||a;if(!t||t.length<1)return[];var o=[];return D({treeData:t,getNodeKey:n,ignoreCollapsed:r,callback:function(e){o.push(e)}}),o}function A(e){var t=e.flatData,n=e.getKey,a=void 0===n?function(e){return e.id}:n,r=e.getParentKey,o=void 0===r?function(e){return e.parentId}:r,l=e.rootKey,d=void 0===l?"0":l;if(!t)return[];var i={};if(t.forEach(function(e){var t=o(e);t in i?i[t].push(e):i[t]=[e]}),!(d in i))return[];return i[d].map(function(e){return function e(t){var n=a(t);return n in i?Object(j.a)({},t,{children:i[n].map(function(t){return e(t)})}):Object(j.a)({},t)}(e)})}function F(e,t){return!!e.children&&"function"!==typeof e.children&&e.children.some(function(e){return e===t||F(e,t)})}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.children?"function"===typeof e.children?t+1:e.children.reduce(function(e,n){return Math.max(e,L(n,t+1))},t):t}function q(e){var t=e.getNodeKey,n=e.treeData,a=e.searchQuery,r=e.searchMethod,o=e.searchFocusOffset,l=e.expandAllMatchPaths,d=void 0!==l&&l,i=e.expandFocusMatchPaths,c=void 0===i||i,u=0,s=function e(n){var l=n.isPseudoRoot,i=void 0!==l&&l,s=n.node,p=n.currentIndex,h=n.path,f=void 0===h?[]:h,m=[],b=!1,x=!1,g=i?[]:[].concat(Object(O.a)(f),[t({node:s,treeIndex:p})]),v=i?null:{path:g,treeIndex:p},y=s.children&&"function"!==typeof s.children&&s.children.length>0;!i&&r(Object(j.a)({},v,{node:s,searchQuery:a}))&&(u===o&&(x=!0),u+=1,b=!0);var w=p,I=Object(j.a)({},s);return y&&(I.children=I.children.map(function(t){var n=e({node:t,currentIndex:w+1,path:g});return n.node.expanded?w=n.treeIndex:w+=1,(n.matches.length>0||n.hasFocusMatch)&&(m=[].concat(Object(O.a)(m),Object(O.a)(n.matches)),n.hasFocusMatch&&(x=!0),(d&&n.matches.length>0||(d||c)&&n.hasFocusMatch)&&(I.expanded=!0)),n.node})),i||I.expanded||(m=m.map(function(e){return Object(j.a)({},e,{treeIndex:null})})),b&&(m=[Object(j.a)({},v,{node:I})].concat(Object(O.a)(m))),{node:m.length>0?I:s,matches:m,hasFocusMatch:x,treeIndex:w}}({node:{children:n},isPseudoRoot:!0,currentIndex:-1});return{matches:s.matches,treeData:s.node.children}}I&&I===Object(I)&&Object.isExtensible(I)&&Object.defineProperty(I,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getDescendantCount",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),C&&C===Object(C)&&Object.isExtensible(C)&&Object.defineProperty(C,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getVisibleNodeCount",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getVisibleNodeInfoAtIndex",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),D&&D===Object(D)&&Object.isExtensible(D)&&Object.defineProperty(D,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"walk",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),_&&_===Object(_)&&Object.isExtensible(_)&&Object.defineProperty(_,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"map",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),N&&N===Object(N)&&Object.isExtensible(N)&&Object.defineProperty(N,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"toggleExpandedForAll",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),P&&P===Object(P)&&Object.isExtensible(P)&&Object.defineProperty(P,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"changeNodeAtPath",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),S&&S===Object(S)&&Object.isExtensible(S)&&Object.defineProperty(S,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"removeNodeAtPath",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),K&&K===Object(K)&&Object.isExtensible(K)&&Object.defineProperty(K,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"removeNode",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),T&&T===Object(T)&&Object.isExtensible(T)&&Object.defineProperty(T,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getNodeAtPath",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),k&&k===Object(k)&&Object.isExtensible(k)&&Object.defineProperty(k,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"addNodeUnderParent",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),R&&R===Object(R)&&Object.isExtensible(R)&&Object.defineProperty(R,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"insertNode",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),M&&M===Object(M)&&Object.isExtensible(M)&&Object.defineProperty(M,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getFlatDataFromTree",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),A&&A===Object(A)&&Object.isExtensible(A)&&Object.defineProperty(A,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getTreeFromFlatData",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),F&&F===Object(F)&&Object.isExtensible(F)&&Object.defineProperty(F,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"isDescendant",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),L&&L===Object(L)&&Object.isExtensible(L)&&Object.defineProperty(L,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getDepth",filename:"examples\\Editable\\complex\\tree-data-utils.js"}}),q&&q===Object(q)&&Object.isExtensible(q)&&Object.defineProperty(q,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"find",filename:"examples\\Editable\\complex\\tree-data-utils.js"}});var U=n("./node_modules/lodash/lodash.js"),J=n.n(U),V=(n("./examples/Editable/complex/index.css"),b.a.Search);var B=function(e){function t(){var e,n;Object(r.a)(this,t);for(var d=arguments.length,i=new Array(d),c=0;c<d;c++)i[c]=arguments[c];return(n=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).columns=[{dataIndex:"code",key:"code",title:"\u7f16\u7801",width:200},{title:"\u540d\u79f0",width:150,key:"name",dataIndex:"name"},{dataIndex:"description",key:"description",title:"\u7279\u5f81\u63cf\u8ff0",width:150},{dataIndex:"unit",key:"unit",title:"\u5355\u4f4d",width:150},{dataIndex:"quantities",key:"quantities",title:"\u5de5\u7a0b\u91cf",width:150,editor:function(e,t,n,a,r,o){return s.a.createElement(b.a,{defaultValue:e,ref:r,onChange:function(e){a({quantities:e.target.value})}})}},{dataIndex:"unitPrice",key:"unitPrice",title:"\u7efc\u5408\u5355\u4ef7",width:150,editor:function(e,t,n,a,r,o){return s.a.createElement(g.a,{defaultValue:e,ref:r,onKeyDown:function(e){e.stopPropagation()},onChange:function(e){a({unitPrice:e})}})}},{dataIndex:"totalPrice",key:"totalPrice",title:"\u5408\u4ef7",width:150,render:function(e,t){var n=t.unitPrice*t.quantities;return isNaN(n)?"":n}},{dataIndex:"evaluation",key:"evaluation",title:"\u6682\u4f30\u4ef7",width:150}],n.state={loading:!1,treeData:[],rawTreeData:[],flatData:[],rawFlatData:[],expandedRowKeys:[],selectedRowKeys:[]},n.getData=function(){n.setState({loading:!0});var e,t,a;e="/tablex/public/data.json",t={onSuccess:function(e){e=J.a.uniqBy(e,function(e){return e.code});var t=!1;e.forEach(function(e){var n=e.code||"",a="",r=n.length;if(e.id=n,r>=2){var o=2;r%2!==0&&(o=3),"040704"===n&&(t=!0),a=!0===t?"0407":n.substring(0,r-o)}e.pid=a});var a=Object(f.unflatten)(e,"id","pid");n.setState({loading:!1,treeData:a,rawTreeData:a.slice(),flatData:e,rawFlatData:e.slice()})}},(a=new XMLHttpRequest).open("GET",e,!0),a.onreadystatechange=function(){},a.onload=function(){if(200==a.status&&"function"===typeof t.onSuccess){var e={};a.responseText&&(e=JSON.parse(a.responseText)),t.onSuccess(e)}},a.onerror=t.onError,a.send()},n.scrollToItem=function(e){n.refs.tb&&n.refs.tb.scrollToItem(e,"center")},n.expandTo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[],a=2;n.state.flatData.forEach(function(n){n.id.length<=e*a&&t.push(n.id)}),n.setState({expandedRowKeys:t})},n.expandAll=function(){var e=n.state.flatData.map(function(e){return e.id});n.setState({expandedRowKeys:e})},n.collapseAll=function(){n.setState({expandedRowKeys:[]})},n.contentMenuRow=null,n.showContextMenu=function(e){var t=e.left,a=e.top,r=e.data;n.contentMenuRow=r;var o=document.getElementById("contextMenu");o&&(o.style.top=a+"px",o.style.left=t+"px",o.style.display="block",o.focus())},n.hideContextMenu=function(){n.contentMenuRow=null;var e=document.getElementById("contextMenu");e&&(e.style.display="none")},n.onRow=function(e){return{onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),n.showContextMenu({left:t.pageX,top:t.pageY,data:e})}}},n.setTreeData=function(e,t){var a=new Date;console.log("tree data flattening :",e.length);var r=Object(f.unflatten)(e,"id","pid");console.log("tree data flatten finished :",((new Date).getTime()-a.getTime())/1e3),n.setState({treeData:r,flatData:e,loading:!1},t)},n.rowKey="id",n.deleteRow=function(e){var t=n.rowKey,a=e[t],r=n.state.flatData,o=r.findIndex(function(e){return e[t]===a});o>-1&&r.splice(o,1),n.setTreeData(r)},n.copiedRow=null,n.copy=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&"children"!==a&&(t[a]=e[a]);var r=JSON.stringify(t);n.copiedRow=JSON.stringify(t);var o=document.createElement("input");document.body.appendChild(o),o.setAttribute("value",r),o.select(),document.execCommand("copy")&&document.execCommand("copy"),document.body.removeChild(o)},n.pasteChildren=function(e){var t=n.rowKey,a=n.copiedRow;if(a){for(var r=JSON.parse(a),o=Object(f.flatten)([r]),l=o.list,d=(o.roots,[]),i=0;i<l.length;i++){var c=Object.assign({},l[i]);!0!==n.isCut&&(c[t]=c[t]+"_copiedRow",c.pid=e[t]),d.push(c)}var u=n.state.flatData;if(!0===n.isCut){var s=u.findIndex(function(e){return e[t]===r[t]});s>-1&&u.splice(s,1)}u=u.concat(d),n.isCut=!1,n.copiedRow=null,n.setTreeData(u)}},n.isCut=!1,n.cut=function(e){n.copy(e),n.isCut=!0},n.toggleSelectOrExpand=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=["expandedRowKeys","selectedRowKeys"][t],o=new Date;console.log("toggleSelectOrExpand "+r+" :");for(var l=n.rowKey,d=e[l],i=n.state[r],c=[],u={},s=0;s<i.length;s++)u[i[s]]=!0;for(var p=Object(f.flatten)([e]),h=p.list,m=!0===u[d],b=0;b<h.length;b++){var x=h[b][l];m?u[x]=!1:!0!==u[x]&&(u[x]=!0)}for(var g in u)!0===u[g]&&c.push(g);console.log("toggleSelectOrExpand "+r+":",((new Date).getTime()-o.getTime())/1e3),n.setState(Object(a.a)({},r,c))},n.selectAll=function(e){n.toggleSelectOrExpand(e,1)},n.expandToggle=function(e){n.toggleSelectOrExpand(e,0)},n.onMenuClick=function(e){var t=e.key,a={del:n.deleteRow,copy:n.copy,cut:n.cut,pasteChildren:n.pasteChildren,selectAll:n.selectAll,expandToggle:n.expandToggle,export:n.export}[t];"function"===typeof a&&a(n.contentMenuRow)},n.searchIndex=-1,n.searchedKey="",n.onChangeSearch=function(){n.searchIndex=0,n.searchedKey=""},n.onSearch=function(e){var t=n.state.flatData;if(!e)return n.searchIndex=0,n.searchedKey="",void n.forceUpdate();n.expandAll();for(var a=-1,r="",o=n.searchIndex+1,l=t.length;o<l;o++){if(t[o].name.indexOf(e)>-1){a=o,r=t[o].id;break}}a>-1?(n.scrollToItem(a),n.searchIndex=a+1,n.searchedKey=r):(n.searchIndex=-1,n.searchedKey="")},n.onFilter=function(e){var t=n.rowKey,a=n.state,r=a.rawTreeData,o=a.rawFlatData;if(e){for(var l=q({getNodeKey:function(e){return e.node[t]},treeData:r.slice(),searchQuery:e,searchMethod:function(t){return t.node.name.indexOf(e)>-1},searchFocusOffset:0}).matches,d={},i=0;i<o.length;i++){var c=o[i];d[c[t]]=c}for(var u=[],s=0;s<l.length;s++)for(var p=l[s].path||[],h=0;h<p.length;h++){var f=d[p[h]];f&&u.push(f)}u=J.a.uniqBy(u,function(e){return e[t]}),n.setTreeData(u,n.expandAll)}else n.setTreeData(o.slice(),n.collapseAll)},n.rowClassName=function(e,t){return e.id===n.searchedKey?"row-searched":""},n}return Object(i.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t={height:"auto",lineHeight:"normal"};return s.a.createElement("div",{style:{height:"100%"}},s.a.createElement(f.Table,{rowKey:"id",editable:!0,ref:"tb",loading:this.state.loading,rowClassName:this.rowClassName,expandedRowKeys:this.state.expandedRowKeys,onExpandedRowsChange:function(t){e.setState({expandedRowKeys:t})},selectedRowKeys:this.state.selectedRowKeys,onSelectChange:function(t){e.setState({selectedRowKeys:t})},columns:this.columns,selectMode:"multiple",checkStrictly:!1,data:this.state.treeData,orderNumber:{resizable:!0},onRow:this.onRow,validateTrigger:"onChange",header:function(){return s.a.createElement("div",{style:{padding:"10px 0"}},s.a.createElement(v.a,{onClick:e.getData},"\u83b7\u53d6\u6570\u636e"),s.a.createElement(v.a,{onClick:e.expandAll,style:{margin:"0 5px"}},"\u5c55\u5f00\u6240\u6709"),s.a.createElement(v.a,{onClick:function(){return e.expandTo(2)},style:{margin:"0 5px"}},"\u5c55\u5f00\u81f3\u7b2c\u4e8c\u7ea7"),s.a.createElement(v.a,{onClick:e.collapseAll},"\u6298\u53e0\u6240\u6709"),s.a.createElement(V,{style:{float:"right",margin:"0 5px",width:"150px"},placeholder:"\u8f93\u5165\u540d\u79f0\u8fc7\u6ee4",onSearch:e.onFilter}),s.a.createElement(V,{style:{float:"right",margin:"0 5px",width:"150px"},placeholder:"\u8f93\u5165\u540d\u79f0\u67e5\u627e",onSearch:e.onSearch,onChange:e.onChangeSearch}))}}),s.a.createElement(y.b,{style:{display:"none",position:"fixed",border:"1px solid #ccc",boxShadow:"2px 2px 5px 2px rgba(0, 0, 0, 0.15)"},tabIndex:"1",id:"contextMenu",onBlur:this.hideContextMenu,onClick:this.onMenuClick,selectable:!1},s.a.createElement(y.b.Item,{key:"del",style:t},"\u5220\u9664\u884c"),s.a.createElement(y.b.Item,{key:"copy",style:t},"\u590d\u5236\u884c"),s.a.createElement(y.b.Item,{key:"cut",style:t},"\u526a\u5207\u884c"),s.a.createElement(y.b.Item,{key:"pasteChildren",style:t},"\u7c98\u8d34\u884c(\u4e0b\u7ea7)"),s.a.createElement(y.b.Item,{key:"selectAll",style:t},"\u5168\u9009/\u5168\u5426"),s.a.createElement(y.b.Item,{key:"expandToggle",style:t},"\u5c55\u5f00/\u6536\u7f29"),s.a.createElement(y.b.Item,{key:"export",style:t},"\u5bfc\u51fa"),s.a.createElement(y.b.Item,{key:"print",style:t},"\u6253\u5370")))}}]),t}(u.Component),X=B;"undefined"!==typeof B&&B&&B===Object(B)&&Object.isExtensible(B)&&Object.defineProperty(B,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Demo",filename:"examples\\Editable\\complex\\index.js"}}),n.d(t,"default",function(){return H});var Q={},z="wrapper";function H(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(p.b)(z,Object.assign({},Q,n,{components:t,mdxType:"MDXLayout"}),Object(p.b)("h1",{id:"usage"},"Usage"),Object(p.b)("pre",null,Object(p.b)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),'import Table, { flatten, unflatten } from "tablex";\n')),Object(p.b)("h2",{id:"edit-and-validate"},"edit and validate"),Object(p.b)(h.c,{__position:0,__code:"class Demo extends React.Component {\n    generateData(columns, count = 20, prefix = 'Row') {\n      return new Array(count).fill(0).map((row, rowIndex) => {\n        return columns.reduce(\n          (rowData, column, columnIndex) => {\n            if (column.dataIndex !== 'id') {\n              rowData[column.dataIndex] = Math.floor(Math.random() * 100 + 1)\n            } else {\n              rowData[column.dataIndex] =\n                prefix + ' ' + rowIndex + ' - Col ' + columnIndex\n            }\n            return rowData\n          },\n          {\n            id: prefix + rowIndex,\n            parentId: null,\n          },\n        )\n      })\n    }\n    constructor(props) {\n      super(props)\n      const columns = [\n        {\n          dataIndex: 'id',\n          title: 'id',\n          key: 'id',\n          width: 150,\n          align: 'center',\n        },\n        {\n          dataIndex: 'column-1',\n          title: 'column-1',\n          width: 100,\n          validator: function(value, row) {\n            if (!value) {\n              return { valid: false, message: '\u8bf7\u8f93\u5165' }\n            }\n\n            return { valid: true, message: 'false' }\n          },\n          editor: function(value, row, index, onchange, ref) {\n            return (\n              <Input\n                defaultValue={value}\n                ref={ref}\n                onChange={e => onchange({ ['column-1']: e.target.value })}\n              />\n            )\n          },\n        },\n\n        {\n          dataIndex: 'column-2',\n          title: 'column-2',\n          width: 150,\n          align: 'center',\n        },\n\n        {\n          dataIndex: 'column-3',\n          title: 'column-3',\n          align: 'right',\n        },\n        {\n          dataIndex: 'column-4',\n          title: 'column-4',\n          width: 100,\n          align: 'center',\n        },\n      ]\n\n      let data = this.generateData(columns, 10)\n\n      this.state = {\n        data: data,\n        columns: columns,\n      }\n    }\n    onEditSave(changedRows, newData, type) {\n      console.log('onEditSave:', newData)\n      this.setState({\n        data: newData,\n      })\n    }\n    render() {\n      let { columns, data } = this.state\n      return (\n        <Table\n          rowKey=\"id\"\n          columns={columns}\n          validateTrigger=\"onChange\"\n          data={data}\n          editable={true}\n          editTools={['edit', 'add', 'delete']}\n          onEditSave={this.onEditSave.bind(this)}\n        />\n      )\n    }\n  }",__scope:{props:this?this.props:n,Playground:h.c,Props:h.d,Table:m.a,flatten:f.flatten,Input:b.a,Checkbox:x.a,Complex:X},style:{height:400},mdxType:"Playground"},function(e){function t(e){var n;Object(r.a)(this,t);var d=[{dataIndex:"id",title:"id",key:"id",width:150,align:"center"},{dataIndex:"column-1",title:"column-1",width:100,validator:function(e,t){return e?{valid:!0,message:"false"}:{valid:!1,message:"\u8bf7\u8f93\u5165"}},editor:function(e,t,n,r,o){return Object(p.b)(b.a,{defaultValue:e,ref:o,onChange:function(e){return r(Object(a.a)({},"column-1",e.target.value))},mdxType:"Input"})}},{dataIndex:"column-2",title:"column-2",width:150,align:"center"},{dataIndex:"column-3",title:"column-3",align:"right"},{dataIndex:"column-4",title:"column-4",width:100,align:"center"}],i=(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).generateData(d,10);return n.state={data:i,columns:d},n}return Object(i.a)(t,e),Object(d.a)(t,[{key:"generateData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Row";return new Array(t).fill(0).map(function(t,a){return e.reduce(function(e,t,r){return"id"!==t.dataIndex?e[t.dataIndex]=Math.floor(100*Math.random()+1):e[t.dataIndex]=n+" "+a+" - Col "+r,e},{id:n+a,parentId:null})})}}]),Object(d.a)(t,[{key:"onEditSave",value:function(e,t,n){console.log("onEditSave:",t),this.setState({data:t})}},{key:"render",value:function(){var e=this.state,t=e.columns,n=e.data;return Object(p.b)(m.a,{rowKey:"id",columns:t,validateTrigger:"onChange",data:n,editable:!0,editTools:["edit","add","delete"],onEditSave:this.onEditSave.bind(this),mdxType:"Table"})}}]),t}(s.a.Component)),Object(p.b)("h2",{id:"edit-with-50k-nested-rows"},"edit with 50K nested rows"),Object(p.b)(h.c,{__position:1,__code:"<Complex />",__scope:{props:this?this.props:n,Playground:h.c,Props:h.d,Table:m.a,flatten:f.flatten,Input:b.a,Checkbox:x.a,Complex:X},style:{height:600},mdxType:"Playground"},Object(p.b)(X,{mdxType:"Complex"})))}H&&H===Object(H)&&Object.isExtensible(H)&&Object.defineProperty(H,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"examples\\Editable\\index.mdx"}}),H.isMDXComponent=!0}}]);
//# sourceMappingURL=examples-editable-index.84108c276020e00c2fb5.js.map